<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Doxygen Awesome" />
<meta property="og:image" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta property="og:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<meta property="og:url" content="https://jothepro.github.io/doxygen-awesome-css/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta name="twitter:title" content="Doxygen Awesome" />
<meta name="twitter:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<!-- END twitter metadata -->
<title>XWOS API: xwos/mm/bma.c 文件参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<a href="/" class="github-corner" title="返回首页">
  <svg viewBox="0 0 250 250" style="position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
    <path
      d="M 0 0 L 250 250 L 250 0 L 0 0 z M 181.19336 6.25 A 18.281986 19.638775 0 0 1 192.79297 10.798828 L 241.54492 54.201172 A 6.0939954 6.5462585 0 0 1 237.64453 65.787109 L 233.13477 65.787109 A 3.0469979 3.2731292 0 0 0 230.08789 69.060547 L 230.08789 111.61133 A 18.281986 19.638775 0 0 1 211.80664 131.25 L 205.71289 131.25 A 12.187991 13.092517 0 0 1 193.52344 118.1582 L 193.52344 98.519531 A 12.187991 13.092517 0 0 0 181.33594 85.425781 A 12.187991 13.092517 0 0 0 169.14844 98.519531 L 169.14844 118.1582 A 12.187991 13.092517 0 0 1 156.95898 131.25 L 150.86523 131.25 A 18.281986 19.638775 0 0 1 132.58398 111.61133 L 132.58398 68.994141 A 3.0469979 3.2731292 0 0 0 129.29297 65.722656 L 124.7832 65.722656 A 6.0939954 6.5462585 0 0 1 120.88281 54.201172 L 169.39258 10.798828 A 18.281986 19.638775 0 0 1 181.19336 6.25 z "/>
  </svg>
</a>
<style>.github-corner:hover</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">XWOS API
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">XWOS API参考手册</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('bma_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">宏定义</a> &#124;
<a href="#func-members">函数</a>  </div>
  <div class="headertitle"><div class="title">bma.c 文件参考</div></div>
</div><!--header-->
<div class="contents">

<p>XWOS内存管理：伙伴算法内存块分配器  
<a href="#details">更多...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="xwos_2standard_8h_source.html">xwos/standard.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="xwlog_8h_source.html">xwos/lib/xwlog.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="bclst_8h_source.html">xwos/lib/bclst.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="xwbop_8h_source.html">xwos/lib/xwbop.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="lock_2spinlock_8h_source.html">xwos/osal/lock/spinlock.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="xwos_2mm_2common_8h_source.html">xwos/mm/common.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="bma_8h_source.html">xwos/mm/bma.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
bma.c 的引用(Include)关系图:</div>
<div class="dyncontent">
<div class="center"><img src="bma_8c__incl.png" border="0" usemap="#axwos_2mm_2bma_8c" alt=""/></div>
<map name="axwos_2mm_2bma_8c" id="axwos_2mm_2bma_8c">
<area shape="rect" title="XWOS内存管理：伙伴算法内存块分配器" alt="" coords="477,5,596,31"/>
<area shape="rect" href="xwos_2standard_8h.html" title="XWOS的标准头文件" alt="" coords="549,313,668,339"/>
<area shape="poly" title=" " alt="" coords="477,28,366,46,317,61,300,70,288,80,286,90,289,104,290,153,289,192,297,228,307,245,322,263,337,273,357,283,412,298,536,316,535,321,411,303,355,288,334,278,319,267,302,248,292,230,284,193,285,153,283,104,280,90,284,77,297,66,315,56,365,41,477,22"/>
<area shape="rect" href="xwlog_8h.html" title="XWOS通用库：日志" alt="" coords="297,79,416,104"/>
<area shape="poly" title=" " alt="" coords="509,33,400,76,398,71,507,28"/>
<area shape="rect" href="bclst_8h.html" title="XWOS通用库：双循环链表" alt="" coords="483,152,596,177"/>
<area shape="poly" title=" " alt="" coords="540,31,542,138,536,138,534,31"/>
<area shape="rect" href="xwbop_8h.html" title="XWOS通用库：位操作" alt="" coords="335,152,458,177"/>
<area shape="poly" title=" " alt="" coords="527,33,419,144,415,140,523,29"/>
<area shape="rect" href="lock_2spinlock_8h.html" title="操作系统抽象层：自旋锁" alt="" coords="840,152,1012,177"/>
<area shape="poly" title=" " alt="" coords="580,28,652,49,734,76,819,111,891,144,889,148,817,116,732,81,651,54,579,33"/>
<area shape="rect" href="xwos_2mm_2common_8h.html" title="XWOS内存管理：通用定义" alt="" coords="671,152,815,177"/>
<area shape="poly" title=" " alt="" coords="597,25,654,43,683,58,708,77,729,106,741,137,736,139,724,109,704,81,680,62,652,48,595,31"/>
<area shape="rect" href="bma_8h.html" title="XWOS内存管理：伙伴算法内存块分配器" alt="" coords="575,79,693,104"/>
<area shape="poly" title=" " alt="" coords="554,29,608,68,605,72,551,33"/>
<area shape="rect" title=" " alt="" coords="403,533,497,559"/>
<area shape="poly" title=" " alt="" coords="556,341,514,359,495,372,479,388,462,420,453,456,450,490,450,520,445,520,444,490,447,455,457,418,475,385,491,368,511,354,554,336"/>
<area shape="rect" href="rule_8h.html" title="XWOS通用库：编译规则" alt="" coords="101,387,207,412"/>
<area shape="poly" title=" " alt="" coords="550,339,221,390,221,385,549,334"/>
<area shape="rect" href="compiler_8h.html" title="XWOS通用库：编译器宏定义" alt="" coords="277,387,412,412"/>
<area shape="poly" title=" " alt="" coords="567,341,401,386,400,380,566,336"/>
<area shape="rect" href="version_8h.html" title="XWOS版本号" alt="" coords="488,387,599,412"/>
<area shape="poly" title=" " alt="" coords="600,341,565,378,561,375,596,337"/>
<area shape="rect" href="type_8h.html" title="XWOS通用库：基本类型定义" alt="" coords="904,460,1015,485"/>
<area shape="poly" title=" " alt="" coords="668,329,813,347,880,363,907,373,926,385,939,398,948,414,958,446,953,448,943,416,934,401,923,389,905,378,879,368,812,353,668,334"/>
<area shape="rect" href="error_8h.html" title="XWOS通用库：错误" alt="" coords="801,387,912,412"/>
<area shape="poly" title=" " alt="" coords="649,336,804,380,803,385,648,341"/>
<area shape="rect" title=" " alt="" coords="602,460,741,485"/>
<area shape="poly" title=" " alt="" coords="667,336,707,354,726,368,740,385,745,405,738,424,723,440,705,454,702,450,719,436,733,421,740,404,736,388,722,372,705,359,665,341"/>
<area shape="rect" href="mb_8h.html" title="XWOS通用库：内存屏障" alt="" coords="623,387,725,412"/>
<area shape="poly" title=" " alt="" coords="621,337,656,375,652,378,617,341"/>
<area shape="poly" title=" " alt="" coords="157,412,162,448,169,467,181,483,216,502,269,517,389,536,388,541,268,522,214,507,178,487,164,470,157,449,151,413"/>
<area shape="rect" title=" " alt="" coords="5,460,116,485"/>
<area shape="poly" title=" " alt="" coords="141,414,88,454,85,449,137,410"/>
<area shape="poly" title=" " alt="" coords="355,411,436,521,431,524,351,414"/>
<area shape="rect" title=" " alt="" coords="191,460,362,485"/>
<area shape="poly" title=" " alt="" coords="335,414,299,452,295,448,332,410"/>
<area shape="poly" title=" " alt="" coords="904,486,892,488,512,540,511,534,891,483,903,481"/>
<area shape="rect" title=" " alt="" coords="819,533,966,559"/>
<area shape="poly" title=" " alt="" coords="950,487,915,525,911,521,946,484"/>
<area shape="rect" title=" " alt="" coords="990,533,1059,559"/>
<area shape="poly" title=" " alt="" coords="972,484,1007,521,1003,525,968,487"/>
<area shape="poly" title=" " alt="" coords="875,410,933,450,930,454,872,414"/>
<area shape="rect" href="errno_8h.html" title="XWOS通用库：错误码" alt="" coords="765,460,879,485"/>
<area shape="poly" title=" " alt="" coords="853,414,836,449,831,446,849,411"/>
<area shape="poly" title=" " alt="" coords="657,414,481,528,478,523,655,410"/>
<area shape="poly" title=" " alt="" coords="676,412,675,447,670,446,671,412"/>
<area shape="poly" title=" " alt="" coords="350,106,337,127,326,153,320,187,324,214,338,239,362,263,402,289,447,306,493,316,536,322,535,327,492,322,445,311,400,294,359,267,334,242,319,216,315,187,321,151,332,124,346,103"/>
<area shape="poly" title=" " alt="" coords="547,176,600,299,596,301,542,178"/>
<area shape="poly" title=" " alt="" coords="391,179,381,197,372,220,370,243,377,264,401,280,441,294,536,313,535,319,439,299,399,285,373,267,364,244,367,219,376,195,386,176"/>
<area shape="rect" title=" " alt="" coords="387,233,545,258"/>
<area shape="poly" title=" " alt="" coords="409,176,449,221,445,224,405,179"/>
<area shape="poly" title=" " alt="" coords="913,180,855,221,777,268,719,293,663,312,661,307,717,288,774,263,852,217,910,175"/>
<area shape="rect" href="jack_2lock_2spinlock_8h.html" title="操作系统抽象层：自旋锁接口描述" alt="" coords="1001,225,1139,265"/>
<area shape="poly" title=" " alt="" coords="949,175,1025,216,1022,221,946,180"/>
<area shape="rect" href="irq_8h.html" title="操作系统抽象层：异常与中断" alt="" coords="867,233,977,258"/>
<area shape="poly" title=" " alt="" coords="928,178,926,219,921,219,923,177"/>
<area shape="poly" title=" " alt="" coords="877,261,848,268,668,313,667,307,847,263,876,255"/>
<area shape="rect" href="jack_2irq_8h.html" title="操作系统抽象层：中断接口描述" alt="" coords="853,313,991,339"/>
<area shape="poly" title=" " alt="" coords="925,258,925,299,919,299,919,258"/>
<area shape="poly" title=" " alt="" coords="751,177,763,218,764,243,755,267,740,284,722,297,682,315,680,310,720,292,737,280,750,264,758,243,758,219,746,178"/>
<area shape="rect" title=" " alt="" coords="671,233,741,258"/>
<area shape="poly" title=" " alt="" coords="740,179,720,221,715,219,735,176"/>
<area shape="poly" title=" " alt="" coords="635,105,614,300,609,300,630,104"/>
<area shape="poly" title=" " alt="" coords="620,106,567,146,564,141,617,102"/>
<area shape="poly" title=" " alt="" coords="597,107,449,151,447,145,595,101"/>
<area shape="poly" title=" " alt="" coords="682,101,866,146,865,151,680,107"/>
<area shape="poly" title=" " alt="" coords="653,102,715,142,712,147,650,106"/>
</map>
</div>
</div>
<p><a href="bma_8c_source.html">浏览源代码.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
宏定义</h2></td></tr>
<tr class="memitem:aa4b118f6cd61a828b533df7a9ef3e2f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bma_8c.html#aa4b118f6cd61a828b533df7a9ef3e2f6">xwmm_bmalogf</a>(lv,  fmt, ...)</td></tr>
<tr class="separator:aa4b118f6cd61a828b533df7a9ef3e2f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:a15e3480a65e5546b1741de53e14642d7"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bma_8c.html#a15e3480a65e5546b1741de53e14642d7">xwmm_bma_mem_to_bcb</a> (struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *bma, void *mem)</td></tr>
<tr class="memdesc:a15e3480a65e5546b1741de53e14642d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">从内存块首地址获得其控制块的指针  <br /></td></tr>
<tr class="separator:a15e3480a65e5546b1741de53e14642d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafad73243c00281bd2a0f93cec7667ae"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bma_8c.html#aafad73243c00281bd2a0f93cec7667ae">xwmm_bma_bcb_to_mem</a> (struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *bma, struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> *bcb)</td></tr>
<tr class="memdesc:aafad73243c00281bd2a0f93cec7667ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">从内存块的控制块指针获得内存块的首地址  <br /></td></tr>
<tr class="separator:aafad73243c00281bd2a0f93cec7667ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeba29f4783fafad29d6d68dadd9869b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bma_8c.html#aaeba29f4783fafad29d6d68dadd9869b">xwmm_bma_find_buddy</a> (struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *bma, struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> *bcb)</td></tr>
<tr class="memdesc:aaeba29f4783fafad29d6d68dadd9869b"><td class="mdescLeft">&#160;</td><td class="mdescRight">寻找内存块的伙伴  <br /></td></tr>
<tr class="separator:aaeba29f4783fafad29d6d68dadd9869b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96d4bf13adbddda9f906bba0d13e8bfb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bma_8c.html#a96d4bf13adbddda9f906bba0d13e8bfb">xwmm_bma_orderlist_add</a> (struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *bma, struct <a class="el" href="structxwmm__bma__orderlist.html">xwmm_bma_orderlist</a> *ol, <a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> odr, struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> *bcb)</td></tr>
<tr class="memdesc:a96d4bf13adbddda9f906bba0d13e8bfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">将一块内存加入到阶链表  <br /></td></tr>
<tr class="separator:a96d4bf13adbddda9f906bba0d13e8bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3ac44994de282a1379a02e8080c83b0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bma_8c.html#ac3ac44994de282a1379a02e8080c83b0">xwmm_bma_orderlist_remove</a> (struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *bma, struct <a class="el" href="structxwmm__bma__orderlist.html">xwmm_bma_orderlist</a> *ol, <a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> odr, struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> *bcb)</td></tr>
<tr class="memdesc:ac3ac44994de282a1379a02e8080c83b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">从阶链表中删除一块内存  <br /></td></tr>
<tr class="separator:ac3ac44994de282a1379a02e8080c83b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b3258dbb6923b7e1d91da1778e71135"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bma_8c.html#a9b3258dbb6923b7e1d91da1778e71135">xwmm_bma_orderlist_choose</a> (struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *bma, struct <a class="el" href="structxwmm__bma__orderlist.html">xwmm_bma_orderlist</a> *ol)</td></tr>
<tr class="memdesc:a9b3258dbb6923b7e1d91da1778e71135"><td class="mdescLeft">&#160;</td><td class="mdescRight">从阶链表中选择一块内存，并返回其块控制块  <br /></td></tr>
<tr class="separator:a9b3258dbb6923b7e1d91da1778e71135"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af42265723d027d450f0c9f7dabaadd55"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bma_8c.html#af42265723d027d450f0c9f7dabaadd55">xwmm_bma_divide_block</a> (struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *bma, struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> *bcb, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> target_odr, struct <a class="el" href="structxwmm__bma__orderlist.html">xwmm_bma_orderlist</a> *curr_ol)</td></tr>
<tr class="memdesc:af42265723d027d450f0c9f7dabaadd55"><td class="mdescLeft">&#160;</td><td class="mdescRight">将大内存块分割成小块  <br /></td></tr>
<tr class="separator:af42265723d027d450f0c9f7dabaadd55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23e3c965cba3a637b375fd6b6076f3ad"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bma_8c.html#a23e3c965cba3a637b375fd6b6076f3ad">xwmm_bma_combine</a> (struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *bma, struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> *bcb)</td></tr>
<tr class="memdesc:a23e3c965cba3a637b375fd6b6076f3ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">合并内存块  <br /></td></tr>
<tr class="separator:a23e3c965cba3a637b375fd6b6076f3ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga591aeadbb32ce6e77563d873ecb53b33"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmm__bma.html#ga591aeadbb32ce6e77563d873ecb53b33">xwmm_bma_init</a> (struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *bma, const char *name, <a class="el" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a> origin, <a class="el" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> size, <a class="el" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> blksize, <a class="el" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> blkodr)</td></tr>
<tr class="memdesc:ga591aeadbb32ce6e77563d873ecb53b33"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMM API：初始化伙伴算法内存块分配器  <br /></td></tr>
<tr class="separator:ga591aeadbb32ce6e77563d873ecb53b33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeb6fee8b92b2298f0c8519f1144318e8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmm__bma.html#gaeb6fee8b92b2298f0c8519f1144318e8">xwmm_bma_alloc</a> (struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *bma, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> order, void **membuf)</td></tr>
<tr class="memdesc:gaeb6fee8b92b2298f0c8519f1144318e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMM API：申请一块连续的内存  <br /></td></tr>
<tr class="separator:gaeb6fee8b92b2298f0c8519f1144318e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7648b862d8fc0cb4a496d224c0a7f5a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmm__bma.html#ga7648b862d8fc0cb4a496d224c0a7f5a3">xwmm_bma_free</a> (struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *bma, void *mem)</td></tr>
<tr class="memdesc:ga7648b862d8fc0cb4a496d224c0a7f5a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMM API：释放内存块  <br /></td></tr>
<tr class="separator:ga7648b862d8fc0cb4a496d224c0a7f5a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><p>XWOS内存管理：伙伴算法内存块分配器 </p>
<dl class="section author"><dt>作者</dt><dd><ul>
<li>隐星魂 (Roy Sun) <a href="#" onclick="location.href='mai'+'lto:'+'xwo'+'s@'+'xwo'+'s.'+'tec'+'h'; return false;">xwos@<span class="obfuscator">.nosp@m.</span>xwos<span class="obfuscator">.nosp@m.</span>.tech</a> </li>
</ul>
</dd></dl>
<dl class="section copyright"><dt>版权所有</dt><dd><ul>
<li>Copyright © 2015 xwos.tech, All Rights Reserved. <blockquote class="doxtable">
<p>&zwj;This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed with this file, You can obtain one at <a href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>. </p>
</blockquote>
</li>
</ul>
</dd></dl>

<p class="definition">在文件 <a class="el" href="bma_8c_source.html">bma.c</a> 中定义.</p>
</div><h2 class="groupheader">宏定义说明</h2>
<a id="aa4b118f6cd61a828b533df7a9ef3e2f6" name="aa4b118f6cd61a828b533df7a9ef3e2f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4b118f6cd61a828b533df7a9ef3e2f6">&#9670;&#160;</a></span>xwmm_bmalogf</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define xwmm_bmalogf</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">lv, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fmt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>&lt; 调试日志开关 <br  />
 </p>

<p class="definition">在文件 <a class="el" href="bma_8c_source.html">bma.c</a> 第 <a class="el" href="bma_8c_source.html#l00025">25</a> 行定义.</p>

</div>
</div>
<h2 class="groupheader">函数说明</h2>
<a id="aafad73243c00281bd2a0f93cec7667ae" name="aafad73243c00281bd2a0f93cec7667ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafad73243c00281bd2a0f93cec7667ae">&#9670;&#160;</a></span>xwmm_bma_bcb_to_mem()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void * xwmm_bma_bcb_to_mem </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *&#160;</td>
          <td class="paramname"><em>bma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> *&#160;</td>
          <td class="paramname"><em>bcb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>从内存块的控制块指针获得内存块的首地址 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bma</td><td>伙伴算法内存块分配器对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bcb</td><td>内存块的控制块指针 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>内存块的首地址 </dd></dl>

<p class="definition">在文件 <a class="el" href="bma_8c_source.html">bma.c</a> 第 <a class="el" href="bma_8c_source.html#l00138">138</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  139</span>{</div>
<div class="line"><span class="lineno">  140</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a> idx;</div>
<div class="line"><span class="lineno">  141</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a> mem;</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>        idx = ((<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)bcb - (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)bma-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a960065c30d9d1ab09b38751d3b9936ab">bcbs</a>) / <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a>);</div>
<div class="line"><span class="lineno">  144</span>        mem = (idx * bma-&gt;<a class="code hl_variable" href="structxwmm__bma.html#af75616bed0d5aca4c06b78a05ebfd318">blksize</a>) + bma-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a125adc2f817d937fb8950d817422042c">zone</a>.<a class="code hl_variable" href="structxwmm__zone.html#a6234f16a4f0b8787dfa3fcab0767d9e5">origin</a>;</div>
<div class="line"><span class="lineno">  145</span>        <span class="keywordflow">return</span> (<span class="keywordtype">void</span> *)mem;</div>
<div class="line"><span class="lineno">  146</span>}</div>
<div class="ttc" id="agroup__xwos__lib__type_html_gacef49946313c8d1985a8279bb40e31c4"><div class="ttname"><a href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a></div><div class="ttdeci">unsigned long xwptr_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00375">type.h:375</a></div></div>
<div class="ttc" id="astructxwmm__bma__bcb_html"><div class="ttname"><a href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a></div><div class="ttdoc">块控制块</div><div class="ttdef"><b>Definition</b> <a href="bma_8h_source.html#l00081">bma.h:81</a></div></div>
<div class="ttc" id="astructxwmm__bma_html_a125adc2f817d937fb8950d817422042c"><div class="ttname"><a href="structxwmm__bma.html#a125adc2f817d937fb8950d817422042c">xwmm_bma::zone</a></div><div class="ttdeci">struct xwmm_zone zone</div><div class="ttdef"><b>Definition</b> <a href="bma_8h_source.html#l00092">bma.h:92</a></div></div>
<div class="ttc" id="astructxwmm__bma_html_a960065c30d9d1ab09b38751d3b9936ab"><div class="ttname"><a href="structxwmm__bma.html#a960065c30d9d1ab09b38751d3b9936ab">xwmm_bma::bcbs</a></div><div class="ttdeci">struct xwmm_bma_bcb * bcbs</div><div class="ttdef"><b>Definition</b> <a href="bma_8h_source.html#l00098">bma.h:98</a></div></div>
<div class="ttc" id="astructxwmm__bma_html_af75616bed0d5aca4c06b78a05ebfd318"><div class="ttname"><a href="structxwmm__bma.html#af75616bed0d5aca4c06b78a05ebfd318">xwmm_bma::blksize</a></div><div class="ttdeci">xwsz_t blksize</div><div class="ttdef"><b>Definition</b> <a href="bma_8h_source.html#l00094">bma.h:94</a></div></div>
<div class="ttc" id="astructxwmm__zone_html_a6234f16a4f0b8787dfa3fcab0767d9e5"><div class="ttname"><a href="structxwmm__zone.html#a6234f16a4f0b8787dfa3fcab0767d9e5">xwmm_zone::origin</a></div><div class="ttdeci">xwptr_t origin</div><div class="ttdef"><b>Definition</b> <a href="xwos_2mm_2common_8h_source.html#l00041">common.h:41</a></div></div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="bma_8c_aafad73243c00281bd2a0f93cec7667ae_icgraph.png" border="0" usemap="#abma_8c_aafad73243c00281bd2a0f93cec7667ae_icgraph" alt=""/></div>
<map name="abma_8c_aafad73243c00281bd2a0f93cec7667ae_icgraph" id="abma_8c_aafad73243c00281bd2a0f93cec7667ae_icgraph">
<area shape="rect" title="从内存块的控制块指针获得内存块的首地址" alt="" coords="623,72,797,97"/>
<area shape="rect" href="group__xwmm__bma.html#gaeb6fee8b92b2298f0c8519f1144318e8" title="XWMM API：申请一块连续的内存" alt="" coords="5,5,132,31"/>
<area shape="poly" title=" " alt="" coords="628,72,574,62,463,38,415,28,352,21,235,16,132,17,132,12,235,10,352,15,416,23,464,33,575,57,629,67"/>
<area shape="rect" href="bma_8c.html#a96d4bf13adbddda9f906bba0d13e8bfb" title="将一块内存加入到阶链表" alt="" coords="400,72,575,97"/>
<area shape="poly" title=" " alt="" coords="609,87,575,87,575,82,609,82"/>
<area shape="rect" href="bma_8c.html#ac3ac44994de282a1379a02e8080c83b0" title="从阶链表中删除一块内存" alt="" coords="414,122,561,162"/>
<area shape="poly" title=" " alt="" coords="647,103,561,126,560,121,646,98"/>
<area shape="rect" href="bma_8c.html#a23e3c965cba3a637b375fd6b6076f3ad" title="合并内存块" alt="" coords="191,129,341,155"/>
<area shape="poly" title=" " alt="" coords="425,103,316,132,315,127,424,98"/>
<area shape="rect" href="bma_8c.html#af42265723d027d450f0c9f7dabaadd55" title="将大内存块分割成小块" alt="" coords="180,31,352,56"/>
<area shape="poly" title=" " alt="" coords="405,72,334,59,335,53,406,67"/>
<area shape="rect" href="group__xwmm__bma.html#ga591aeadbb32ce6e77563d873ecb53b33" title="XWMM API：初始化伙伴算法内存块分配器" alt="" coords="207,80,325,105"/>
<area shape="poly" title=" " alt="" coords="386,91,325,93,325,88,386,86"/>
<area shape="rect" href="group__xwmm__bma.html#ga7648b862d8fc0cb4a496d224c0a7f5a3" title="XWMM API：释放内存块" alt="" coords="7,129,130,155"/>
<area shape="poly" title=" " alt="" coords="177,145,130,145,130,139,177,139"/>
<area shape="poly" title=" " alt="" coords="166,33,132,29,133,23,167,28"/>
<area shape="poly" title=" " alt="" coords="400,145,341,145,341,139,400,139"/>
</map>
</div>

</div>
</div>
<a id="a23e3c965cba3a637b375fd6b6076f3ad" name="a23e3c965cba3a637b375fd6b6076f3ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23e3c965cba3a637b375fd6b6076f3ad">&#9670;&#160;</a></span>xwmm_bma_combine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void xwmm_bma_combine </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *&#160;</td>
          <td class="paramname"><em>bma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> *&#160;</td>
          <td class="paramname"><em>bcb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>合并内存块 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bma</td><td>伙伴算法内存块分配器对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bcb</td><td>内存块的控制块的指针 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<p>&lt; 阶的掩码</p>
<p>&lt; 块已被合并</p>
<p>&lt; 块正在被使用</p>
<p>&lt; 报告BUG</p>
<p>&lt; 当条件x成立时报告BUG</p>
<p>&lt; 块已被合并</p>
<p>&lt; 块正在被使用</p>
<p>&lt; 块正在被使用</p>
<p>&lt; 块已被合并</p>
<p>&lt; 块正在被使用</p>
<p>&lt; 块正在被使用</p>

<p class="definition">在文件 <a class="el" href="bma_8c_source.html">bma.c</a> 第 <a class="el" href="bma_8c_source.html#l00358">358</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  359</span>{</div>
<div class="line"><span class="lineno">  360</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> * buddy;</div>
<div class="line"><span class="lineno">  361</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> curr_odr;</div>
<div class="line"><span class="lineno">  362</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> target_odr;</div>
<div class="line"><span class="lineno">  363</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>        curr_odr = (bcb-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a> &amp; <a class="code hl_define" href="group__xwmm__bma.html#ga52281f21fdbc92910b7f0e49b2272489">XWMM_BMA_ORDER_MASK</a>);</div>
<div class="line"><span class="lineno">  366</span>        target_odr = curr_odr + (<a class="code hl_typedef" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a>)1;</div>
<div class="line"><span class="lineno">  367</span>        <span class="keywordflow">while</span> (target_odr &lt;= bma-&gt;blkodr) {</div>
<div class="line"><span class="lineno">  368</span>                buddy = <a class="code hl_function" href="bma_8c.html#aaeba29f4783fafad29d6d68dadd9869b">xwmm_bma_find_buddy</a>(bma, bcb);</div>
<div class="line"><span class="lineno">  369</span>                <a class="code hl_define" href="bma_8c.html#aa4b118f6cd61a828b533df7a9ef3e2f6">xwmm_bmalogf</a>(DEBUG,</div>
<div class="line"><span class="lineno">  370</span>                             <span class="stringliteral">&quot;[FREE][M] bcb(idx:0x%lX,odr:0x%X),&quot;</span></div>
<div class="line"><span class="lineno">  371</span>                             <span class="stringliteral">&quot;buddy(idx:0x%lX,odr:0x%X)\n&quot;</span>,</div>
<div class="line"><span class="lineno">  372</span>                             (((<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)bcb - (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)<a class="code hl_struct" href="structxwmm__bma.html">xwmm_bma</a>-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a960065c30d9d1ab09b38751d3b9936ab">bcbs</a>) /</div>
<div class="line"><span class="lineno">  373</span>                              <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a>)),</div>
<div class="line"><span class="lineno">  374</span>                             bcb-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a>,</div>
<div class="line"><span class="lineno">  375</span>                             (((<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)buddy - (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)<a class="code hl_struct" href="structxwmm__bma.html">xwmm_bma</a>-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a960065c30d9d1ab09b38751d3b9936ab">bcbs</a>) /</div>
<div class="line"><span class="lineno">  376</span>                              <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a>)),</div>
<div class="line"><span class="lineno">  377</span>                             buddy-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a>);</div>
<div class="line"><span class="lineno">  378</span>                <a class="code hl_define" href="group__xwos__standard.html#ga1bab891fe9a97ea85286bc6e44a88c17">XWOS_BUG_ON</a>((<a class="code hl_define" href="group__xwmm__bma.html#gaaee8c675c73f326b0fb3d7a5545751e7">XWMM_BMA_COMBINED</a> | <a class="code hl_define" href="group__xwmm__bma.html#gaa9a7e10746d23bdd8423f3b40e2bd7c5">XWMM_BMA_INUSED</a>) == buddy-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a>);</div>
<div class="line"><span class="lineno">  379</span>                rc = <a class="code hl_function" href="bma_8c.html#ac3ac44994de282a1379a02e8080c83b0">xwmm_bma_orderlist_remove</a>(bma,</div>
<div class="line"><span class="lineno">  380</span>                                               &amp;bma-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a606659b9828e2d6ce8d4d28292f0fb33">orderlists</a>[curr_odr],</div>
<div class="line"><span class="lineno">  381</span>                                               curr_odr,</div>
<div class="line"><span class="lineno">  382</span>                                               buddy);</div>
<div class="line"><span class="lineno">  383</span>                <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  384</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  385</span>                }</div>
<div class="line"><span class="lineno">  386</span>                <span class="comment">/* 此时 `buddy-&gt;order` 以及 `bcb-&gt;order` 都是本地数据。 */</span></div>
<div class="line"><span class="lineno">  387</span>                <span class="keywordflow">if</span> (buddy &gt; bcb) {</div>
<div class="line"><span class="lineno">  388</span>                        buddy-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a> = <a class="code hl_define" href="group__xwmm__bma.html#gaaee8c675c73f326b0fb3d7a5545751e7">XWMM_BMA_COMBINED</a> | <a class="code hl_define" href="group__xwmm__bma.html#gaa9a7e10746d23bdd8423f3b40e2bd7c5">XWMM_BMA_INUSED</a>;</div>
<div class="line"><span class="lineno">  389</span>                        bcb-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a> = (<a class="code hl_typedef" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a>)target_odr | <a class="code hl_define" href="group__xwmm__bma.html#gaa9a7e10746d23bdd8423f3b40e2bd7c5">XWMM_BMA_INUSED</a>;</div>
<div class="line"><span class="lineno">  390</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  391</span>                        bcb-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a> = <a class="code hl_define" href="group__xwmm__bma.html#gaaee8c675c73f326b0fb3d7a5545751e7">XWMM_BMA_COMBINED</a> | <a class="code hl_define" href="group__xwmm__bma.html#gaa9a7e10746d23bdd8423f3b40e2bd7c5">XWMM_BMA_INUSED</a>;</div>
<div class="line"><span class="lineno">  392</span>                        buddy-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a> = (<a class="code hl_typedef" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a>)target_odr | <a class="code hl_define" href="group__xwmm__bma.html#gaa9a7e10746d23bdd8423f3b40e2bd7c5">XWMM_BMA_INUSED</a>;</div>
<div class="line"><span class="lineno">  393</span>                        bcb = buddy;</div>
<div class="line"><span class="lineno">  394</span>                }</div>
<div class="line"><span class="lineno">  395</span>                curr_odr = target_odr;</div>
<div class="line"><span class="lineno">  396</span>                target_odr++;</div>
<div class="line"><span class="lineno">  397</span>        }</div>
<div class="line"><span class="lineno">  398</span>        <a class="code hl_function" href="bma_8c.html#a96d4bf13adbddda9f906bba0d13e8bfb">xwmm_bma_orderlist_add</a>(bma, &amp;bma-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a606659b9828e2d6ce8d4d28292f0fb33">orderlists</a>[curr_odr], curr_odr, bcb);</div>
<div class="line"><span class="lineno">  399</span>}</div>
<div class="ttc" id="abma_8c_html_a96d4bf13adbddda9f906bba0d13e8bfb"><div class="ttname"><a href="bma_8c.html#a96d4bf13adbddda9f906bba0d13e8bfb">xwmm_bma_orderlist_add</a></div><div class="ttdeci">static void xwmm_bma_orderlist_add(struct xwmm_bma *bma, struct xwmm_bma_orderlist *ol, xwu8_t odr, struct xwmm_bma_bcb *bcb)</div><div class="ttdoc">将一块内存加入到阶链表</div><div class="ttdef"><b>Definition</b> <a href="bma_8c_source.html#l00175">bma.c:175</a></div></div>
<div class="ttc" id="abma_8c_html_aa4b118f6cd61a828b533df7a9ef3e2f6"><div class="ttname"><a href="bma_8c.html#aa4b118f6cd61a828b533df7a9ef3e2f6">xwmm_bmalogf</a></div><div class="ttdeci">#define xwmm_bmalogf(lv, fmt,...)</div><div class="ttdef"><b>Definition</b> <a href="bma_8c_source.html#l00025">bma.c:25</a></div></div>
<div class="ttc" id="abma_8c_html_aaeba29f4783fafad29d6d68dadd9869b"><div class="ttname"><a href="bma_8c.html#aaeba29f4783fafad29d6d68dadd9869b">xwmm_bma_find_buddy</a></div><div class="ttdeci">static struct xwmm_bma_bcb * xwmm_bma_find_buddy(struct xwmm_bma *bma, struct xwmm_bma_bcb *bcb)</div><div class="ttdoc">寻找内存块的伙伴</div><div class="ttdef"><b>Definition</b> <a href="bma_8c_source.html#l00155">bma.c:155</a></div></div>
<div class="ttc" id="abma_8c_html_ac3ac44994de282a1379a02e8080c83b0"><div class="ttname"><a href="bma_8c.html#ac3ac44994de282a1379a02e8080c83b0">xwmm_bma_orderlist_remove</a></div><div class="ttdeci">static xwer_t xwmm_bma_orderlist_remove(struct xwmm_bma *bma, struct xwmm_bma_orderlist *ol, xwu8_t odr, struct xwmm_bma_bcb *bcb)</div><div class="ttdoc">从阶链表中删除一块内存</div><div class="ttdef"><b>Definition</b> <a href="bma_8c_source.html#l00209">bma.c:209</a></div></div>
<div class="ttc" id="agroup__xwmm__bma_html_ga52281f21fdbc92910b7f0e49b2272489"><div class="ttname"><a href="group__xwmm__bma.html#ga52281f21fdbc92910b7f0e49b2272489">XWMM_BMA_ORDER_MASK</a></div><div class="ttdeci">#define XWMM_BMA_ORDER_MASK</div><div class="ttdef"><b>Definition</b> <a href="bma_8h_source.html#l00046">bma.h:46</a></div></div>
<div class="ttc" id="agroup__xwmm__bma_html_gaa9a7e10746d23bdd8423f3b40e2bd7c5"><div class="ttname"><a href="group__xwmm__bma.html#gaa9a7e10746d23bdd8423f3b40e2bd7c5">XWMM_BMA_INUSED</a></div><div class="ttdeci">#define XWMM_BMA_INUSED</div><div class="ttdef"><b>Definition</b> <a href="bma_8h_source.html#l00047">bma.h:47</a></div></div>
<div class="ttc" id="agroup__xwmm__bma_html_gaaee8c675c73f326b0fb3d7a5545751e7"><div class="ttname"><a href="group__xwmm__bma.html#gaaee8c675c73f326b0fb3d7a5545751e7">XWMM_BMA_COMBINED</a></div><div class="ttdeci">#define XWMM_BMA_COMBINED</div><div class="ttdef"><b>Definition</b> <a href="bma_8h_source.html#l00045">bma.h:45</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga06847ea8c7edb2b1f166288b230f251f"><div class="ttname"><a href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a></div><div class="ttdeci">signed long xwer_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00554">type.h:554</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga4433c8b2d64a72382ab333d11bfd0093"><div class="ttname"><a href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a></div><div class="ttdeci">uint8_t xwu8_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00194">type.h:194</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga59fe68c80516b22de8dccb84275d23f2"><div class="ttname"><a href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a></div><div class="ttdeci">unsigned long xwsq_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00445">type.h:445</a></div></div>
<div class="ttc" id="agroup__xwos__standard_html_ga1bab891fe9a97ea85286bc6e44a88c17"><div class="ttname"><a href="group__xwos__standard.html#ga1bab891fe9a97ea85286bc6e44a88c17">XWOS_BUG_ON</a></div><div class="ttdeci">#define XWOS_BUG_ON(x)</div><div class="ttdef"><b>Definition</b> <a href="xwos_2standard_8h_source.html#l00057">standard.h:57</a></div></div>
<div class="ttc" id="astructxwmm__bma__bcb_html_aa2bc43de36e79a5c9972232204a7e4d0"><div class="ttname"><a href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">xwmm_bma_bcb::order</a></div><div class="ttdeci">xwu8_t order</div><div class="ttdef"><b>Definition</b> <a href="bma_8h_source.html#l00082">bma.h:82</a></div></div>
<div class="ttc" id="astructxwmm__bma_html"><div class="ttname"><a href="structxwmm__bma.html">xwmm_bma</a></div><div class="ttdoc">伙伴算法内存块分配器</div><div class="ttdef"><b>Definition</b> <a href="bma_8h_source.html#l00091">bma.h:91</a></div></div>
<div class="ttc" id="astructxwmm__bma_html_a606659b9828e2d6ce8d4d28292f0fb33"><div class="ttname"><a href="structxwmm__bma.html#a606659b9828e2d6ce8d4d28292f0fb33">xwmm_bma::orderlists</a></div><div class="ttdeci">struct xwmm_bma_orderlist * orderlists</div><div class="ttdef"><b>Definition</b> <a href="bma_8h_source.html#l00097">bma.h:97</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="bma_8c_a23e3c965cba3a637b375fd6b6076f3ad_cgraph.png" border="0" usemap="#abma_8c_a23e3c965cba3a637b375fd6b6076f3ad_cgraph" alt=""/></div>
<map name="abma_8c_a23e3c965cba3a637b375fd6b6076f3ad_cgraph" id="abma_8c_a23e3c965cba3a637b375fd6b6076f3ad_cgraph">
<area shape="rect" title="合并内存块" alt="" coords="5,56,155,81"/>
<area shape="rect" href="bma_8c.html#aaeba29f4783fafad29d6d68dadd9869b" title="寻找内存块的伙伴" alt="" coords="209,7,371,32"/>
<area shape="poly" title=" " alt="" coords="134,53,221,33,223,38,135,59"/>
<area shape="rect" href="bma_8c.html#a96d4bf13adbddda9f906bba0d13e8bfb" title="将一块内存加入到阶链表" alt="" coords="203,56,377,81"/>
<area shape="poly" title=" " alt="" coords="155,66,189,66,189,71,155,71"/>
<area shape="rect" href="bma_8c.html#ac3ac44994de282a1379a02e8080c83b0" title="从阶链表中删除一块内存" alt="" coords="217,106,363,146"/>
<area shape="poly" title=" " alt="" coords="128,79,204,100,203,105,127,84"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706" title="将一个节点加入链表头部（链表头的后面）" alt="" coords="437,5,588,31"/>
<area shape="poly" title=" " alt="" coords="346,53,442,31,443,36,347,58"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569" title="初始化一个链表节点。" alt="" coords="660,81,807,107"/>
<area shape="poly" title=" " alt="" coords="377,71,646,86,646,92,377,76"/>
<area shape="rect" href="bma_8c.html#aafad73243c00281bd2a0f93cec7667ae" title="从内存块的控制块指针获得内存块的首地址" alt="" coords="425,107,600,132"/>
<area shape="poly" title=" " alt="" coords="347,79,443,101,442,106,346,84"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga42c09bc0da5cac8327003314056f43b7" title="将一个新节点加入到prev与next之间" alt="" coords="648,5,819,31"/>
<area shape="poly" title=" " alt="" coords="588,15,634,15,634,21,588,21"/>
<area shape="poly" title=" " alt="" coords="363,121,411,120,412,125,363,126"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae" title="删除一个节点，并重新初始化它" alt="" coords="445,156,580,181"/>
<area shape="poly" title=" " alt="" coords="364,137,433,151,432,156,363,143"/>
<area shape="poly" title=" " alt="" coords="562,153,599,142,688,109,690,114,601,147,564,158"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab7918962f86f86d5c7049922a5173e81" title="删除prev节点与next节点之间的节点" alt="" coords="650,156,817,181"/>
<area shape="poly" title=" " alt="" coords="581,166,636,166,636,171,581,171"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="bma_8c_a23e3c965cba3a637b375fd6b6076f3ad_icgraph.png" border="0" usemap="#abma_8c_a23e3c965cba3a637b375fd6b6076f3ad_icgraph" alt=""/></div>
<map name="abma_8c_a23e3c965cba3a637b375fd6b6076f3ad_icgraph" id="abma_8c_a23e3c965cba3a637b375fd6b6076f3ad_icgraph">
<area shape="rect" title="合并内存块" alt="" coords="176,5,325,31"/>
<area shape="rect" href="group__xwmm__bma.html#ga7648b862d8fc0cb4a496d224c0a7f5a3" title="XWMM API：释放内存块" alt="" coords="5,5,128,31"/>
<area shape="poly" title=" " alt="" coords="162,21,128,21,128,15,162,15"/>
</map>
</div>

</div>
</div>
<a id="af42265723d027d450f0c9f7dabaadd55" name="af42265723d027d450f0c9f7dabaadd55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af42265723d027d450f0c9f7dabaadd55">&#9670;&#160;</a></span>xwmm_bma_divide_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void xwmm_bma_divide_block </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *&#160;</td>
          <td class="paramname"><em>bma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> *&#160;</td>
          <td class="paramname"><em>bcb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a>&#160;</td>
          <td class="paramname"><em>target_odr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma__orderlist.html">xwmm_bma_orderlist</a> *&#160;</td>
          <td class="paramname"><em>curr_ol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>将大内存块分割成小块 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bma</td><td>伙伴算法内存块分配器对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bcb</td><td>大块的内存块的控制块的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">target_odr</td><td>目标块数量的阶 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">curr_ol</td><td>当前被分割的大块所在的阶链表 </td></tr>
  </table>
  </dd>
</dl>
<p>&lt; 阶的掩码</p>
<p>&lt; 块已被合并</p>
<p>&lt; 块正在被使用</p>
<p>&lt; 报告BUG</p>
<p>&lt; 当条件x成立时报告BUG</p>
<p>&lt; 块正在被使用</p>
<p>&lt; 块正在被使用</p>

<p class="definition">在文件 <a class="el" href="bma_8c_source.html">bma.c</a> 第 <a class="el" href="bma_8c_source.html#l00276">276</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  278</span>{</div>
<div class="line"><span class="lineno">  279</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> blk_odr;</div>
<div class="line"><span class="lineno">  280</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> blk_idx;</div>
<div class="line"><span class="lineno">  281</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> blk_ofs;</div>
<div class="line"><span class="lineno">  282</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> * buddy;</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>        blk_odr = (<a class="code hl_typedef" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a>)bcb-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a> &amp; <a class="code hl_define" href="group__xwmm__bma.html#ga52281f21fdbc92910b7f0e49b2272489">XWMM_BMA_ORDER_MASK</a>;</div>
<div class="line"><span class="lineno">  285</span>        blk_idx = ((<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)bcb - (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)bma-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a960065c30d9d1ab09b38751d3b9936ab">bcbs</a>) / <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a>);</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>        <span class="keywordflow">while</span> (blk_odr &gt; target_odr) {</div>
<div class="line"><span class="lineno">  288</span>                curr_ol--;</div>
<div class="line"><span class="lineno">  289</span>                blk_odr--;</div>
<div class="line"><span class="lineno">  290</span>                blk_ofs = 1U &lt;&lt; blk_odr;</div>
<div class="line"><span class="lineno">  291</span>                buddy = &amp;bma-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a960065c30d9d1ab09b38751d3b9936ab">bcbs</a>[blk_idx + blk_ofs];</div>
<div class="line"><span class="lineno">  292</span>                <span class="comment">/* 加入阶链表之前， `buddy` 是本地数据。*/</span></div>
<div class="line"><span class="lineno">  293</span>                <a class="code hl_define" href="group__xwos__standard.html#ga1bab891fe9a97ea85286bc6e44a88c17">XWOS_BUG_ON</a>((<a class="code hl_define" href="group__xwmm__bma.html#gaaee8c675c73f326b0fb3d7a5545751e7">XWMM_BMA_COMBINED</a> | <a class="code hl_define" href="group__xwmm__bma.html#gaa9a7e10746d23bdd8423f3b40e2bd7c5">XWMM_BMA_INUSED</a>) != buddy-&gt;order);</div>
<div class="line"><span class="lineno">  294</span>                buddy-&gt;order = (<a class="code hl_typedef" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a>)blk_odr | <a class="code hl_define" href="group__xwmm__bma.html#gaa9a7e10746d23bdd8423f3b40e2bd7c5">XWMM_BMA_INUSED</a>;</div>
<div class="line"><span class="lineno">  295</span>                <a class="code hl_function" href="bma_8c.html#a96d4bf13adbddda9f906bba0d13e8bfb">xwmm_bma_orderlist_add</a>(bma, curr_ol, blk_odr, buddy);</div>
<div class="line"><span class="lineno">  296</span>                <span class="comment">/* `bcb` 是本地数据。*/</span></div>
<div class="line"><span class="lineno">  297</span>                bcb-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a> = (<a class="code hl_typedef" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a>)blk_odr | <a class="code hl_define" href="group__xwmm__bma.html#gaa9a7e10746d23bdd8423f3b40e2bd7c5">XWMM_BMA_INUSED</a>;</div>
<div class="line"><span class="lineno">  298</span>                <a class="code hl_define" href="bma_8c.html#aa4b118f6cd61a828b533df7a9ef3e2f6">xwmm_bmalogf</a>(DEBUG,</div>
<div class="line"><span class="lineno">  299</span>                             <span class="stringliteral">&quot;[ALLOC][D] bcb(idx:0x%lX,odr:0x%X),&quot;</span></div>
<div class="line"><span class="lineno">  300</span>                             <span class="stringliteral">&quot;buddy(idx:0x%lX,odr:0x%X)\n&quot;</span>,</div>
<div class="line"><span class="lineno">  301</span>                             (((<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)bcb - (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)<a class="code hl_struct" href="structxwmm__bma.html">xwmm_bma</a>-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a960065c30d9d1ab09b38751d3b9936ab">bcbs</a>) /</div>
<div class="line"><span class="lineno">  302</span>                              <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a>)),</div>
<div class="line"><span class="lineno">  303</span>                             bcb-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a>,</div>
<div class="line"><span class="lineno">  304</span>                             (((<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)buddy - (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)<a class="code hl_struct" href="structxwmm__bma.html">xwmm_bma</a>-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a960065c30d9d1ab09b38751d3b9936ab">bcbs</a>) /</div>
<div class="line"><span class="lineno">  305</span>                              <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a>)),</div>
<div class="line"><span class="lineno">  306</span>                             buddy-&gt;order);</div>
<div class="line"><span class="lineno">  307</span>        }</div>
<div class="line"><span class="lineno">  308</span>}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="bma_8c_af42265723d027d450f0c9f7dabaadd55_cgraph.png" border="0" usemap="#abma_8c_af42265723d027d450f0c9f7dabaadd55_cgraph" alt=""/></div>
<map name="abma_8c_af42265723d027d450f0c9f7dabaadd55_cgraph" id="abma_8c_af42265723d027d450f0c9f7dabaadd55_cgraph">
<area shape="rect" title="将大内存块分割成小块" alt="" coords="5,55,177,80"/>
<area shape="rect" href="bma_8c.html#a96d4bf13adbddda9f906bba0d13e8bfb" title="将一块内存加入到阶链表" alt="" coords="225,55,400,80"/>
<area shape="poly" title=" " alt="" coords="178,65,212,65,212,70,178,70"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706" title="将一个节点加入链表头部（链表头的后面）" alt="" coords="460,5,611,31"/>
<area shape="poly" title=" " alt="" coords="370,52,464,31,465,36,371,57"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569" title="初始化一个链表节点。" alt="" coords="462,55,609,80"/>
<area shape="poly" title=" " alt="" coords="400,65,448,65,448,70,400,70"/>
<area shape="rect" href="bma_8c.html#aafad73243c00281bd2a0f93cec7667ae" title="从内存块的控制块指针获得内存块的首地址" alt="" coords="448,104,623,129"/>
<area shape="poly" title=" " alt="" coords="371,77,465,98,464,104,370,83"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga42c09bc0da5cac8327003314056f43b7" title="将一个新节点加入到prev与next之间" alt="" coords="671,5,841,31"/>
<area shape="poly" title=" " alt="" coords="611,15,657,15,657,21,611,21"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="bma_8c_af42265723d027d450f0c9f7dabaadd55_icgraph.png" border="0" usemap="#abma_8c_af42265723d027d450f0c9f7dabaadd55_icgraph" alt=""/></div>
<map name="abma_8c_af42265723d027d450f0c9f7dabaadd55_icgraph" id="abma_8c_af42265723d027d450f0c9f7dabaadd55_icgraph">
<area shape="rect" title="将大内存块分割成小块" alt="" coords="180,5,352,31"/>
<area shape="rect" href="group__xwmm__bma.html#gaeb6fee8b92b2298f0c8519f1144318e8" title="XWMM API：申请一块连续的内存" alt="" coords="5,5,132,31"/>
<area shape="poly" title=" " alt="" coords="166,21,132,21,132,15,166,15"/>
</map>
</div>

</div>
</div>
<a id="aaeba29f4783fafad29d6d68dadd9869b" name="aaeba29f4783fafad29d6d68dadd9869b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaeba29f4783fafad29d6d68dadd9869b">&#9670;&#160;</a></span>xwmm_bma_find_buddy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> * xwmm_bma_find_buddy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *&#160;</td>
          <td class="paramname"><em>bma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> *&#160;</td>
          <td class="paramname"><em>bcb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>寻找内存块的伙伴 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bma</td><td>伙伴算法内存块分配器对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bcb</td><td>内存块的控制块指针 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>伙伴内存块的控制块指针 </dd></dl>
<p>&lt; 阶的掩码</p>

<p class="definition">在文件 <a class="el" href="bma_8c_source.html">bma.c</a> 第 <a class="el" href="bma_8c_source.html#l00155">155</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  157</span>{</div>
<div class="line"><span class="lineno">  158</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> seq;</div>
<div class="line"><span class="lineno">  159</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> odr;</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>        seq = ((<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)bcb - (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)bma-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a960065c30d9d1ab09b38751d3b9936ab">bcbs</a>) / <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a>);</div>
<div class="line"><span class="lineno">  162</span>        odr = (<a class="code hl_typedef" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a>)bcb-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a> &amp; <a class="code hl_define" href="group__xwmm__bma.html#ga52281f21fdbc92910b7f0e49b2272489">XWMM_BMA_ORDER_MASK</a>;</div>
<div class="line"><span class="lineno">  163</span>        seq ^= (1U &lt;&lt; odr);</div>
<div class="line"><span class="lineno">  164</span>        <span class="keywordflow">return</span> &amp;bma-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a960065c30d9d1ab09b38751d3b9936ab">bcbs</a>[seq];</div>
<div class="line"><span class="lineno">  165</span>}</div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="bma_8c_aaeba29f4783fafad29d6d68dadd9869b_icgraph.png" border="0" usemap="#abma_8c_aaeba29f4783fafad29d6d68dadd9869b_icgraph" alt=""/></div>
<map name="abma_8c_aaeba29f4783fafad29d6d68dadd9869b_icgraph" id="abma_8c_aaeba29f4783fafad29d6d68dadd9869b_icgraph">
<area shape="rect" title="寻找内存块的伙伴" alt="" coords="373,5,536,31"/>
<area shape="rect" href="bma_8c.html#a23e3c965cba3a637b375fd6b6076f3ad" title="合并内存块" alt="" coords="176,5,325,31"/>
<area shape="poly" title=" " alt="" coords="360,21,325,21,325,15,360,15"/>
<area shape="rect" href="group__xwmm__bma.html#ga7648b862d8fc0cb4a496d224c0a7f5a3" title="XWMM API：释放内存块" alt="" coords="5,5,128,31"/>
<area shape="poly" title=" " alt="" coords="162,21,128,21,128,15,162,15"/>
</map>
</div>

</div>
</div>
<a id="a15e3480a65e5546b1741de53e14642d7" name="a15e3480a65e5546b1741de53e14642d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15e3480a65e5546b1741de53e14642d7">&#9670;&#160;</a></span>xwmm_bma_mem_to_bcb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> * xwmm_bma_mem_to_bcb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *&#160;</td>
          <td class="paramname"><em>bma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>mem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>从内存块首地址获得其控制块的指针 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bma</td><td>伙伴算法内存块分配器对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mem</td><td>内存块的首地址 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>内存块的控制块指针或类型为指针的错误码 </dd></dl>

<p class="definition">在文件 <a class="el" href="bma_8c_source.html">bma.c</a> 第 <a class="el" href="bma_8c_source.html#l00115">115</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  116</span>{</div>
<div class="line"><span class="lineno">  117</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> * bcb;</div>
<div class="line"><span class="lineno">  118</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a> ofs;</div>
<div class="line"><span class="lineno">  119</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a> idx;</div>
<div class="line"><span class="lineno">  120</span> </div>
<div class="line"><span class="lineno">  121</span>        ofs = (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)mem - bma-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a125adc2f817d937fb8950d817422042c">zone</a>.<a class="code hl_variable" href="structxwmm__zone.html#a6234f16a4f0b8787dfa3fcab0767d9e5">origin</a>;</div>
<div class="line"><span class="lineno">  122</span>        idx = ofs / (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)bma-&gt;<a class="code hl_variable" href="structxwmm__bma.html#af75616bed0d5aca4c06b78a05ebfd318">blksize</a>;</div>
<div class="line"><span class="lineno">  123</span>        <span class="keywordflow">if</span> (ofs == (idx * bma-&gt;<a class="code hl_variable" href="structxwmm__bma.html#af75616bed0d5aca4c06b78a05ebfd318">blksize</a>)) {</div>
<div class="line"><span class="lineno">  124</span>                bcb = &amp;bma-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a960065c30d9d1ab09b38751d3b9936ab">bcbs</a>[idx];</div>
<div class="line"><span class="lineno">  125</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  126</span>                bcb = <a class="code hl_function" href="group__xwos__lib__error.html#ga043267bacbf102d87c376e6605228ab6">err_ptr</a>(-<a class="code hl_define" href="group__xwos__lib__errno.html#ga2d1678d5a7cc8ce499643f3b8957def4">EINVAL</a>);</div>
<div class="line"><span class="lineno">  127</span>        }</div>
<div class="line"><span class="lineno">  128</span>        <span class="keywordflow">return</span> bcb;</div>
<div class="line"><span class="lineno">  129</span>}</div>
<div class="ttc" id="agroup__xwos__lib__errno_html_ga2d1678d5a7cc8ce499643f3b8957def4"><div class="ttname"><a href="group__xwos__lib__errno.html#ga2d1678d5a7cc8ce499643f3b8957def4">EINVAL</a></div><div class="ttdeci">#define EINVAL</div><div class="ttdoc">Invalid argument</div><div class="ttdef"><b>Definition</b> <a href="errno_8h_source.html#l00052">errno.h:52</a></div></div>
<div class="ttc" id="agroup__xwos__lib__error_html_ga043267bacbf102d87c376e6605228ab6"><div class="ttname"><a href="group__xwos__lib__error.html#ga043267bacbf102d87c376e6605228ab6">err_ptr</a></div><div class="ttdeci">static __xwcc_inline void *__xwcc_must_check err_ptr(xwer_t err)</div><div class="ttdoc">将错误码转换为指针</div><div class="ttdef"><b>Definition</b> <a href="error_8h_source.html#l00042">error.h:42</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="bma_8c_a15e3480a65e5546b1741de53e14642d7_cgraph.png" border="0" usemap="#abma_8c_a15e3480a65e5546b1741de53e14642d7_cgraph" alt=""/></div>
<map name="abma_8c_a15e3480a65e5546b1741de53e14642d7_cgraph" id="abma_8c_a15e3480a65e5546b1741de53e14642d7_cgraph">
<area shape="rect" title="从内存块首地址获得其控制块的指针" alt="" coords="5,5,180,31"/>
<area shape="rect" href="group__xwos__lib__error.html#ga043267bacbf102d87c376e6605228ab6" title="将错误码转换为指针" alt="" coords="228,5,287,31"/>
<area shape="poly" title=" " alt="" coords="180,15,214,15,214,21,180,21"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="bma_8c_a15e3480a65e5546b1741de53e14642d7_icgraph.png" border="0" usemap="#abma_8c_a15e3480a65e5546b1741de53e14642d7_icgraph" alt=""/></div>
<map name="abma_8c_a15e3480a65e5546b1741de53e14642d7_icgraph" id="abma_8c_a15e3480a65e5546b1741de53e14642d7_icgraph">
<area shape="rect" title="从内存块首地址获得其控制块的指针" alt="" coords="375,35,549,60"/>
<area shape="rect" href="group__xwmm__bma.html#ga7648b862d8fc0cb4a496d224c0a7f5a3" title="XWMM API：释放内存块" alt="" coords="192,5,315,31"/>
<area shape="poly" title=" " alt="" coords="361,36,314,29,315,24,362,31"/>
<area shape="rect" href="bma_8c.html#a9b3258dbb6923b7e1d91da1778e71135" title="从阶链表中选择一块内存，并返回其块控制块" alt="" coords="180,55,327,95"/>
<area shape="poly" title=" " alt="" coords="361,64,327,68,326,63,361,58"/>
<area shape="rect" href="group__xwmm__bma.html#gaeb6fee8b92b2298f0c8519f1144318e8" title="XWMM API：申请一块连续的内存" alt="" coords="5,63,132,88"/>
<area shape="poly" title=" " alt="" coords="166,78,132,78,132,73,166,73"/>
</map>
</div>

</div>
</div>
<a id="a96d4bf13adbddda9f906bba0d13e8bfb" name="a96d4bf13adbddda9f906bba0d13e8bfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96d4bf13adbddda9f906bba0d13e8bfb">&#9670;&#160;</a></span>xwmm_bma_orderlist_add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void xwmm_bma_orderlist_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *&#160;</td>
          <td class="paramname"><em>bma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma__orderlist.html">xwmm_bma_orderlist</a> *&#160;</td>
          <td class="paramname"><em>ol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a>&#160;</td>
          <td class="paramname"><em>odr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> *&#160;</td>
          <td class="paramname"><em>bcb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>将一块内存加入到阶链表 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bma</td><td>伙伴算法内存块分配器对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ol</td><td>阶链表的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">odr</td><td>阶链表的阶 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bcb</td><td>内存块的控制块指针 </td></tr>
  </table>
  </dd>
</dl>
<p>&lt; 块正在被使用</p>
<p>&lt; 阶的掩码</p>

<p class="definition">在文件 <a class="el" href="bma_8c_source.html">bma.c</a> 第 <a class="el" href="bma_8c_source.html#l00175">175</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  179</span>{</div>
<div class="line"><span class="lineno">  180</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwlib__bclst__node.html">xwlib_bclst_node</a> * n;</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>        <span class="comment">/* 即将加入的块不在阶链表中，是本地数据。*/</span></div>
<div class="line"><span class="lineno">  183</span>        <span class="keywordflow">if</span> ((<a class="code hl_define" href="group__xwmm__bma.html#gaa9a7e10746d23bdd8423f3b40e2bd7c5">XWMM_BMA_INUSED</a> | odr) == bcb-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a>) {</div>
<div class="line"><span class="lineno">  184</span>                n = <a class="code hl_function" href="bma_8c.html#aafad73243c00281bd2a0f93cec7667ae">xwmm_bma_bcb_to_mem</a>(bma, bcb);</div>
<div class="line"><span class="lineno">  185</span>                <a class="code hl_define" href="bma_8c.html#aa4b118f6cd61a828b533df7a9ef3e2f6">xwmm_bmalogf</a>(DEBUG,</div>
<div class="line"><span class="lineno">  186</span>                             <span class="stringliteral">&quot;[OL:0x%lX][+] bcb(idx:0x%lX,odr:0x%X),mem(0x%lX)\n&quot;</span>,</div>
<div class="line"><span class="lineno">  187</span>                             (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)ol,</div>
<div class="line"><span class="lineno">  188</span>                             (((<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)bcb - (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)<a class="code hl_struct" href="structxwmm__bma.html">xwmm_bma</a>-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a960065c30d9d1ab09b38751d3b9936ab">bcbs</a>) /</div>
<div class="line"><span class="lineno">  189</span>                              <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a>)),</div>
<div class="line"><span class="lineno">  190</span>                             bcb-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a>, (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)n);</div>
<div class="line"><span class="lineno">  191</span>                <a class="code hl_function" href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569">xwlib_bclst_init_node</a>(n);</div>
<div class="line"><span class="lineno">  192</span>                <a class="code hl_function" href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706">xwlib_bclst_add_head</a>(&amp;ol-&gt;head, n);</div>
<div class="line"><span class="lineno">  193</span>                <span class="comment">/* 当块被加入到阶链表中，就变成共享数据。*/</span></div>
<div class="line"><span class="lineno">  194</span>                bcb-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a> &amp;= <a class="code hl_define" href="group__xwmm__bma.html#ga52281f21fdbc92910b7f0e49b2272489">XWMM_BMA_ORDER_MASK</a>;</div>
<div class="line"><span class="lineno">  195</span>        }</div>
<div class="line"><span class="lineno">  196</span>}</div>
<div class="ttc" id="abma_8c_html_aafad73243c00281bd2a0f93cec7667ae"><div class="ttname"><a href="bma_8c.html#aafad73243c00281bd2a0f93cec7667ae">xwmm_bma_bcb_to_mem</a></div><div class="ttdeci">static void * xwmm_bma_bcb_to_mem(struct xwmm_bma *bma, struct xwmm_bma_bcb *bcb)</div><div class="ttdoc">从内存块的控制块指针获得内存块的首地址</div><div class="ttdef"><b>Definition</b> <a href="bma_8c_source.html#l00138">bma.c:138</a></div></div>
<div class="ttc" id="agroup__xwos__lib__bclst_html_ga3286c94ae92265dea90fd52bfdb85569"><div class="ttname"><a href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569">xwlib_bclst_init_node</a></div><div class="ttdeci">static void xwlib_bclst_init_node(struct xwlib_bclst_node *n)</div><div class="ttdoc">初始化一个链表节点。</div><div class="ttdef"><b>Definition</b> <a href="bclst_8h_source.html#l00240">bclst.h:240</a></div></div>
<div class="ttc" id="agroup__xwos__lib__bclst_html_ga942be8d64e19cb8efb4dd1cf10e6e706"><div class="ttname"><a href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706">xwlib_bclst_add_head</a></div><div class="ttdeci">static void xwlib_bclst_add_head(struct xwlib_bclst_node *head, struct xwlib_bclst_node *newn)</div><div class="ttdoc">将一个节点加入链表头部（链表头的后面）</div><div class="ttdef"><b>Definition</b> <a href="bclst_8h_source.html#l00345">bclst.h:345</a></div></div>
<div class="ttc" id="astructxwlib__bclst__node_html"><div class="ttname"><a href="structxwlib__bclst__node.html">xwlib_bclst_node</a></div><div class="ttdoc">双循环链表的节点</div><div class="ttdef"><b>Definition</b> <a href="bclst_8h_source.html#l00027">bclst.h:27</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="bma_8c_a96d4bf13adbddda9f906bba0d13e8bfb_cgraph.png" border="0" usemap="#abma_8c_a96d4bf13adbddda9f906bba0d13e8bfb_cgraph" alt=""/></div>
<map name="abma_8c_a96d4bf13adbddda9f906bba0d13e8bfb_cgraph" id="abma_8c_a96d4bf13adbddda9f906bba0d13e8bfb_cgraph">
<area shape="rect" title="将一块内存加入到阶链表" alt="" coords="5,55,180,80"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706" title="将一个节点加入链表头部（链表头的后面）" alt="" coords="240,5,391,31"/>
<area shape="poly" title=" " alt="" coords="150,52,244,31,245,36,151,57"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569" title="初始化一个链表节点。" alt="" coords="242,55,389,80"/>
<area shape="poly" title=" " alt="" coords="180,65,228,65,228,70,180,70"/>
<area shape="rect" href="bma_8c.html#aafad73243c00281bd2a0f93cec7667ae" title="从内存块的控制块指针获得内存块的首地址" alt="" coords="228,104,403,129"/>
<area shape="poly" title=" " alt="" coords="151,77,245,98,244,104,150,83"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga42c09bc0da5cac8327003314056f43b7" title="将一个新节点加入到prev与next之间" alt="" coords="451,5,621,31"/>
<area shape="poly" title=" " alt="" coords="391,15,437,15,437,21,391,21"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="bma_8c_a96d4bf13adbddda9f906bba0d13e8bfb_icgraph.png" border="0" usemap="#abma_8c_a96d4bf13adbddda9f906bba0d13e8bfb_icgraph" alt=""/></div>
<map name="abma_8c_a96d4bf13adbddda9f906bba0d13e8bfb_icgraph" id="abma_8c_a96d4bf13adbddda9f906bba0d13e8bfb_icgraph">
<area shape="rect" title="将一块内存加入到阶链表" alt="" coords="400,55,575,80"/>
<area shape="rect" href="bma_8c.html#a23e3c965cba3a637b375fd6b6076f3ad" title="合并内存块" alt="" coords="191,5,341,31"/>
<area shape="poly" title=" " alt="" coords="416,54,323,33,324,28,417,49"/>
<area shape="rect" href="bma_8c.html#af42265723d027d450f0c9f7dabaadd55" title="将大内存块分割成小块" alt="" coords="180,55,352,80"/>
<area shape="poly" title=" " alt="" coords="386,70,352,70,352,65,386,65"/>
<area shape="rect" href="group__xwmm__bma.html#ga591aeadbb32ce6e77563d873ecb53b33" title="XWMM API：初始化伙伴算法内存块分配器" alt="" coords="207,104,325,129"/>
<area shape="poly" title=" " alt="" coords="417,86,324,107,323,101,416,80"/>
<area shape="rect" href="group__xwmm__bma.html#ga7648b862d8fc0cb4a496d224c0a7f5a3" title="XWMM API：释放内存块" alt="" coords="7,5,130,31"/>
<area shape="poly" title=" " alt="" coords="177,21,130,21,130,15,177,15"/>
<area shape="rect" href="group__xwmm__bma.html#gaeb6fee8b92b2298f0c8519f1144318e8" title="XWMM API：申请一块连续的内存" alt="" coords="5,55,132,80"/>
<area shape="poly" title=" " alt="" coords="166,70,132,70,132,65,166,65"/>
</map>
</div>

</div>
</div>
<a id="a9b3258dbb6923b7e1d91da1778e71135" name="a9b3258dbb6923b7e1d91da1778e71135"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b3258dbb6923b7e1d91da1778e71135">&#9670;&#160;</a></span>xwmm_bma_orderlist_choose()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> * xwmm_bma_orderlist_choose </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *&#160;</td>
          <td class="paramname"><em>bma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma__orderlist.html">xwmm_bma_orderlist</a> *&#160;</td>
          <td class="paramname"><em>ol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>从阶链表中选择一块内存，并返回其块控制块 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bma</td><td>伙伴算法内存块分配器对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ol</td><td>阶链表的指针 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>块控制块指针或类型为指针的错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-ENOENT</td><td>阶链表为空 </td></tr>
  </table>
  </dd>
</dl>
<p>&lt; 块正在被使用</p>

<p class="definition">在文件 <a class="el" href="bma_8c_source.html">bma.c</a> 第 <a class="el" href="bma_8c_source.html#l00244">244</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  246</span>{</div>
<div class="line"><span class="lineno">  247</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwlib__bclst__node.html">xwlib_bclst_node</a> * n;</div>
<div class="line"><span class="lineno">  248</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> * bcb;</div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="group__xwos__lib__bclst.html#ga54d0d6c4a04b8f3c80891f7d0f5a1e62">xwlib_bclst_tst_empty</a>(&amp;ol-&gt;<a class="code hl_variable" href="structxwmm__bma__orderlist.html#abc2cff33b635c77569673cc062082e58">head</a>)) {</div>
<div class="line"><span class="lineno">  251</span>                bcb = <a class="code hl_function" href="group__xwos__lib__error.html#ga043267bacbf102d87c376e6605228ab6">err_ptr</a>(-<a class="code hl_define" href="group__xwos__lib__errno.html#ga03e689f378f643d16ea7537918528a48">ENOENT</a>);</div>
<div class="line"><span class="lineno">  252</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  253</span>                n = ol-&gt;<a class="code hl_variable" href="structxwmm__bma__orderlist.html#abc2cff33b635c77569673cc062082e58">head</a>.<a class="code hl_variable" href="structxwlib__bclst__node.html#a14b967cf1ba0db16c7da62cdbed402cd">next</a>;</div>
<div class="line"><span class="lineno">  254</span>                <a class="code hl_function" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae">xwlib_bclst_del_init</a>(n);</div>
<div class="line"><span class="lineno">  255</span>                bcb = <a class="code hl_function" href="bma_8c.html#a15e3480a65e5546b1741de53e14642d7">xwmm_bma_mem_to_bcb</a>(bma, n);</div>
<div class="line"><span class="lineno">  256</span>                <a class="code hl_define" href="bma_8c.html#aa4b118f6cd61a828b533df7a9ef3e2f6">xwmm_bmalogf</a>(DEBUG,</div>
<div class="line"><span class="lineno">  257</span>                             <span class="stringliteral">&quot;[OL:0x%lX][C] bcb(idx:0x%lX,odr:0x%X)\n&quot;</span>,</div>
<div class="line"><span class="lineno">  258</span>                             (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)ol,</div>
<div class="line"><span class="lineno">  259</span>                             (((<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)bcb - (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)<a class="code hl_struct" href="structxwmm__bma.html">xwmm_bma</a>-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a960065c30d9d1ab09b38751d3b9936ab">bcbs</a>) /</div>
<div class="line"><span class="lineno">  260</span>                              <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a>)),</div>
<div class="line"><span class="lineno">  261</span>                             bcb-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a>);</div>
<div class="line"><span class="lineno">  262</span>                <span class="comment">/* 即将被选择的块在阶链表中，是共享数据。*/</span></div>
<div class="line"><span class="lineno">  263</span>                bcb-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a> |= <a class="code hl_define" href="group__xwmm__bma.html#gaa9a7e10746d23bdd8423f3b40e2bd7c5">XWMM_BMA_INUSED</a>;</div>
<div class="line"><span class="lineno">  264</span>        }</div>
<div class="line"><span class="lineno">  265</span>        <span class="keywordflow">return</span> bcb;</div>
<div class="line"><span class="lineno">  266</span>}</div>
<div class="ttc" id="abma_8c_html_a15e3480a65e5546b1741de53e14642d7"><div class="ttname"><a href="bma_8c.html#a15e3480a65e5546b1741de53e14642d7">xwmm_bma_mem_to_bcb</a></div><div class="ttdeci">static struct xwmm_bma_bcb * xwmm_bma_mem_to_bcb(struct xwmm_bma *bma, void *mem)</div><div class="ttdoc">从内存块首地址获得其控制块的指针</div><div class="ttdef"><b>Definition</b> <a href="bma_8c_source.html#l00115">bma.c:115</a></div></div>
<div class="ttc" id="agroup__xwos__lib__bclst_html_ga54d0d6c4a04b8f3c80891f7d0f5a1e62"><div class="ttname"><a href="group__xwos__lib__bclst.html#ga54d0d6c4a04b8f3c80891f7d0f5a1e62">xwlib_bclst_tst_empty</a></div><div class="ttdeci">static bool xwlib_bclst_tst_empty(const struct xwlib_bclst_node *h)</div><div class="ttdoc">测试链表是否为空。</div><div class="ttdef"><b>Definition</b> <a href="bclst_8h_source.html#l00253">bclst.h:253</a></div></div>
<div class="ttc" id="agroup__xwos__lib__bclst_html_gab12f3ce1a4e53de3112b10c9ffb06cae"><div class="ttname"><a href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae">xwlib_bclst_del_init</a></div><div class="ttdeci">static void xwlib_bclst_del_init(struct xwlib_bclst_node *node)</div><div class="ttdoc">删除一个节点，并重新初始化它</div><div class="ttdef"><b>Definition</b> <a href="bclst_8h_source.html#l00391">bclst.h:391</a></div></div>
<div class="ttc" id="agroup__xwos__lib__errno_html_ga03e689f378f643d16ea7537918528a48"><div class="ttname"><a href="group__xwos__lib__errno.html#ga03e689f378f643d16ea7537918528a48">ENOENT</a></div><div class="ttdeci">#define ENOENT</div><div class="ttdoc">No such file or directory</div><div class="ttdef"><b>Definition</b> <a href="errno_8h_source.html#l00032">errno.h:32</a></div></div>
<div class="ttc" id="astructxwlib__bclst__node_html_a14b967cf1ba0db16c7da62cdbed402cd"><div class="ttname"><a href="structxwlib__bclst__node.html#a14b967cf1ba0db16c7da62cdbed402cd">xwlib_bclst_node::next</a></div><div class="ttdeci">struct xwlib_bclst_node * next</div><div class="ttdef"><b>Definition</b> <a href="bclst_8h_source.html#l00028">bclst.h:28</a></div></div>
<div class="ttc" id="astructxwmm__bma__orderlist_html_abc2cff33b635c77569673cc062082e58"><div class="ttname"><a href="structxwmm__bma__orderlist.html#abc2cff33b635c77569673cc062082e58">xwmm_bma_orderlist::head</a></div><div class="ttdeci">struct xwlib_bclst_node head</div><div class="ttdef"><b>Definition</b> <a href="bma_8h_source.html#l00075">bma.h:75</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="bma_8c_a9b3258dbb6923b7e1d91da1778e71135_cgraph.png" border="0" usemap="#abma_8c_a9b3258dbb6923b7e1d91da1778e71135_cgraph" alt=""/></div>
<map name="abma_8c_a9b3258dbb6923b7e1d91da1778e71135_cgraph" id="abma_8c_a9b3258dbb6923b7e1d91da1778e71135_cgraph">
<area shape="rect" title="从阶链表中选择一块内存，并返回其块控制块" alt="" coords="5,98,152,138"/>
<area shape="rect" href="group__xwos__lib__error.html#ga043267bacbf102d87c376e6605228ab6" title="将错误码转换为指针" alt="" coords="477,129,535,155"/>
<area shape="poly" title=" " alt="" coords="152,112,258,111,375,117,464,130,463,136,374,122,257,117,152,118"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae" title="删除一个节点，并重新初始化它" alt="" coords="220,29,355,55"/>
<area shape="poly" title=" " alt="" coords="134,95,238,57,239,62,136,100"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga54d0d6c4a04b8f3c80891f7d0f5a1e62" title="测试链表是否为空。" alt="" coords="211,131,363,156"/>
<area shape="poly" title=" " alt="" coords="152,124,198,130,198,135,152,130"/>
<area shape="rect" href="bma_8c.html#a15e3480a65e5546b1741de53e14642d7" title="从内存块首地址获得其控制块的指针" alt="" coords="200,180,375,205"/>
<area shape="poly" title=" " alt="" coords="125,136,201,166,224,174,222,179,199,171,123,141"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab7918962f86f86d5c7049922a5173e81" title="删除prev节点与next节点之间的节点" alt="" coords="423,55,589,80"/>
<area shape="poly" title=" " alt="" coords="356,47,409,53,408,59,355,52"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569" title="初始化一个链表节点。" alt="" coords="433,5,579,31"/>
<area shape="poly" title=" " alt="" coords="355,32,418,25,419,30,356,37"/>
<area shape="poly" title=" " alt="" coords="343,177,463,149,464,154,344,182"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="bma_8c_a9b3258dbb6923b7e1d91da1778e71135_icgraph.png" border="0" usemap="#abma_8c_a9b3258dbb6923b7e1d91da1778e71135_icgraph" alt=""/></div>
<map name="abma_8c_a9b3258dbb6923b7e1d91da1778e71135_icgraph" id="abma_8c_a9b3258dbb6923b7e1d91da1778e71135_icgraph">
<area shape="rect" title="从阶链表中选择一块内存，并返回其块控制块" alt="" coords="180,5,327,45"/>
<area shape="rect" href="group__xwmm__bma.html#gaeb6fee8b92b2298f0c8519f1144318e8" title="XWMM API：申请一块连续的内存" alt="" coords="5,13,132,38"/>
<area shape="poly" title=" " alt="" coords="166,28,132,28,132,23,166,23"/>
</map>
</div>

</div>
</div>
<a id="ac3ac44994de282a1379a02e8080c83b0" name="ac3ac44994de282a1379a02e8080c83b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3ac44994de282a1379a02e8080c83b0">&#9670;&#160;</a></span>xwmm_bma_orderlist_remove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmm_bma_orderlist_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma.html">xwmm_bma</a> *&#160;</td>
          <td class="paramname"><em>bma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma__orderlist.html">xwmm_bma_orderlist</a> *&#160;</td>
          <td class="paramname"><em>ol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a>&#160;</td>
          <td class="paramname"><em>odr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a> *&#160;</td>
          <td class="paramname"><em>bcb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>从阶链表中删除一块内存 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bma</td><td>伙伴算法内存块分配器对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ol</td><td>阶链表的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">odr</td><td>阶链表的阶 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bcb</td><td>内存块的控制块指针 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>删除成功 </td></tr>
    <tr><td class="paramname">-ESRCH</td><td>阶链表中不存在此内存块 </td></tr>
  </table>
  </dd>
</dl>
<p>&lt; 去除未使用变量的警告</p>
<p>&lt; 块正在被使用</p>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="bma_8c_source.html">bma.c</a> 第 <a class="el" href="bma_8c_source.html#l00209">209</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  213</span>{</div>
<div class="line"><span class="lineno">  214</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwlib__bclst__node.html">xwlib_bclst_node</a> * n;</div>
<div class="line"><span class="lineno">  215</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>        <a class="code hl_define" href="group__xwos__standard.html#ga56f3f47f5e509a2a67d1b43cd52338c2">XWOS_UNUSED</a>(ol);</div>
<div class="line"><span class="lineno">  218</span>        n = <a class="code hl_function" href="bma_8c.html#aafad73243c00281bd2a0f93cec7667ae">xwmm_bma_bcb_to_mem</a>(bma, bcb);</div>
<div class="line"><span class="lineno">  219</span>        <a class="code hl_define" href="bma_8c.html#aa4b118f6cd61a828b533df7a9ef3e2f6">xwmm_bmalogf</a>(DEBUG,</div>
<div class="line"><span class="lineno">  220</span>                     <span class="stringliteral">&quot;[OL:0x%lX][-] bcb(idx:0x%lX,odr:0x%X),mem(0x%lX)\n&quot;</span>,</div>
<div class="line"><span class="lineno">  221</span>                     (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)ol,</div>
<div class="line"><span class="lineno">  222</span>                     (((<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)bcb - (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)<a class="code hl_struct" href="structxwmm__bma.html">xwmm_bma</a>-&gt;<a class="code hl_variable" href="structxwmm__bma.html#a960065c30d9d1ab09b38751d3b9936ab">bcbs</a>) /</div>
<div class="line"><span class="lineno">  223</span>                      <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__bma__bcb.html">xwmm_bma_bcb</a>)),</div>
<div class="line"><span class="lineno">  224</span>                     bcb-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a>, (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)n);</div>
<div class="line"><span class="lineno">  225</span>        <span class="comment">/* 即将被删除的块在阶链表中，是共享数据。*/</span></div>
<div class="line"><span class="lineno">  226</span>        <span class="keywordflow">if</span> (odr != bcb-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a>) {</div>
<div class="line"><span class="lineno">  227</span>                rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#ga462e47a8af6288232a5df548221ada4c">ESRCH</a>;</div>
<div class="line"><span class="lineno">  228</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  229</span>                <a class="code hl_function" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae">xwlib_bclst_del_init</a>(n);</div>
<div class="line"><span class="lineno">  230</span>                bcb-&gt;<a class="code hl_variable" href="structxwmm__bma__bcb.html#aa2bc43de36e79a5c9972232204a7e4d0">order</a> |= <a class="code hl_define" href="group__xwmm__bma.html#gaa9a7e10746d23bdd8423f3b40e2bd7c5">XWMM_BMA_INUSED</a>;</div>
<div class="line"><span class="lineno">  231</span>                rc = <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  232</span>        }</div>
<div class="line"><span class="lineno">  233</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  234</span>}</div>
<div class="ttc" id="agroup__xwos__lib__errno_html_ga462e47a8af6288232a5df548221ada4c"><div class="ttname"><a href="group__xwos__lib__errno.html#ga462e47a8af6288232a5df548221ada4c">ESRCH</a></div><div class="ttdeci">#define ESRCH</div><div class="ttdoc">No such process</div><div class="ttdef"><b>Definition</b> <a href="errno_8h_source.html#l00033">errno.h:33</a></div></div>
<div class="ttc" id="agroup__xwos__lib__errno_html_ga6a72d49d869215a02342eb465166537b"><div class="ttname"><a href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a></div><div class="ttdeci">#define XWOK</div><div class="ttdoc">No error</div><div class="ttdef"><b>Definition</b> <a href="errno_8h_source.html#l00182">errno.h:182</a></div></div>
<div class="ttc" id="agroup__xwos__standard_html_ga56f3f47f5e509a2a67d1b43cd52338c2"><div class="ttname"><a href="group__xwos__standard.html#ga56f3f47f5e509a2a67d1b43cd52338c2">XWOS_UNUSED</a></div><div class="ttdeci">#define XWOS_UNUSED(x)</div><div class="ttdef"><b>Definition</b> <a href="xwos_2standard_8h_source.html#l00066">standard.h:66</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="bma_8c_ac3ac44994de282a1379a02e8080c83b0_cgraph.png" border="0" usemap="#abma_8c_ac3ac44994de282a1379a02e8080c83b0_cgraph" alt=""/></div>
<map name="abma_8c_ac3ac44994de282a1379a02e8080c83b0_cgraph" id="abma_8c_ac3ac44994de282a1379a02e8080c83b0_cgraph">
<area shape="rect" title="从阶链表中删除一块内存" alt="" coords="5,47,152,87"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae" title="删除一个节点，并重新初始化它" alt="" coords="220,29,355,55"/>
<area shape="poly" title=" " alt="" coords="152,56,206,49,207,54,152,61"/>
<area shape="rect" href="bma_8c.html#aafad73243c00281bd2a0f93cec7667ae" title="从内存块的控制块指针获得内存块的首地址" alt="" coords="200,79,375,104"/>
<area shape="poly" title=" " alt="" coords="152,73,187,77,186,82,152,78"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab7918962f86f86d5c7049922a5173e81" title="删除prev节点与next节点之间的节点" alt="" coords="423,5,589,31"/>
<area shape="poly" title=" " alt="" coords="355,32,408,26,409,31,356,37"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569" title="初始化一个链表节点。" alt="" coords="433,55,579,80"/>
<area shape="poly" title=" " alt="" coords="356,47,419,55,418,60,355,52"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="bma_8c_ac3ac44994de282a1379a02e8080c83b0_icgraph.png" border="0" usemap="#abma_8c_ac3ac44994de282a1379a02e8080c83b0_icgraph" alt=""/></div>
<map name="abma_8c_ac3ac44994de282a1379a02e8080c83b0_icgraph" id="abma_8c_ac3ac44994de282a1379a02e8080c83b0_icgraph">
<area shape="rect" title="从阶链表中删除一块内存" alt="" coords="373,5,520,45"/>
<area shape="rect" href="bma_8c.html#a23e3c965cba3a637b375fd6b6076f3ad" title="合并内存块" alt="" coords="176,13,325,38"/>
<area shape="poly" title=" " alt="" coords="359,28,326,28,326,23,359,23"/>
<area shape="rect" href="group__xwmm__bma.html#ga7648b862d8fc0cb4a496d224c0a7f5a3" title="XWMM API：释放内存块" alt="" coords="5,13,128,38"/>
<area shape="poly" title=" " alt="" coords="162,28,128,28,128,23,162,23"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_43a52829888b753087a6774748486ed5.html">xwos</a></li><li class="navelem"><a class="el" href="dir_9dc98d2d57b5a37b2d02400b59474658.html">mm</a></li><li class="navelem"><a class="el" href="bma_8c.html">bma.c</a></li>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
