<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Doxygen Awesome" />
<meta property="og:image" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta property="og:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<meta property="og:url" content="https://jothepro.github.io/doxygen-awesome-css/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta name="twitter:title" content="Doxygen Awesome" />
<meta name="twitter:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<!-- END twitter metadata -->
<title>XWOS API: xwcd/peripheral/spi/flash/w25qxx/driver.c 文件参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<a href="/" class="github-corner" title="返回首页">
  <svg viewBox="0 0 250 250" style="position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
    <path
      d="M 0 0 L 250 250 L 250 0 L 0 0 z M 181.19336 6.25 A 18.281986 19.638775 0 0 1 192.79297 10.798828 L 241.54492 54.201172 A 6.0939954 6.5462585 0 0 1 237.64453 65.787109 L 233.13477 65.787109 A 3.0469979 3.2731292 0 0 0 230.08789 69.060547 L 230.08789 111.61133 A 18.281986 19.638775 0 0 1 211.80664 131.25 L 205.71289 131.25 A 12.187991 13.092517 0 0 1 193.52344 118.1582 L 193.52344 98.519531 A 12.187991 13.092517 0 0 0 181.33594 85.425781 A 12.187991 13.092517 0 0 0 169.14844 98.519531 L 169.14844 118.1582 A 12.187991 13.092517 0 0 1 156.95898 131.25 L 150.86523 131.25 A 18.281986 19.638775 0 0 1 132.58398 111.61133 L 132.58398 68.994141 A 3.0469979 3.2731292 0 0 0 129.29297 65.722656 L 124.7832 65.722656 A 6.0939954 6.5462585 0 0 1 120.88281 54.201172 L 169.39258 10.798828 A 18.281986 19.638775 0 0 1 181.19336 6.25 z "/>
  </svg>
</a>
<style>.github-corner:hover</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">XWOS API
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">XWOS API参考手册</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('spi_2flash_2w25qxx_2driver_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">函数</a>  </div>
  <div class="headertitle"><div class="title">driver.c 文件参考</div></div>
</div><!--header-->
<div class="contents">

<p>SPI Flash W25Qxx Driver  
<a href="#details">更多...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="xwos_2standard_8h_source.html">xwos/standard.h</a>&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;<a class="el" href="thd_8h_source.html">xwos/osal/thd.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="spi_2peripheral_8h_source.html">xwcd/ds/spi/peripheral.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html">xwcd/peripheral/spi/flash/w25qxx/device.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="spi_2flash_2w25qxx_2driver_8h_source.html">xwcd/peripheral/spi/flash/w25qxx/driver.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
driver.c 的引用(Include)关系图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c__incl.png" border="0" usemap="#axwcd_2peripheral_2spi_2flash_2w25qxx_2driver_8c" alt=""/></div>
<map name="axwcd_2peripheral_2spi_2flash_2w25qxx_2driver_8c" id="axwcd_2peripheral_2spi_2flash_2w25qxx_2driver_8c">
<area shape="rect" title="SPI Flash W25Qxx Driver" alt="" coords="1011,5,1161,45"/>
<area shape="rect" href="xwos_2standard_8h.html" title="XWOS的标准头文件" alt="" coords="881,797,1000,823"/>
<area shape="poly" title=" " alt="" coords="1162,30,1200,38,1240,50,1279,67,1314,91,1339,115,1355,139,1362,166,1365,200,1365,658,1358,692,1341,716,1314,734,1280,752,1214,780,1143,798,1074,808,1014,812,1013,807,1073,803,1142,793,1212,775,1278,747,1311,729,1337,712,1353,690,1359,657,1359,200,1357,167,1350,141,1335,119,1311,95,1277,72,1238,55,1199,43,1161,36"/>
<area shape="rect" title=" " alt="" coords="957,101,1023,126"/>
<area shape="poly" title=" " alt="" coords="1066,48,1015,93,1012,89,1063,44"/>
<area shape="rect" href="thd_8h.html" title="操作系统抽象层：线程" alt="" coords="225,563,339,588"/>
<area shape="poly" title=" " alt="" coords="1011,31,824,40,711,51,599,67,496,89,410,118,378,135,353,155,338,176,333,200,333,430,329,464,320,497,297,552,293,550,315,496,324,463,327,430,327,200,333,174,349,151,375,131,408,113,494,84,598,62,711,46,823,35,1010,25"/>
<area shape="rect" href="spi_2peripheral_8h.html" title="玄武设备栈：SPI：外设" alt="" coords="977,269,1139,295"/>
<area shape="poly" title=" " alt="" coords="1087,46,1063,255,1058,255,1081,45"/>
<area shape="rect" href="peripheral_2spi_2flash_2w25qxx_2device_8h.html" title="SPI Flash W25Qxx Device" alt="" coords="1105,181,1261,221"/>
<area shape="poly" title=" " alt="" coords="1097,44,1140,132,1164,169,1159,172,1136,135,1092,47"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8h.html" title="SPI Flash W25Qxx Driver" alt="" coords="1149,93,1300,133"/>
<area shape="poly" title=" " alt="" coords="1118,43,1184,84,1182,89,1115,48"/>
<area shape="rect" title=" " alt="" coords="777,1017,872,1043"/>
<area shape="poly" title=" " alt="" coords="956,821,982,849,1010,887,1020,908,1025,929,1024,951,1015,971,988,996,956,1014,920,1024,886,1030,885,1025,919,1019,954,1009,985,992,1010,968,1019,949,1020,930,1015,910,1005,889,978,852,952,825"/>
<area shape="rect" href="rule_8h.html" title="XWOS通用库：编译规则" alt="" coords="422,871,529,896"/>
<area shape="poly" title=" " alt="" coords="882,822,542,873,542,868,881,817"/>
<area shape="rect" href="compiler_8h.html" title="XWOS通用库：编译器宏定义" alt="" coords="553,871,688,896"/>
<area shape="poly" title=" " alt="" coords="890,825,686,870,685,865,889,820"/>
<area shape="rect" href="version_8h.html" title="XWOS版本号" alt="" coords="839,871,949,896"/>
<area shape="poly" title=" " alt="" coords="935,824,911,861,907,858,931,822"/>
<area shape="rect" href="type_8h.html" title="XWOS通用库：基本类型定义" alt="" coords="1215,944,1325,969"/>
<area shape="poly" title=" " alt="" coords="1000,811,1047,817,1099,827,1152,844,1202,868,1235,898,1259,930,1255,934,1231,901,1199,873,1150,849,1097,832,1046,822,1000,817"/>
<area shape="rect" href="error_8h.html" title="XWOS通用库：错误" alt="" coords="1077,871,1188,896"/>
<area shape="poly" title=" " alt="" coords="972,820,1089,863,1087,868,971,825"/>
<area shape="rect" title=" " alt="" coords="862,944,1001,969"/>
<area shape="poly" title=" " alt="" coords="950,822,963,855,966,876,965,897,949,933,944,931,959,895,961,876,958,856,945,824"/>
<area shape="rect" href="mb_8h.html" title="XWOS通用库：内存屏障" alt="" coords="712,871,815,896"/>
<area shape="poly" title=" " alt="" coords="913,825,806,868,804,863,911,820"/>
<area shape="poly" title=" " alt="" coords="459,898,440,913,423,932,415,951,415,959,420,968,443,984,477,997,520,1008,569,1015,673,1024,763,1026,763,1032,672,1029,568,1021,519,1013,475,1003,440,989,416,971,410,961,409,950,419,929,437,909,456,894"/>
<area shape="rect" title=" " alt="" coords="431,944,541,969"/>
<area shape="poly" title=" " alt="" coords="480,896,485,930,480,931,474,897"/>
<area shape="poly" title=" " alt="" coords="616,897,602,932,600,951,607,968,631,984,670,998,764,1018,763,1023,669,1003,628,989,603,971,595,952,596,931,611,895"/>
<area shape="rect" title=" " alt="" coords="617,944,787,969"/>
<area shape="poly" title=" " alt="" coords="635,894,680,933,677,937,632,898"/>
<area shape="poly" title=" " alt="" coords="1215,970,1202,972,886,1022,885,1017,1202,967,1214,965"/>
<area shape="rect" title=" " alt="" coords="1130,1017,1277,1043"/>
<area shape="poly" title=" " alt="" coords="1261,971,1225,1009,1222,1005,1257,968"/>
<area shape="rect" title=" " alt="" coords="1301,1017,1370,1043"/>
<area shape="poly" title=" " alt="" coords="1283,968,1317,1005,1314,1009,1279,971"/>
<area shape="poly" title=" " alt="" coords="1156,894,1237,935,1234,940,1154,898"/>
<area shape="rect" href="errno_8h.html" title="XWOS通用库：错误码" alt="" coords="1075,944,1190,969"/>
<area shape="poly" title=" " alt="" coords="1135,896,1135,930,1130,930,1130,896"/>
<area shape="poly" title=" " alt="" coords="774,895,802,943,821,1003,816,1004,797,945,769,897"/>
<area shape="poly" title=" " alt="" coords="791,894,892,936,890,941,789,898"/>
<area shape="poly" title=" " alt="" coords="300,586,327,607,355,634,377,667,390,697,405,723,433,747,467,762,513,774,631,791,758,800,868,805,868,810,758,806,630,796,512,779,465,767,430,752,401,726,385,699,373,670,351,638,323,611,297,590"/>
<area shape="rect" href="jack_2thd_8h.html" title="操作系统抽象层：线程接口描述" alt="" coords="5,643,148,669"/>
<area shape="poly" title=" " alt="" coords="253,591,120,641,118,636,251,586"/>
<area shape="rect" href="time_8h.html" title="操作系统抽象层：时间" alt="" coords="195,724,316,749"/>
<area shape="poly" title=" " alt="" coords="261,590,235,610,214,637,209,656,214,675,223,695,236,712,232,715,219,698,209,677,204,656,209,635,231,606,258,586"/>
<area shape="rect" href="skd_8h.html" title="操作系统抽象层：调度器" alt="" coords="223,643,341,669"/>
<area shape="poly" title=" " alt="" coords="285,588,285,629,279,629,279,588"/>
<area shape="poly" title=" " alt="" coords="316,744,336,747,631,778,868,800,868,805,631,784,335,752,316,750"/>
<area shape="rect" href="jack_2skd_8h.html" title="操作系统抽象层：调度接口描述" alt="" coords="133,797,279,823"/>
<area shape="poly" title=" " alt="" coords="249,751,224,788,220,785,245,748"/>
<area shape="poly" title=" " alt="" coords="293,667,331,708,357,730,387,747,426,760,479,771,610,787,749,798,868,804,867,809,749,803,609,793,478,776,425,765,385,752,354,734,327,712,289,671"/>
<area shape="poly" title=" " alt="" coords="281,670,266,712,261,710,276,668"/>
<area shape="poly" title=" " alt="" coords="252,671,214,692,197,707,184,725,180,740,181,755,193,785,188,787,176,756,175,739,180,723,193,704,211,688,249,666"/>
<area shape="rect" href="xwcd_2ds_2standard_8h.html" title="玄武设备栈：顶级头文件" alt="" coords="1081,563,1217,588"/>
<area shape="poly" title=" " alt="" coords="1064,294,1144,549,1138,550,1059,296"/>
<area shape="rect" href="xwbop_8h.html" title="XWOS通用库：位操作" alt="" coords="443,724,566,749"/>
<area shape="poly" title=" " alt="" coords="977,288,819,297,729,306,639,319,558,338,491,361,466,376,447,391,435,409,431,428,431,576,437,616,451,653,470,686,488,712,484,715,466,689,447,655,432,617,426,577,426,427,430,406,443,388,463,371,489,357,556,332,638,314,728,301,819,291,976,282"/>
<area shape="rect" href="ds_2device_8h.html" title="玄武设备栈：设备基类" alt="" coords="840,416,964,441"/>
<area shape="poly" title=" " alt="" coords="1052,297,1025,331,989,370,934,411,931,407,986,366,1021,328,1048,294"/>
<area shape="rect" href="spi_2master_8h.html" title="玄武设备栈：SPI：主机模式控制器" alt="" coords="829,343,975,368"/>
<area shape="poly" title=" " alt="" coords="1034,297,941,339,939,334,1032,292"/>
<area shape="poly" title=" " alt="" coords="1160,587,1175,608,1187,635,1195,669,1194,698,1184,725,1162,751,1129,775,1091,792,1052,803,1015,809,1014,804,1051,798,1090,787,1127,771,1159,747,1180,722,1189,697,1189,670,1182,637,1170,611,1156,590"/>
<area shape="poly" title=" " alt="" coords="567,745,868,794,867,799,566,751"/>
<area shape="rect" title=" " alt="" coords="425,797,584,823"/>
<area shape="poly" title=" " alt="" coords="507,750,507,784,502,784,502,750"/>
<area shape="poly" title=" " alt="" coords="930,439,1026,487,1124,552,1121,557,1023,492,927,444"/>
<area shape="rect" href="xwaop_8h.html" title="XWOS通用库：原子操作" alt="" coords="781,643,903,669"/>
<area shape="poly" title=" " alt="" coords="888,443,837,491,810,525,790,563,788,582,794,600,819,633,815,636,789,603,783,583,785,562,805,522,833,488,885,439"/>
<area shape="rect" href="bclst_8h.html" title="XWOS通用库：双循环链表" alt="" coords="799,563,912,588"/>
<area shape="poly" title=" " alt="" coords="900,443,882,490,864,550,859,548,877,488,895,441"/>
<area shape="rect" href="lock_2mtx_8h.html" title="操作系统抽象层：互斥锁" alt="" coords="567,563,714,588"/>
<area shape="poly" title=" " alt="" coords="860,444,803,463,743,492,699,523,664,555,660,551,696,519,741,487,801,459,859,439"/>
<area shape="rect" href="xwcd_2ds_2object_8h.html" title="玄武设备栈：对象" alt="" coords="891,489,1012,515"/>
<area shape="poly" title=" " alt="" coords="912,440,938,477,933,480,908,443"/>
<area shape="poly" title=" " alt="" coords="809,671,777,685,747,704,736,714,730,725,729,736,735,748,755,762,787,775,868,795,867,800,786,780,752,767,731,751,724,737,725,724,732,711,744,700,774,681,807,666"/>
<area shape="poly" title=" " alt="" coords="794,671,568,723,567,718,792,666"/>
<area shape="rect" title=" " alt="" coords="744,724,903,749"/>
<area shape="poly" title=" " alt="" coords="842,669,832,711,827,710,837,668"/>
<area shape="poly" title=" " alt="" coords="874,586,897,607,918,635,932,674,941,714,944,783,939,784,935,715,927,675,913,637,893,610,870,590"/>
<area shape="poly" title=" " alt="" coords="666,586,695,606,708,619,719,635,725,652,725,667,718,695,713,721,715,734,723,748,745,763,781,776,868,796,867,801,779,782,742,768,719,751,710,736,707,721,713,694,720,667,720,653,714,637,704,622,691,610,663,590"/>
<area shape="poly" title=" " alt="" coords="614,591,297,721,295,716,612,586"/>
<area shape="poly" title=" " alt="" coords="589,591,348,643,347,638,588,585"/>
<area shape="rect" href="jack_2lock_2mtx_8h.html" title="操作系统抽象层：互斥锁接口描述" alt="" coords="568,636,705,676"/>
<area shape="poly" title=" " alt="" coords="643,588,641,622,636,622,637,588"/>
<area shape="poly" title=" " alt="" coords="984,512,1104,555,1103,560,982,517"/>
<area shape="poly" title=" " alt="" coords="937,517,884,556,881,552,934,513"/>
<area shape="rect" href="xwos_2lib_2object_8h.html" title="XWOS通用库：XWOS的对象" alt="" coords="937,563,1057,588"/>
<area shape="poly" title=" " alt="" coords="961,514,984,550,980,553,957,516"/>
<area shape="poly" title=" " alt="" coords="997,589,984,657,962,750,952,785,946,783,957,749,978,656,992,588"/>
<area shape="poly" title=" " alt="" coords="975,591,878,639,876,635,973,586"/>
<area shape="rect" href="xwos_2mm_2common_8h.html" title="XWOS内存管理：通用定义" alt="" coords="1029,643,1173,669"/>
<area shape="poly" title=" " alt="" coords="1014,586,1076,633,1073,637,1010,590"/>
<area shape="poly" title=" " alt="" coords="1092,671,1012,751,967,791,963,787,1008,747,1088,667"/>
<area shape="rect" title=" " alt="" coords="1079,724,1149,749"/>
<area shape="poly" title=" " alt="" coords="1105,668,1112,710,1107,711,1100,669"/>
<area shape="poly" title=" " alt="" coords="919,366,978,414,1064,487,1129,551,1126,554,1060,491,975,418,915,370"/>
<area shape="poly" title=" " alt="" coords="829,369,723,387,609,415,559,433,518,454,491,476,484,488,482,501,482,577,489,650,501,710,496,711,483,650,477,577,477,500,479,486,487,473,515,449,557,428,608,410,722,382,828,364"/>
<area shape="poly" title=" " alt="" coords="905,368,905,402,899,402,899,368"/>
<area shape="poly" title=" " alt="" coords="880,371,798,418,750,453,704,491,677,522,656,552,652,549,673,519,700,487,746,448,796,414,878,366"/>
<area shape="poly" title=" " alt="" coords="1203,220,1222,245,1241,277,1257,314,1263,354,1263,658,1256,695,1237,727,1209,752,1174,771,1134,786,1093,796,1014,808,1013,803,1092,791,1132,781,1171,766,1206,747,1233,723,1251,694,1258,657,1258,354,1252,316,1237,280,1217,248,1198,223"/>
<area shape="poly" title=" " alt="" coords="1154,224,1089,264,1086,260,1152,219"/>
<area shape="poly" title=" " alt="" coords="1244,132,1266,159,1289,195,1307,236,1314,280,1314,658,1309,690,1295,714,1273,733,1243,752,1187,779,1127,797,1067,807,1014,811,1014,806,1067,801,1126,791,1185,774,1241,747,1270,729,1291,711,1304,689,1309,657,1309,281,1302,238,1284,197,1262,162,1240,135"/>
<area shape="poly" title=" " alt="" coords="1218,135,1201,170,1196,168,1213,132"/>
</map>
</div>
</div>
<p><a href="spi_2flash_2w25qxx_2driver_8c_source.html">浏览源代码.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:aa3cbbeeb4bde0bbf45fa1b3fda485242"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#aa3cbbeeb4bde0bbf45fa1b3fda485242">xwds_w25qxx_drv_start</a> (struct <a class="el" href="structxwds__device.html">xwds_device</a> *dev)</td></tr>
<tr class="memdesc:aa3cbbeeb4bde0bbf45fa1b3fda485242"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX基本驱动：启动设备  <br /></td></tr>
<tr class="separator:aa3cbbeeb4bde0bbf45fa1b3fda485242"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acba3c84b05d941d3571992ec61080983"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#acba3c84b05d941d3571992ec61080983">xwds_w25qxx_drv_stop</a> (struct <a class="el" href="structxwds__device.html">xwds_device</a> *dev)</td></tr>
<tr class="memdesc:acba3c84b05d941d3571992ec61080983"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX基本驱动：停止设备  <br /></td></tr>
<tr class="separator:acba3c84b05d941d3571992ec61080983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8d51ce0e2b4be67eed2bf18ca5fbbef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#ae8d51ce0e2b4be67eed2bf18ca5fbbef">xwds_w25qxx_drv_resume</a> (struct <a class="el" href="structxwds__device.html">xwds_device</a> *dev)</td></tr>
<tr class="memdesc:ae8d51ce0e2b4be67eed2bf18ca5fbbef"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX基本驱动：暂停设备  <br /></td></tr>
<tr class="separator:ae8d51ce0e2b4be67eed2bf18ca5fbbef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb8d26f8fd346a899dff74a8be8c0107"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#abb8d26f8fd346a899dff74a8be8c0107">xwds_w25qxx_drv_suspend</a> (struct <a class="el" href="structxwds__device.html">xwds_device</a> *dev)</td></tr>
<tr class="memdesc:abb8d26f8fd346a899dff74a8be8c0107"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX基本驱动：继续设备  <br /></td></tr>
<tr class="separator:abb8d26f8fd346a899dff74a8be8c0107"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cbb15dfcbe39e7343a6f971bb3c7981"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981">xwds_w25qxx_ctrl</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> instruction, <a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> address_size, <a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a> address, <a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a> dummy_cycles, const <a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> txd[], <a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> *rxb, <a class="el" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> size, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:a1cbb15dfcbe39e7343a6f971bb3c7981"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：向W25QXX发送指令  <br /></td></tr>
<tr class="separator:a1cbb15dfcbe39e7343a6f971bb3c7981"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a409dc974c82de4d33849fb903257cee6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#a409dc974c82de4d33849fb903257cee6">xwds_w25qxx_reset</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:a409dc974c82de4d33849fb903257cee6"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：向W25QXX发送复位命令  <br /></td></tr>
<tr class="separator:a409dc974c82de4d33849fb903257cee6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc8d4892a9374530a0ae2be297d7c0b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#acc8d4892a9374530a0ae2be297d7c0b8">xwds_w25qxx_init_parameter</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:acc8d4892a9374530a0ae2be297d7c0b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：初始化W25QXX的参数  <br /></td></tr>
<tr class="separator:acc8d4892a9374530a0ae2be297d7c0b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f8f2be10968c8ad18f21a70bca19575"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#a9f8f2be10968c8ad18f21a70bca19575">xwds_w25qxx_write_enable</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:a9f8f2be10968c8ad18f21a70bca19575"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：开启W25QXX的写操作  <br /></td></tr>
<tr class="separator:a9f8f2be10968c8ad18f21a70bca19575"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5805e3d7db94d1e680c1d504a418e8b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#a5805e3d7db94d1e680c1d504a418e8b5">xwds_w25qxx_write_disable</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:a5805e3d7db94d1e680c1d504a418e8b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：关闭W25QXX的写操作  <br /></td></tr>
<tr class="separator:a5805e3d7db94d1e680c1d504a418e8b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac69def306dc24b0debf5e3d5319f1b47"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#ac69def306dc24b0debf5e3d5319f1b47">xwds_w25qxx_read_sr</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a> sridx, <a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> *srbuf, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:ac69def306dc24b0debf5e3d5319f1b47"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：读取W25QXX的SR寄存器  <br /></td></tr>
<tr class="separator:ac69def306dc24b0debf5e3d5319f1b47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e678590aa88b04bc61c35777b4ebd36"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#a9e678590aa88b04bc61c35777b4ebd36">xwds_w25qxx_check_idle</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:a9e678590aa88b04bc61c35777b4ebd36"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：检测W25QXX是否空闲  <br /></td></tr>
<tr class="separator:a9e678590aa88b04bc61c35777b4ebd36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a328582aa3b74906784807bccd1ace3ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#a328582aa3b74906784807bccd1ace3ee">xwds_w25qxx_wait_idle</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> period, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:a328582aa3b74906784807bccd1ace3ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：等待W25QXX是否空闲  <br /></td></tr>
<tr class="separator:a328582aa3b74906784807bccd1ace3ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0be01296fe3e3ba7b61328591d617eb2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#a0be01296fe3e3ba7b61328591d617eb2">xwds_w25qxx_read_uid</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type.html#ga846602bc6535386b1415f16f65ca50be">xwu64_t</a> *uidbuf, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:a0be01296fe3e3ba7b61328591d617eb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：读取W25QXX的UID  <br /></td></tr>
<tr class="separator:a0be01296fe3e3ba7b61328591d617eb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d215372b41e6bb9585f2fc01643f633"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#a2d215372b41e6bb9585f2fc01643f633">xwds_w25qxx_read_mid</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type.html#gae84464fbf887686043158271f71505d9">xwu16_t</a> *midbuf, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:a2d215372b41e6bb9585f2fc01643f633"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：读取W25QXX的MID  <br /></td></tr>
<tr class="separator:a2d215372b41e6bb9585f2fc01643f633"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa46d8247222bb24f9a3b7cd8ce327864"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#aa46d8247222bb24f9a3b7cd8ce327864">xwds_w25qxx_read_jid</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a> *jidbuf, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:aa46d8247222bb24f9a3b7cd8ce327864"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：读取W25QXX的JID  <br /></td></tr>
<tr class="separator:aa46d8247222bb24f9a3b7cd8ce327864"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a894937e1ea612c37c1bb74ac4dbd31f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#a894937e1ea612c37c1bb74ac4dbd31f4">xwds_w25qxx_read</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a> address, <a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> *rxb, <a class="el" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> *size, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:a894937e1ea612c37c1bb74ac4dbd31f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：向W25QXX读取数据  <br /></td></tr>
<tr class="separator:a894937e1ea612c37c1bb74ac4dbd31f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c2e955e5d0462815261eb4011ccc80d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#a0c2e955e5d0462815261eb4011ccc80d">xwds_w25qxx_write</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a> address, <a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> *txb, <a class="el" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> *size, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:a0c2e955e5d0462815261eb4011ccc80d"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：向W25QXX写入数据  <br /></td></tr>
<tr class="separator:a0c2e955e5d0462815261eb4011ccc80d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbd1ec4eb2e5d370bc72754432c6203f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#acbd1ec4eb2e5d370bc72754432c6203f">xwds_w25qxx_erase_sector</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a> address, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:acbd1ec4eb2e5d370bc72754432c6203f"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：擦除W25QXX的sector  <br /></td></tr>
<tr class="separator:acbd1ec4eb2e5d370bc72754432c6203f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fcd3633d0d26580d4b47e92085c4fd8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#a9fcd3633d0d26580d4b47e92085c4fd8">xwds_w25qxx_erase_32kblk</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a> address, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:a9fcd3633d0d26580d4b47e92085c4fd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：擦除W25QXX的32KiB的块  <br /></td></tr>
<tr class="separator:a9fcd3633d0d26580d4b47e92085c4fd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4aa445a8fe937709bfec87b6964d69b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#ab4aa445a8fe937709bfec87b6964d69b">xwds_w25qxx_erase_64kblk</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a> address, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:ab4aa445a8fe937709bfec87b6964d69b"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：擦除W25QXX的64KiB的块  <br /></td></tr>
<tr class="separator:ab4aa445a8fe937709bfec87b6964d69b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeafca2ee95063cdd1f1880baddac68f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html#aeafca2ee95063cdd1f1880baddac68f9">xwds_w25qxx_erase_chip</a> (struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *w25qxx, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:aeafca2ee95063cdd1f1880baddac68f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">W25QXX API：擦除W25QXX的全部数据  <br /></td></tr>
<tr class="separator:aeafca2ee95063cdd1f1880baddac68f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><p>SPI Flash W25Qxx Driver </p>
<dl class="section author"><dt>作者</dt><dd><ul>
<li>隐星魂 (Roy Sun) <a href="#" onclick="location.href='mai'+'lto:'+'xwo'+'s@'+'xwo'+'s.'+'tec'+'h'; return false;">xwos@<span class="obfuscator">.nosp@m.</span>xwos<span class="obfuscator">.nosp@m.</span>.tech</a> </li>
</ul>
</dd></dl>
<dl class="section copyright"><dt>版权所有</dt><dd><ul>
<li>Copyright © 2015 xwos.tech, All Rights Reserved. <blockquote class="doxtable">
<p>&zwj;Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at </p><pre class="fragment">  http://www.apache.org/licenses/LICENSE-2.0
</pre><p> Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. </p>
</blockquote>
</li>
</ul>
</dd></dl>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 中定义.</p>
</div><h2 class="groupheader">函数说明</h2>
<a id="a9e678590aa88b04bc61c35777b4ebd36" name="a9e678590aa88b04bc61c35777b4ebd36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e678590aa88b04bc61c35777b4ebd36">&#9670;&#160;</a></span>xwds_w25qxx_check_idle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_check_idle </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：检测W25QXX是否空闲 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>空闲 </td></tr>
    <tr><td class="paramname">-EBUSY</td><td>繁忙 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p><code>to</code> 表示等待超时的时间点：</p><ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00338">338</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  339</span>{</div>
<div class="line"><span class="lineno">  340</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  341</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> sr1;</div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#ac69def306dc24b0debf5e3d5319f1b47">xwds_w25qxx_read_sr</a>(w25qxx,</div>
<div class="line"><span class="lineno">  344</span>                                 <a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga31d917350fed9f5537c5b46d2e7b8819a9a987b52392f7843aac1026aade97c61">XWDS_W25QXX_SR_1</a>, &amp;sr1,</div>
<div class="line"><span class="lineno">  345</span>                                 to);</div>
<div class="line"><span class="lineno">  346</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a> == rc) {</div>
<div class="line"><span class="lineno">  347</span>                <span class="keywordflow">if</span> (sr1 &amp; <a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga3cdd30d2261b6ea8963e3780e258b99aa3400df1ccb5cf73ce731eace2beaec28">XWDS_W25QXX_SR1_BUSY</a>) {</div>
<div class="line"><span class="lineno">  348</span>                        rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#ga8368025077a0385849d6817b2007c095">EBUSY</a>;</div>
<div class="line"><span class="lineno">  349</span>                }</div>
<div class="line"><span class="lineno">  350</span>        }</div>
<div class="line"><span class="lineno">  351</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  352</span>}</div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga31d917350fed9f5537c5b46d2e7b8819a9a987b52392f7843aac1026aade97c61"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga31d917350fed9f5537c5b46d2e7b8819a9a987b52392f7843aac1026aade97c61">XWDS_W25QXX_SR_1</a></div><div class="ttdeci">@ XWDS_W25QXX_SR_1</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00101">device.h:101</a></div></div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga3cdd30d2261b6ea8963e3780e258b99aa3400df1ccb5cf73ce731eace2beaec28"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga3cdd30d2261b6ea8963e3780e258b99aa3400df1ccb5cf73ce731eace2beaec28">XWDS_W25QXX_SR1_BUSY</a></div><div class="ttdeci">@ XWDS_W25QXX_SR1_BUSY</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00111">device.h:111</a></div></div>
<div class="ttc" id="agroup__xwos__lib__errno_html_ga6a72d49d869215a02342eb465166537b"><div class="ttname"><a href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a></div><div class="ttdeci">#define XWOK</div><div class="ttdoc">No error</div><div class="ttdef"><b>Definition</b> <a href="errno_8h_source.html#l00182">errno.h:182</a></div></div>
<div class="ttc" id="agroup__xwos__lib__errno_html_ga8368025077a0385849d6817b2007c095"><div class="ttname"><a href="group__xwos__lib__errno.html#ga8368025077a0385849d6817b2007c095">EBUSY</a></div><div class="ttdeci">#define EBUSY</div><div class="ttdoc">Device or resource busy</div><div class="ttdef"><b>Definition</b> <a href="errno_8h_source.html#l00046">errno.h:46</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga06847ea8c7edb2b1f166288b230f251f"><div class="ttname"><a href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a></div><div class="ttdeci">signed long xwer_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00554">type.h:554</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga4433c8b2d64a72382ab333d11bfd0093"><div class="ttname"><a href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a></div><div class="ttdeci">uint8_t xwu8_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00194">type.h:194</a></div></div>
<div class="ttc" id="aspi_2flash_2w25qxx_2driver_8c_html_ac69def306dc24b0debf5e3d5319f1b47"><div class="ttname"><a href="spi_2flash_2w25qxx_2driver_8c.html#ac69def306dc24b0debf5e3d5319f1b47">xwds_w25qxx_read_sr</a></div><div class="ttdeci">xwer_t xwds_w25qxx_read_sr(struct xwds_w25qxx *w25qxx, xwu32_t sridx, xwu8_t *srbuf, xwtm_t to)</div><div class="ttdoc">W25QXX API：读取W25QXX的SR寄存器</div><div class="ttdef"><b>Definition</b> <a href="spi_2flash_2w25qxx_2driver_8c_source.html#l00296">driver.c:296</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a9e678590aa88b04bc61c35777b4ebd36_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a9e678590aa88b04bc61c35777b4ebd36_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a9e678590aa88b04bc61c35777b4ebd36_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_a9e678590aa88b04bc61c35777b4ebd36_cgraph">
<area shape="rect" title="W25QXX API：检测W25QXX是否空闲" alt="" coords="5,31,180,56"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#ac69def306dc24b0debf5e3d5319f1b47" title="W25QXX API：读取W25QXX的SR寄存器" alt="" coords="228,31,383,56"/>
<area shape="poly" title=" " alt="" coords="180,41,214,41,214,46,180,46"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981" title="W25QXX API：向W25QXX发送指令" alt="" coords="431,31,561,56"/>
<area shape="poly" title=" " alt="" coords="383,41,417,41,417,46,383,46"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="609,5,747,31"/>
<area shape="poly" title=" " alt="" coords="561,32,596,27,596,32,562,37"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="613,55,743,80"/>
<area shape="poly" title=" " alt="" coords="562,49,599,54,599,60,561,55"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="795,5,911,31"/>
<area shape="poly" title=" " alt="" coords="747,15,781,15,781,21,747,21"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="959,5,1089,31"/>
<area shape="poly" title=" " alt="" coords="911,15,945,15,945,21,911,21"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="798,55,907,80"/>
<area shape="poly" title=" " alt="" coords="743,65,784,65,784,70,743,70"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="963,55,1085,80"/>
<area shape="poly" title=" " alt="" coords="907,65,949,65,949,70,907,70"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a9e678590aa88b04bc61c35777b4ebd36_icgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a9e678590aa88b04bc61c35777b4ebd36_icgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a9e678590aa88b04bc61c35777b4ebd36_icgraph" id="aspi_2flash_2w25qxx_2driver_8c_a9e678590aa88b04bc61c35777b4ebd36_icgraph">
<area shape="rect" title="W25QXX API：检测W25QXX是否空闲" alt="" coords="453,104,628,129"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a328582aa3b74906784807bccd1ace3ee" title="W25QXX API：等待W25QXX是否空闲" alt="" coords="243,104,405,129"/>
<area shape="poly" title=" " alt="" coords="439,119,406,119,406,114,439,114"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9fcd3633d0d26580d4b47e92085c4fd8" title="W25QXX API：擦除W25QXX的32KiB的块" alt="" coords="5,5,195,31"/>
<area shape="poly" title=" " alt="" coords="292,99,247,71,194,44,160,33,162,28,196,40,249,66,295,94"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#ab4aa445a8fe937709bfec87b6964d69b" title="W25QXX API：擦除W25QXX的64KiB的块" alt="" coords="5,55,195,80"/>
<area shape="poly" title=" " alt="" coords="252,104,158,83,159,77,253,98"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#aeafca2ee95063cdd1f1880baddac68f9" title="W25QXX API：擦除W25QXX的全部数据" alt="" coords="13,104,187,129"/>
<area shape="poly" title=" " alt="" coords="229,119,187,119,187,114,229,114"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#acbd1ec4eb2e5d370bc72754432c6203f" title="W25QXX API：擦除W25QXX的sector" alt="" coords="7,153,193,179"/>
<area shape="poly" title=" " alt="" coords="253,135,159,156,158,151,252,130"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a0c2e955e5d0462815261eb4011ccc80d" title="W25QXX API：向W25QXX写入数据" alt="" coords="30,203,170,228"/>
<area shape="poly" title=" " alt="" coords="294,139,249,166,196,192,158,205,157,200,194,188,246,162,291,135"/>
</map>
</div>

</div>
</div>
<a id="a1cbb15dfcbe39e7343a6f971bb3c7981" name="a1cbb15dfcbe39e7343a6f971bb3c7981"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cbb15dfcbe39e7343a6f971bb3c7981">&#9670;&#160;</a></span>xwds_w25qxx_ctrl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_ctrl </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a>&#160;</td>
          <td class="paramname"><em>instruction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a>&#160;</td>
          <td class="paramname"><em>address_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a>&#160;</td>
          <td class="paramname"><em>dummy_cycles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a>&#160;</td>
          <td class="paramname"><em>txd</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> *&#160;</td>
          <td class="paramname"><em>rxb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：向W25QXX发送指令 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">instruction</td><td>指令 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">address_size</td><td>地址信息长度 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>地址 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dummy_cycles</td><td>SPI通讯过程中的无效时钟周期 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">txd</td><td>SPI通讯过程中的发送数据的缓冲区 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rxb</td><td>SPI通讯过程中的接收数据的缓冲区 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>SPI通讯过程中的缓冲区大小 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<ul>
<li>时序由 <code>w25qxx-&gt;spip.buscfgid</code> 定义。</li>
<li><code>to</code> 表示等待超时的时间点：<ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
</li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00076">76</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">   82</span>{</div>
<div class="line"><span class="lineno">   83</span>        <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx__driver.html">xwds_w25qxx_driver</a> * drv;</div>
<div class="line"><span class="lineno">   84</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> i, j, idx, rxofs, xfersize;</div>
<div class="line"><span class="lineno">   85</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(w25qxx, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>        rc = <a class="code hl_function" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3">xwds_w25qxx_grab</a>(w25qxx);</div>
<div class="line"><span class="lineno">   90</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="group__xwos__lib__compiler.html#gadc8a67c68c81395e096207c710e7b703">__xwcc_unlikely</a>(rc &lt; 0)) {</div>
<div class="line"><span class="lineno">   91</span>                <span class="keywordflow">goto</span> err_w25qxx_grab;</div>
<div class="line"><span class="lineno">   92</span>        }</div>
<div class="line"><span class="lineno">   93</span>        drv = <a class="code hl_define" href="group__xwcd__ds.html#ga01391bff32dca44d0fdbe5817e801353">xwds_cast</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwds__w25qxx__driver.html">xwds_w25qxx_driver</a> *, w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a342b17a78513bb43503b54dac0b4ad09">spip</a>.<a class="code hl_variable" href="structxwds__spip.html#a63b420443995bf6c8c045490168628da">dev</a>.<a class="code hl_variable" href="structxwds__device.html#a1d485436e69d8cd8f38bcd2eb467a640">drv</a>);</div>
<div class="line"><span class="lineno">   94</span>        idx = 0;</div>
<div class="line"><span class="lineno">   95</span>        w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#ab95af58f472eced2a7f21857cc4c4f3f">txq</a>[idx] = instruction;</div>
<div class="line"><span class="lineno">   96</span>        idx++;</div>
<div class="line"><span class="lineno">   97</span>        <span class="keywordflow">if</span> (address_size) {</div>
<div class="line"><span class="lineno">   98</span>                <span class="keywordflow">for</span> (i = 0, j = (<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>)(address_size - 1);</div>
<div class="line"><span class="lineno">   99</span>                     i &lt; address_size;</div>
<div class="line"><span class="lineno">  100</span>                     i++, j--) {</div>
<div class="line"><span class="lineno">  101</span>                        w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#ab95af58f472eced2a7f21857cc4c4f3f">txq</a>[idx] = (<a class="code hl_typedef" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a>)(address &gt;&gt; (j * 8));</div>
<div class="line"><span class="lineno">  102</span>                        idx++;</div>
<div class="line"><span class="lineno">  103</span>                }</div>
<div class="line"><span class="lineno">  104</span>        }</div>
<div class="line"><span class="lineno">  105</span>        <span class="keywordflow">if</span> (dummy_cycles) {</div>
<div class="line"><span class="lineno">  106</span>                <span class="keywordflow">for</span> (i = 0; i &lt; (dummy_cycles / 8); i++) {</div>
<div class="line"><span class="lineno">  107</span>                        w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#ab95af58f472eced2a7f21857cc4c4f3f">txq</a>[idx] = 0;</div>
<div class="line"><span class="lineno">  108</span>                        idx++;</div>
<div class="line"><span class="lineno">  109</span>                }</div>
<div class="line"><span class="lineno">  110</span>        }</div>
<div class="line"><span class="lineno">  111</span>        rxofs = idx;</div>
<div class="line"><span class="lineno">  112</span>        <span class="keywordflow">for</span> (i = 0; i &lt; size; i++) {</div>
<div class="line"><span class="lineno">  113</span>                <span class="keywordflow">if</span> (txd) {</div>
<div class="line"><span class="lineno">  114</span>                        w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#ab95af58f472eced2a7f21857cc4c4f3f">txq</a>[idx] = txd[i];</div>
<div class="line"><span class="lineno">  115</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  116</span>                        w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#ab95af58f472eced2a7f21857cc4c4f3f">txq</a>[idx] = 0;</div>
<div class="line"><span class="lineno">  117</span>                }</div>
<div class="line"><span class="lineno">  118</span>                idx++;</div>
<div class="line"><span class="lineno">  119</span>        }</div>
<div class="line"><span class="lineno">  120</span>        xfersize = idx;</div>
<div class="line"><span class="lineno">  121</span>        rc = drv-&gt;<a class="code hl_variable" href="structxwds__w25qxx__driver.html#a4e037f9a2f1a2a03c223750789445e58">io</a>(w25qxx,</div>
<div class="line"><span class="lineno">  122</span>                     w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#ab95af58f472eced2a7f21857cc4c4f3f">txq</a>, w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a59c28b4ee9aa9444d539e436ea85e090">rxq</a>, &amp;xfersize,</div>
<div class="line"><span class="lineno">  123</span>                     to);</div>
<div class="line"><span class="lineno">  124</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  125</span>                <span class="keywordflow">goto</span> err_spim_xfer;</div>
<div class="line"><span class="lineno">  126</span>        }</div>
<div class="line"><span class="lineno">  127</span>        <span class="keywordflow">if</span> (rxb) {</div>
<div class="line"><span class="lineno">  128</span>                <span class="keywordflow">for</span> (i = 0; i &lt; size; i++) {</div>
<div class="line"><span class="lineno">  129</span>                        rxb[i] = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a59c28b4ee9aa9444d539e436ea85e090">rxq</a>[rxofs + i];</div>
<div class="line"><span class="lineno">  130</span>                }</div>
<div class="line"><span class="lineno">  131</span>        }</div>
<div class="line"><span class="lineno">  132</span>        <a class="code hl_function" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876">xwds_w25qxx_put</a>(w25qxx);</div>
<div class="line"><span class="lineno">  133</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>err_spim_xfer:</div>
<div class="line"><span class="lineno">  136</span>        <a class="code hl_function" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876">xwds_w25qxx_put</a>(w25qxx);</div>
<div class="line"><span class="lineno">  137</span>err_w25qxx_grab:</div>
<div class="line"><span class="lineno">  138</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  139</span>}</div>
<div class="ttc" id="agroup__xwcd__ds_html_ga01391bff32dca44d0fdbe5817e801353"><div class="ttname"><a href="group__xwcd__ds.html#ga01391bff32dca44d0fdbe5817e801353">xwds_cast</a></div><div class="ttdeci">#define xwds_cast(type, dev)</div><div class="ttdef"><b>Definition</b> <a href="xwcd_2ds_2standard_8h_source.html#l00040">standard.h:40</a></div></div>
<div class="ttc" id="agroup__xwcd__ds_html_ga9541a62248e32dc84221e1f55d11c2b3"><div class="ttname"><a href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a></div><div class="ttdeci">#define XWDS_VALIDATE(exp, errstr,...)</div><div class="ttdef"><b>Definition</b> <a href="xwcd_2ds_2standard_8h_source.html#l00051">standard.h:51</a></div></div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_ga44a23fb80fc46ddc53c26e27939307b3"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3">xwds_w25qxx_grab</a></div><div class="ttdeci">static xwer_t xwds_w25qxx_grab(struct xwds_w25qxx *w25qxx)</div><div class="ttdoc">W25QXX API：增加对象的引用计数</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00194">device.h:194</a></div></div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_ga56fdd8b04713680accd8f32690dd6876"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876">xwds_w25qxx_put</a></div><div class="ttdeci">static xwer_t xwds_w25qxx_put(struct xwds_w25qxx *w25qxx)</div><div class="ttdoc">W25QXX API：减少对象的引用计数</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00206">device.h:206</a></div></div>
<div class="ttc" id="agroup__xwos__lib__compiler_html_gadc8a67c68c81395e096207c710e7b703"><div class="ttname"><a href="group__xwos__lib__compiler.html#gadc8a67c68c81395e096207c710e7b703">__xwcc_unlikely</a></div><div class="ttdeci">#define __xwcc_unlikely(x)</div><div class="ttdef"><b>Definition</b> <a href="compiler_8h_source.html#l00119">compiler.h:119</a></div></div>
<div class="ttc" id="agroup__xwos__lib__errno_html_ga3f317946e043623f9d6b93dbf60e6316"><div class="ttname"><a href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a></div><div class="ttdeci">#define EFAULT</div><div class="ttdoc">Bad address</div><div class="ttdef"><b>Definition</b> <a href="errno_8h_source.html#l00044">errno.h:44</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga2d00153ecb0cdcc8ea0823c13ee59649"><div class="ttname"><a href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a></div><div class="ttdeci">unsigned long xwsz_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00339">type.h:339</a></div></div>
<div class="ttc" id="astructxwds__device_html_a1d485436e69d8cd8f38bcd2eb467a640"><div class="ttname"><a href="structxwds__device.html#a1d485436e69d8cd8f38bcd2eb467a640">xwds_device::drv</a></div><div class="ttdeci">const struct xwds_driver * drv</div><div class="ttdef"><b>Definition</b> <a href="ds_2device_8h_source.html#l00133">device.h:133</a></div></div>
<div class="ttc" id="astructxwds__spip_html_a63b420443995bf6c8c045490168628da"><div class="ttname"><a href="structxwds__spip.html#a63b420443995bf6c8c045490168628da">xwds_spip::dev</a></div><div class="ttdeci">struct xwds_device dev</div><div class="ttdef"><b>Definition</b> <a href="spi_2peripheral_8h_source.html#l00048">peripheral.h:48</a></div></div>
<div class="ttc" id="astructxwds__w25qxx__driver_html"><div class="ttname"><a href="structxwds__w25qxx__driver.html">xwds_w25qxx_driver</a></div><div class="ttdoc">W25QXX驱动函数表</div><div class="ttdef"><b>Definition</b> <a href="spi_2flash_2w25qxx_2driver_8h_source.html#l00037">driver.h:37</a></div></div>
<div class="ttc" id="astructxwds__w25qxx__driver_html_a4e037f9a2f1a2a03c223750789445e58"><div class="ttname"><a href="structxwds__w25qxx__driver.html#a4e037f9a2f1a2a03c223750789445e58">xwds_w25qxx_driver::io</a></div><div class="ttdeci">xwer_t(* io)(struct xwds_w25qxx *, xwu8_t *, xwu8_t *, xwsz_t *, xwtm_t)</div><div class="ttdef"><b>Definition</b> <a href="spi_2flash_2w25qxx_2driver_8h_source.html#l00039">driver.h:39</a></div></div>
<div class="ttc" id="astructxwds__w25qxx_html_a342b17a78513bb43503b54dac0b4ad09"><div class="ttname"><a href="structxwds__w25qxx.html#a342b17a78513bb43503b54dac0b4ad09">xwds_w25qxx::spip</a></div><div class="ttdeci">struct xwds_spip spip</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00173">device.h:173</a></div></div>
<div class="ttc" id="astructxwds__w25qxx_html_a59c28b4ee9aa9444d539e436ea85e090"><div class="ttname"><a href="structxwds__w25qxx.html#a59c28b4ee9aa9444d539e436ea85e090">xwds_w25qxx::rxq</a></div><div class="ttdeci">xwu8_t rxq[256U+16]</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00181">device.h:181</a></div></div>
<div class="ttc" id="astructxwds__w25qxx_html_ab95af58f472eced2a7f21857cc4c4f3f"><div class="ttname"><a href="structxwds__w25qxx.html#ab95af58f472eced2a7f21857cc4c4f3f">xwds_w25qxx::txq</a></div><div class="ttdeci">xwu8_t txq[256U+16]</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00180">device.h:180</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a1cbb15dfcbe39e7343a6f971bb3c7981_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a1cbb15dfcbe39e7343a6f971bb3c7981_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a1cbb15dfcbe39e7343a6f971bb3c7981_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_a1cbb15dfcbe39e7343a6f971bb3c7981_cgraph">
<area shape="rect" title="W25QXX API：向W25QXX发送指令" alt="" coords="5,31,136,56"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="184,5,321,31"/>
<area shape="poly" title=" " alt="" coords="136,32,170,27,171,32,137,37"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="187,55,318,80"/>
<area shape="poly" title=" " alt="" coords="137,49,174,54,173,60,136,55"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="369,5,485,31"/>
<area shape="poly" title=" " alt="" coords="321,15,356,15,356,21,321,21"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="533,5,664,31"/>
<area shape="poly" title=" " alt="" coords="486,15,520,15,520,21,486,21"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="373,55,482,80"/>
<area shape="poly" title=" " alt="" coords="318,65,359,65,359,70,318,70"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="537,55,660,80"/>
<area shape="poly" title=" " alt="" coords="482,65,524,65,524,70,482,70"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a1cbb15dfcbe39e7343a6f971bb3c7981_icgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a1cbb15dfcbe39e7343a6f971bb3c7981_icgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a1cbb15dfcbe39e7343a6f971bb3c7981_icgraph" id="aspi_2flash_2w25qxx_2driver_8c_a1cbb15dfcbe39e7343a6f971bb3c7981_icgraph">
<area shape="rect" title="W25QXX API：向W25QXX发送指令" alt="" coords="935,364,1065,390"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9fcd3633d0d26580d4b47e92085c4fd8" title="W25QXX API：擦除W25QXX的32KiB的块" alt="" coords="5,190,195,215"/>
<area shape="poly" title=" " alt="" coords="991,351,980,307,959,253,928,199,908,175,885,155,802,103,726,72,652,58,580,58,505,71,426,93,244,153,220,165,196,179,158,192,156,187,194,174,217,161,242,148,425,87,504,66,580,53,653,53,727,67,805,99,888,151,912,172,933,196,964,251,985,305,996,350"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#ab4aa445a8fe937709bfec87b6964d69b" title="W25QXX API：擦除W25QXX的64KiB的块" alt="" coords="5,140,195,166"/>
<area shape="poly" title=" " alt="" coords="994,351,985,296,966,227,952,190,934,155,912,123,885,95,840,63,791,39,739,22,685,12,629,8,572,10,460,25,353,52,258,85,181,117,127,143,125,138,178,112,256,80,351,47,459,20,572,4,629,3,685,7,740,17,793,34,842,58,888,91,916,119,939,152,957,188,972,225,990,295,999,350"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#aeafca2ee95063cdd1f1880baddac68f9" title="W25QXX API：擦除W25QXX的全部数据" alt="" coords="13,239,187,264"/>
<area shape="poly" title=" " alt="" coords="959,361,886,335,791,315,692,298,498,274,323,261,187,256,188,250,323,256,499,269,693,293,792,310,887,330,961,356"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#acbd1ec4eb2e5d370bc72754432c6203f" title="W25QXX API：擦除W25QXX的sector" alt="" coords="7,338,193,363"/>
<area shape="poly" title=" " alt="" coords="921,394,887,398,706,414,564,424,422,420,242,398,182,384,131,365,132,360,184,379,243,393,423,415,564,418,705,409,886,393,921,389"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a894937e1ea612c37c1bb74ac4dbd31f4" title="W25QXX API：向W25QXX读取数据" alt="" coords="735,466,873,491"/>
<area shape="poly" title=" " alt="" coords="970,400,888,449,843,468,841,463,885,444,968,395"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#aa46d8247222bb24f9a3b7cd8ce327864" title="W25QXX API：读取W25QXX的JID" alt="" coords="725,515,883,540"/>
<area shape="poly" title=" " alt="" coords="986,403,946,455,919,482,888,506,865,517,862,512,885,501,915,478,942,451,981,400"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a2d215372b41e6bb9585f2fc01643f633" title="W25QXX API：读取W25QXX的MID" alt="" coords="721,564,887,590"/>
<area shape="poly" title=" " alt="" coords="992,403,977,438,954,478,925,520,888,555,868,566,865,562,885,551,921,516,950,476,972,435,987,401"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#ac69def306dc24b0debf5e3d5319f1b47" title="W25QXX API：读取W25QXX的SR寄存器" alt="" coords="727,212,881,238"/>
<area shape="poly" title=" " alt="" coords="980,355,939,307,913,281,885,259,847,240,849,235,888,255,917,277,943,303,984,351"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a0c2e955e5d0462815261eb4011ccc80d" title="W25QXX API：向W25QXX写入数据" alt="" coords="30,288,170,314"/>
<area shape="poly" title=" " alt="" coords="921,381,762,383,567,381,378,372,301,364,242,353,217,341,194,327,159,316,161,311,196,322,220,336,243,348,302,359,379,367,567,375,762,377,921,376"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9f8f2be10968c8ad18f21a70bca19575" title="W25QXX API：开启W25QXX的写操作" alt="" coords="244,163,429,188"/>
<area shape="poly" title=" " alt="" coords="988,352,974,317,952,275,923,235,885,202,823,171,755,151,685,140,615,137,548,140,486,147,387,165,386,160,485,142,547,135,615,132,686,135,756,145,825,166,888,197,927,231,957,272,979,314,993,350"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a0be01296fe3e3ba7b61328591d617eb2" title="W25QXX API：读取W25QXX的UID" alt="" coords="723,614,885,639"/>
<area shape="poly" title=" " alt="" coords="995,404,983,447,962,501,931,557,911,582,888,604,870,616,867,611,885,600,907,579,926,554,957,499,978,446,990,402"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a409dc974c82de4d33849fb903257cee6" title="W25QXX API：向W25QXX发送复位命令" alt="" coords="733,663,875,688"/>
<area shape="poly" title=" " alt="" coords="998,404,988,456,969,524,937,593,915,625,888,654,871,665,868,661,885,650,910,622,932,591,964,522,983,455,993,403"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a5805e3d7db94d1e680c1d504a418e8b5" title="W25QXX API：关闭W25QXX的写操作" alt="" coords="243,314,431,339"/>
<area shape="poly" title=" " alt="" coords="921,366,886,361,640,341,431,331,431,326,640,335,887,356,921,360"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#acc8d4892a9374530a0ae2be297d7c0b8" title="W25QXX API：初始化W25QXX的参数" alt="" coords="479,564,673,590"/>
<area shape="poly" title=" " alt="" coords="732,546,636,567,635,562,731,541"/>
<area shape="poly" title=" " alt="" coords="708,580,674,580,674,574,708,574"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9e678590aa88b04bc61c35777b4ebd36" title="W25QXX API：检测W25QXX是否空闲" alt="" coords="489,212,663,238"/>
<area shape="poly" title=" " alt="" coords="713,228,664,228,664,222,713,222"/>
<area shape="poly" title=" " alt="" coords="732,212,673,202,546,189,429,182,430,176,546,184,674,197,733,207"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a328582aa3b74906784807bccd1ace3ee" title="W25QXX API：等待W25QXX是否空闲" alt="" coords="255,212,418,238"/>
<area shape="poly" title=" " alt="" coords="475,228,418,228,418,222,475,222"/>
<area shape="poly" title=" " alt="" coords="241,218,195,214,195,209,242,213"/>
<area shape="poly" title=" " alt="" coords="268,211,242,202,194,179,157,168,159,163,196,174,244,197,270,206"/>
<area shape="poly" title=" " alt="" coords="242,238,188,244,187,239,241,233"/>
<area shape="poly" title=" " alt="" coords="312,249,261,289,196,327,162,340,160,335,194,323,258,284,309,245"/>
<area shape="poly" title=" " alt="" coords="290,245,195,278,152,291,150,286,194,273,288,240"/>
<area shape="poly" title=" " alt="" coords="231,190,195,194,194,189,230,185"/>
<area shape="poly" title=" " alt="" coords="230,168,194,165,195,159,231,163"/>
<area shape="poly" title=" " alt="" coords="265,195,244,202,220,215,196,229,158,241,156,236,194,224,217,211,242,197,263,190"/>
<area shape="poly" title=" " alt="" coords="250,197,245,202,232,216,225,231,221,262,217,295,210,311,196,327,177,340,174,335,193,323,205,308,212,293,216,262,220,230,227,213,241,198,246,193"/>
<area shape="poly" title=" " alt="" coords="252,197,244,202,228,219,221,238,213,258,196,278,172,291,169,286,193,273,209,256,216,237,224,217,241,198,249,192"/>
<area shape="poly" title=" " alt="" coords="731,613,635,592,636,587,732,608"/>
<area shape="poly" title=" " alt="" coords="309,307,258,267,194,229,163,218,165,213,196,224,261,263,313,303"/>
<area shape="poly" title=" " alt="" coords="304,307,272,282,241,251,226,230,218,212,210,195,193,179,172,168,175,163,196,175,214,192,223,209,231,227,245,247,276,278,307,303"/>
<area shape="poly" title=" " alt="" coords="284,312,242,297,194,278,155,267,156,262,196,273,244,292,286,307"/>
<area shape="poly" title=" " alt="" coords="229,340,194,343,193,338,229,334"/>
<area shape="poly" title=" " alt="" coords="229,317,170,311,170,306,229,312"/>
</map>
</div>

</div>
</div>
<a id="ae8d51ce0e2b4be67eed2bf18ca5fbbef" name="ae8d51ce0e2b4be67eed2bf18ca5fbbef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8d51ce0e2b4be67eed2bf18ca5fbbef">&#9670;&#160;</a></span>xwds_w25qxx_drv_resume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_drv_resume </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__device.html">xwds_device</a> *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX基本驱动：暂停设备 </p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00062">62</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">   63</span>{</div>
<div class="line"><span class="lineno">   64</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#aa3cbbeeb4bde0bbf45fa1b3fda485242">xwds_w25qxx_drv_start</a>(dev);</div>
<div class="line"><span class="lineno">   65</span>}</div>
<div class="ttc" id="aspi_2flash_2w25qxx_2driver_8c_html_aa3cbbeeb4bde0bbf45fa1b3fda485242"><div class="ttname"><a href="spi_2flash_2w25qxx_2driver_8c.html#aa3cbbeeb4bde0bbf45fa1b3fda485242">xwds_w25qxx_drv_start</a></div><div class="ttdeci">xwer_t xwds_w25qxx_drv_start(struct xwds_device *dev)</div><div class="ttdoc">W25QXX基本驱动：启动设备</div><div class="ttdef"><b>Definition</b> <a href="spi_2flash_2w25qxx_2driver_8c_source.html#l00030">driver.c:30</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_ae8d51ce0e2b4be67eed2bf18ca5fbbef_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_ae8d51ce0e2b4be67eed2bf18ca5fbbef_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_ae8d51ce0e2b4be67eed2bf18ca5fbbef_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_ae8d51ce0e2b4be67eed2bf18ca5fbbef_cgraph">
<area shape="rect" title="W25QXX基本驱动：暂停设备" alt="" coords="5,5,185,31"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#aa3cbbeeb4bde0bbf45fa1b3fda485242" title="W25QXX基本驱动：启动设备" alt="" coords="233,5,396,31"/>
<area shape="poly" title=" " alt="" coords="185,15,219,15,219,21,185,21"/>
</map>
</div>

</div>
</div>
<a id="aa3cbbeeb4bde0bbf45fa1b3fda485242" name="aa3cbbeeb4bde0bbf45fa1b3fda485242"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3cbbeeb4bde0bbf45fa1b3fda485242">&#9670;&#160;</a></span>xwds_w25qxx_drv_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_drv_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__device.html">xwds_device</a> *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX基本驱动：启动设备 </p>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00030">30</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">   31</span>{</div>
<div class="line"><span class="lineno">   32</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx.html">xwds_w25qxx</a> * w25qxx;</div>
<div class="line"><span class="lineno">   33</span>        <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx__driver.html">xwds_w25qxx_driver</a> * drv;</div>
<div class="line"><span class="lineno">   34</span>        <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx__cmd.html">xwds_w25qxx_cmd</a> * cmdtbl;</div>
<div class="line"><span class="lineno">   35</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">   36</span> </div>
<div class="line"><span class="lineno">   37</span>        w25qxx = <a class="code hl_define" href="group__xwcd__ds.html#ga01391bff32dca44d0fdbe5817e801353">xwds_cast</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwds__w25qxx.html">xwds_w25qxx</a> *, dev);</div>
<div class="line"><span class="lineno">   38</span>        drv = <a class="code hl_define" href="group__xwcd__ds.html#ga01391bff32dca44d0fdbe5817e801353">xwds_cast</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwds__w25qxx__driver.html">xwds_w25qxx_driver</a> *, dev-&gt;<a class="code hl_variable" href="structxwds__device.html#a1d485436e69d8cd8f38bcd2eb467a640">drv</a>);</div>
<div class="line"><span class="lineno">   39</span>        cmdtbl = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>;</div>
<div class="line"><span class="lineno">   40</span>        <span class="keywordflow">if</span> ((<a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == drv) || (<a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == drv-&gt;<a class="code hl_variable" href="structxwds__w25qxx__driver.html#a4e037f9a2f1a2a03c223750789445e58">io</a>) ||</div>
<div class="line"><span class="lineno">   41</span>            (<a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == cmdtbl) || (<a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a342b17a78513bb43503b54dac0b4ad09">spip</a>.<a class="code hl_variable" href="structxwds__spip.html#ae52401dbfbade6e5943d8ce82d55a416">bus</a>)) {</div>
<div class="line"><span class="lineno">   42</span>                rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#ga2d1678d5a7cc8ce499643f3b8957def4">EINVAL</a>;</div>
<div class="line"><span class="lineno">   43</span>                <span class="keywordflow">goto</span> err_desc_err;</div>
<div class="line"><span class="lineno">   44</span>        }</div>
<div class="line"><span class="lineno">   45</span>        memset(w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#ab95af58f472eced2a7f21857cc4c4f3f">txq</a>, 0, <span class="keyword">sizeof</span>(w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#ab95af58f472eced2a7f21857cc4c4f3f">txq</a>));</div>
<div class="line"><span class="lineno">   46</span>        memset(w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a59c28b4ee9aa9444d539e436ea85e090">rxq</a>, 0, <span class="keyword">sizeof</span>(w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a59c28b4ee9aa9444d539e436ea85e090">rxq</a>));</div>
<div class="line"><span class="lineno">   47</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">   48</span> </div>
<div class="line"><span class="lineno">   49</span>err_desc_err:</div>
<div class="line"><span class="lineno">   50</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">   51</span>}</div>
<div class="ttc" id="agroup__xwos__lib__errno_html_ga2d1678d5a7cc8ce499643f3b8957def4"><div class="ttname"><a href="group__xwos__lib__errno.html#ga2d1678d5a7cc8ce499643f3b8957def4">EINVAL</a></div><div class="ttdeci">#define EINVAL</div><div class="ttdoc">Invalid argument</div><div class="ttdef"><b>Definition</b> <a href="errno_8h_source.html#l00052">errno.h:52</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00028">type.h:28</a></div></div>
<div class="ttc" id="astructxwds__spip_html_ae52401dbfbade6e5943d8ce82d55a416"><div class="ttname"><a href="structxwds__spip.html#ae52401dbfbade6e5943d8ce82d55a416">xwds_spip::bus</a></div><div class="ttdeci">struct xwds_spim * bus</div><div class="ttdef"><b>Definition</b> <a href="spi_2peripheral_8h_source.html#l00051">peripheral.h:51</a></div></div>
<div class="ttc" id="astructxwds__w25qxx__cmd_html"><div class="ttname"><a href="structxwds__w25qxx__cmd.html">xwds_w25qxx_cmd</a></div><div class="ttdoc">W25QXX Flash 命令</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00151">device.h:151</a></div></div>
<div class="ttc" id="astructxwds__w25qxx_html"><div class="ttname"><a href="structxwds__w25qxx.html">xwds_w25qxx</a></div><div class="ttdoc">W25QXX Flash 设备</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00172">device.h:172</a></div></div>
<div class="ttc" id="astructxwds__w25qxx_html_a7574da13e1e4360d5754721ed016b97b"><div class="ttname"><a href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">xwds_w25qxx::cmdtbl</a></div><div class="ttdeci">const struct xwds_w25qxx_cmd * cmdtbl</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00177">device.h:177</a></div></div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_aa3cbbeeb4bde0bbf45fa1b3fda485242_icgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_aa3cbbeeb4bde0bbf45fa1b3fda485242_icgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_aa3cbbeeb4bde0bbf45fa1b3fda485242_icgraph" id="aspi_2flash_2w25qxx_2driver_8c_aa3cbbeeb4bde0bbf45fa1b3fda485242_icgraph">
<area shape="rect" title="W25QXX基本驱动：启动设备" alt="" coords="233,5,396,31"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#ae8d51ce0e2b4be67eed2bf18ca5fbbef" title="W25QXX基本驱动：暂停设备" alt="" coords="5,5,185,31"/>
<area shape="poly" title=" " alt="" coords="220,21,186,21,186,15,220,15"/>
</map>
</div>

</div>
</div>
<a id="acba3c84b05d941d3571992ec61080983" name="acba3c84b05d941d3571992ec61080983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acba3c84b05d941d3571992ec61080983">&#9670;&#160;</a></span>xwds_w25qxx_drv_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_drv_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__device.html">xwds_device</a> *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX基本驱动：停止设备 </p>
<p>&lt; 去除未使用变量的警告</p>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00054">54</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">   55</span>{</div>
<div class="line"><span class="lineno">   56</span>        <a class="code hl_define" href="group__xwos__standard.html#ga56f3f47f5e509a2a67d1b43cd52338c2">XWOS_UNUSED</a>(dev);</div>
<div class="line"><span class="lineno">   57</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">   58</span>}</div>
<div class="ttc" id="agroup__xwos__standard_html_ga56f3f47f5e509a2a67d1b43cd52338c2"><div class="ttname"><a href="group__xwos__standard.html#ga56f3f47f5e509a2a67d1b43cd52338c2">XWOS_UNUSED</a></div><div class="ttdeci">#define XWOS_UNUSED(x)</div><div class="ttdef"><b>Definition</b> <a href="xwos_2standard_8h_source.html#l00066">standard.h:66</a></div></div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_acba3c84b05d941d3571992ec61080983_icgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_acba3c84b05d941d3571992ec61080983_icgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_acba3c84b05d941d3571992ec61080983_icgraph" id="aspi_2flash_2w25qxx_2driver_8c_acba3c84b05d941d3571992ec61080983_icgraph">
<area shape="rect" title="W25QXX基本驱动：停止设备" alt="" coords="240,5,403,31"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#abb8d26f8fd346a899dff74a8be8c0107" title="W25QXX基本驱动：继续设备" alt="" coords="5,5,192,31"/>
<area shape="poly" title=" " alt="" coords="226,21,192,21,192,15,226,15"/>
</map>
</div>

</div>
</div>
<a id="abb8d26f8fd346a899dff74a8be8c0107" name="abb8d26f8fd346a899dff74a8be8c0107"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb8d26f8fd346a899dff74a8be8c0107">&#9670;&#160;</a></span>xwds_w25qxx_drv_suspend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_drv_suspend </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__device.html">xwds_device</a> *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX基本驱动：继续设备 </p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00068">68</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">   69</span>{</div>
<div class="line"><span class="lineno">   70</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#acba3c84b05d941d3571992ec61080983">xwds_w25qxx_drv_stop</a>(dev);</div>
<div class="line"><span class="lineno">   71</span>}</div>
<div class="ttc" id="aspi_2flash_2w25qxx_2driver_8c_html_acba3c84b05d941d3571992ec61080983"><div class="ttname"><a href="spi_2flash_2w25qxx_2driver_8c.html#acba3c84b05d941d3571992ec61080983">xwds_w25qxx_drv_stop</a></div><div class="ttdeci">xwer_t xwds_w25qxx_drv_stop(struct xwds_device *dev)</div><div class="ttdoc">W25QXX基本驱动：停止设备</div><div class="ttdef"><b>Definition</b> <a href="spi_2flash_2w25qxx_2driver_8c_source.html#l00054">driver.c:54</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_abb8d26f8fd346a899dff74a8be8c0107_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_abb8d26f8fd346a899dff74a8be8c0107_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_abb8d26f8fd346a899dff74a8be8c0107_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_abb8d26f8fd346a899dff74a8be8c0107_cgraph">
<area shape="rect" title="W25QXX基本驱动：继续设备" alt="" coords="5,5,192,31"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#acba3c84b05d941d3571992ec61080983" title="W25QXX基本驱动：停止设备" alt="" coords="240,5,403,31"/>
<area shape="poly" title=" " alt="" coords="192,15,226,15,226,21,192,21"/>
</map>
</div>

</div>
</div>
<a id="a9fcd3633d0d26580d4b47e92085c4fd8" name="a9fcd3633d0d26580d4b47e92085c4fd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fcd3633d0d26580d4b47e92085c4fd8">&#9670;&#160;</a></span>xwds_w25qxx_erase_32kblk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_erase_32kblk </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：擦除W25QXX的32KiB的块 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>起始地址 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p><code>to</code> 表示等待超时的时间点：</p><ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00584">584</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  585</span>{</div>
<div class="line"><span class="lineno">  586</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx__cmd.html">xwds_w25qxx_cmd</a> cmd;</div>
<div class="line"><span class="lineno">  587</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  588</span> </div>
<div class="line"><span class="lineno">  589</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(w25qxx, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  590</span> </div>
<div class="line"><span class="lineno">  591</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a9f8f2be10968c8ad18f21a70bca19575">xwds_w25qxx_write_enable</a>(w25qxx, to);</div>
<div class="line"><span class="lineno">  592</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  593</span>                <span class="keywordflow">goto</span> err_we;</div>
<div class="line"><span class="lineno">  594</span>        }</div>
<div class="line"><span class="lineno">  595</span>        cmd = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>[<a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caadaf39d5cf8c381d81ac1b92166e6f320">XWDS_W25QXX_CMD_32KBLOCK_ERASE</a>];</div>
<div class="line"><span class="lineno">  596</span>        <span class="keywordflow">if</span> (1 != cmd.existing) {</div>
<div class="line"><span class="lineno">  597</span>                rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#ga91457bbf35f0f1085619a99423bb1f33">ENOTSUP</a>;</div>
<div class="line"><span class="lineno">  598</span>                <span class="keywordflow">goto</span> err_not_support;</div>
<div class="line"><span class="lineno">  599</span>        }</div>
<div class="line"><span class="lineno">  600</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981">xwds_w25qxx_ctrl</a>(w25qxx,</div>
<div class="line"><span class="lineno">  601</span>                              cmd.instruction,</div>
<div class="line"><span class="lineno">  602</span>                              cmd.address_size, <a class="code hl_variable" href="structxwds__w25qxx__cmd.html#a5b33edfa65ca5b16282b0ec9e2c38bba">address</a>,</div>
<div class="line"><span class="lineno">  603</span>                              cmd.dummy_cycles,</div>
<div class="line"><span class="lineno">  604</span>                              <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, to);</div>
<div class="line"><span class="lineno">  605</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  606</span>                <span class="keywordflow">goto</span> err_w25qxx_ctrl;</div>
<div class="line"><span class="lineno">  607</span>        }</div>
<div class="line"><span class="lineno">  608</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a328582aa3b74906784807bccd1ace3ee">xwds_w25qxx_wait_idle</a>(w25qxx, <a class="code hl_define" href="group__xwos__lib__type__time.html#gaf09def951be67b8f6a8a743fe86cf062">XWTM_MS</a>(1600), to);</div>
<div class="line"><span class="lineno">  609</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  610</span>                <span class="keywordflow">goto</span> err_chk_idle;</div>
<div class="line"><span class="lineno">  611</span>        }</div>
<div class="line"><span class="lineno">  612</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  613</span> </div>
<div class="line"><span class="lineno">  614</span>err_chk_idle:</div>
<div class="line"><span class="lineno">  615</span>err_w25qxx_ctrl:</div>
<div class="line"><span class="lineno">  616</span>err_not_support:</div>
<div class="line"><span class="lineno">  617</span>        <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a5805e3d7db94d1e680c1d504a418e8b5">xwds_w25qxx_write_disable</a>(w25qxx, to);</div>
<div class="line"><span class="lineno">  618</span>err_we:</div>
<div class="line"><span class="lineno">  619</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  620</span>}</div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga79e9d5d4b531cb0087debdb53f9515caadaf39d5cf8c381d81ac1b92166e6f320"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caadaf39d5cf8c381d81ac1b92166e6f320">XWDS_W25QXX_CMD_32KBLOCK_ERASE</a></div><div class="ttdeci">@ XWDS_W25QXX_CMD_32KBLOCK_ERASE</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00061">device.h:61</a></div></div>
<div class="ttc" id="agroup__xwos__lib__errno_html_ga91457bbf35f0f1085619a99423bb1f33"><div class="ttname"><a href="group__xwos__lib__errno.html#ga91457bbf35f0f1085619a99423bb1f33">ENOTSUP</a></div><div class="ttdeci">#define ENOTSUP</div><div class="ttdoc">Not supported</div><div class="ttdef"><b>Definition</b> <a href="errno_8h_source.html#l00147">errno.h:147</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type__time_html_gaf09def951be67b8f6a8a743fe86cf062"><div class="ttname"><a href="group__xwos__lib__type__time.html#gaf09def951be67b8f6a8a743fe86cf062">XWTM_MS</a></div><div class="ttdeci">#define XWTM_MS(ms)</div><div class="ttdoc">系统时间的单位：毫秒</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00756">type.h:756</a></div></div>
<div class="ttc" id="aspi_2flash_2w25qxx_2driver_8c_html_a1cbb15dfcbe39e7343a6f971bb3c7981"><div class="ttname"><a href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981">xwds_w25qxx_ctrl</a></div><div class="ttdeci">xwer_t xwds_w25qxx_ctrl(struct xwds_w25qxx *w25qxx, xwu8_t instruction, xwu8_t address_size, xwu32_t address, xwu32_t dummy_cycles, const xwu8_t txd[], xwu8_t *rxb, xwsz_t size, xwtm_t to)</div><div class="ttdoc">W25QXX API：向W25QXX发送指令</div><div class="ttdef"><b>Definition</b> <a href="spi_2flash_2w25qxx_2driver_8c_source.html#l00076">driver.c:76</a></div></div>
<div class="ttc" id="aspi_2flash_2w25qxx_2driver_8c_html_a328582aa3b74906784807bccd1ace3ee"><div class="ttname"><a href="spi_2flash_2w25qxx_2driver_8c.html#a328582aa3b74906784807bccd1ace3ee">xwds_w25qxx_wait_idle</a></div><div class="ttdeci">xwer_t xwds_w25qxx_wait_idle(struct xwds_w25qxx *w25qxx, xwtm_t period, xwtm_t to)</div><div class="ttdoc">W25QXX API：等待W25QXX是否空闲</div><div class="ttdef"><b>Definition</b> <a href="spi_2flash_2w25qxx_2driver_8c_source.html#l00355">driver.c:355</a></div></div>
<div class="ttc" id="aspi_2flash_2w25qxx_2driver_8c_html_a5805e3d7db94d1e680c1d504a418e8b5"><div class="ttname"><a href="spi_2flash_2w25qxx_2driver_8c.html#a5805e3d7db94d1e680c1d504a418e8b5">xwds_w25qxx_write_disable</a></div><div class="ttdeci">xwer_t xwds_w25qxx_write_disable(struct xwds_w25qxx *w25qxx, xwtm_t to)</div><div class="ttdoc">W25QXX API：关闭W25QXX的写操作</div><div class="ttdef"><b>Definition</b> <a href="spi_2flash_2w25qxx_2driver_8c_source.html#l00268">driver.c:268</a></div></div>
<div class="ttc" id="aspi_2flash_2w25qxx_2driver_8c_html_a9f8f2be10968c8ad18f21a70bca19575"><div class="ttname"><a href="spi_2flash_2w25qxx_2driver_8c.html#a9f8f2be10968c8ad18f21a70bca19575">xwds_w25qxx_write_enable</a></div><div class="ttdeci">xwer_t xwds_w25qxx_write_enable(struct xwds_w25qxx *w25qxx, xwtm_t to)</div><div class="ttdoc">W25QXX API：开启W25QXX的写操作</div><div class="ttdef"><b>Definition</b> <a href="spi_2flash_2w25qxx_2driver_8c_source.html#l00228">driver.c:228</a></div></div>
<div class="ttc" id="astructxwds__w25qxx__cmd_html_a5b33edfa65ca5b16282b0ec9e2c38bba"><div class="ttname"><a href="structxwds__w25qxx__cmd.html#a5b33edfa65ca5b16282b0ec9e2c38bba">xwds_w25qxx_cmd::address</a></div><div class="ttdeci">xwu32_t address</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00155">device.h:155</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a9fcd3633d0d26580d4b47e92085c4fd8_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a9fcd3633d0d26580d4b47e92085c4fd8_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a9fcd3633d0d26580d4b47e92085c4fd8_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_a9fcd3633d0d26580d4b47e92085c4fd8_cgraph">
<area shape="rect" title="W25QXX API：擦除W25QXX的32KiB的块" alt="" coords="5,90,195,115"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981" title="W25QXX API：向W25QXX发送指令" alt="" coords="923,59,1053,84"/>
<area shape="poly" title=" " alt="" coords="134,87,242,53,417,16,489,6,557,3,625,5,698,12,875,40,932,53,931,58,874,45,697,17,625,10,557,8,490,12,418,21,243,58,136,92"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a328582aa3b74906784807bccd1ace3ee" title="W25QXX API：等待W25QXX是否空闲" alt="" coords="243,163,405,188"/>
<area shape="poly" title=" " alt="" coords="141,112,272,156,270,161,139,118"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a5805e3d7db94d1e680c1d504a418e8b5" title="W25QXX API：关闭W25QXX的写操作" alt="" coords="687,232,875,258"/>
<area shape="poly" title=" " alt="" coords="117,113,168,156,247,215,295,245,346,273,399,298,454,316,505,327,546,331,587,327,638,316,669,306,699,292,749,263,752,268,701,297,671,311,639,321,588,332,546,336,504,332,453,321,397,303,343,278,292,250,244,220,165,161,114,117"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9f8f2be10968c8ad18f21a70bca19575" title="W25QXX API：开启W25QXX的写操作" alt="" coords="453,34,639,59"/>
<area shape="poly" title=" " alt="" coords="194,88,439,57,440,62,195,93"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="1101,34,1239,59"/>
<area shape="poly" title=" " alt="" coords="1053,60,1088,55,1088,60,1054,65"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="1105,83,1235,108"/>
<area shape="poly" title=" " alt="" coords="1054,78,1091,83,1091,88,1053,83"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="1287,34,1403,59"/>
<area shape="poly" title=" " alt="" coords="1239,44,1273,44,1273,49,1239,49"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="1451,34,1581,59"/>
<area shape="poly" title=" " alt="" coords="1403,44,1437,44,1437,49,1403,49"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="1290,83,1399,108"/>
<area shape="poly" title=" " alt="" coords="1235,93,1276,93,1276,98,1235,98"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="1455,83,1577,108"/>
<area shape="poly" title=" " alt="" coords="1399,93,1441,93,1441,98,1399,98"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9e678590aa88b04bc61c35777b4ebd36" title="W25QXX API：检测W25QXX是否空闲" alt="" coords="459,83,633,108"/>
<area shape="poly" title=" " alt="" coords="350,160,452,117,477,109,479,114,454,122,352,165"/>
<area shape="rect" href="group__xwos__thd.html#ga067c6169bf591a14813b004494e41f45" title="XWOS API：线程睡眠到一个时间点" alt="" coords="475,231,617,256"/>
<area shape="poly" title=" " alt="" coords="363,186,454,216,485,225,484,230,453,221,361,191"/>
<area shape="rect" href="group__xwos__lib__type__time.html#ga123646dbc0c9e01824ef8833ec7b8589" title="将两个系统时间相加，并检查溢出" alt="" coords="484,280,608,306"/>
<area shape="poly" title=" " alt="" coords="341,186,389,226,421,248,454,266,472,273,470,278,452,271,418,252,386,230,337,190"/>
<area shape="rect" href="group__xwos__lib__type__time.html#gad9ca66730be82d000b7f7ad74eb835b4" title="比较两个系统时间" alt="" coords="503,132,589,158"/>
<area shape="poly" title=" " alt="" coords="405,162,489,150,489,155,406,167"/>
<area shape="rect" href="group__xwos__time.html#ga0a72e026418c2423692bf9c1158101ae" title="XWOS API：获取当前CPU的系统时间点" alt="" coords="503,182,589,207"/>
<area shape="poly" title=" " alt="" coords="406,180,490,187,489,192,406,185"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#ac69def306dc24b0debf5e3d5319f1b47" title="W25QXX API：读取W25QXX的SR寄存器" alt="" coords="703,84,858,110"/>
<area shape="poly" title=" " alt="" coords="634,93,689,94,689,99,634,99"/>
<area shape="poly" title=" " alt="" coords="858,85,908,79,909,84,859,90"/>
<area shape="poly" title=" " alt="" coords="796,230,959,91,963,95,799,234"/>
<area shape="poly" title=" " alt="" coords="639,49,909,64,908,70,639,54"/>
<area shape="poly" title=" " alt="" coords="606,56,709,79,707,84,605,62"/>
</map>
</div>

</div>
</div>
<a id="ab4aa445a8fe937709bfec87b6964d69b" name="ab4aa445a8fe937709bfec87b6964d69b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4aa445a8fe937709bfec87b6964d69b">&#9670;&#160;</a></span>xwds_w25qxx_erase_64kblk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_erase_64kblk </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：擦除W25QXX的64KiB的块 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>起始地址 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p><code>to</code> 表示等待超时的时间点：</p><ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00623">623</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  624</span>{</div>
<div class="line"><span class="lineno">  625</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx__cmd.html">xwds_w25qxx_cmd</a> cmd;</div>
<div class="line"><span class="lineno">  626</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  627</span> </div>
<div class="line"><span class="lineno">  628</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(w25qxx, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  629</span> </div>
<div class="line"><span class="lineno">  630</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a9f8f2be10968c8ad18f21a70bca19575">xwds_w25qxx_write_enable</a>(w25qxx, to);</div>
<div class="line"><span class="lineno">  631</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  632</span>                <span class="keywordflow">goto</span> err_we;</div>
<div class="line"><span class="lineno">  633</span>        }</div>
<div class="line"><span class="lineno">  634</span>        cmd = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>[<a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa09c184eac576fe749ccd6488d70babec">XWDS_W25QXX_CMD_64KBLOCK_ERASE</a>];</div>
<div class="line"><span class="lineno">  635</span>        <span class="keywordflow">if</span> (1 != cmd.existing) {</div>
<div class="line"><span class="lineno">  636</span>                rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#ga91457bbf35f0f1085619a99423bb1f33">ENOTSUP</a>;</div>
<div class="line"><span class="lineno">  637</span>                <span class="keywordflow">goto</span> err_not_support;</div>
<div class="line"><span class="lineno">  638</span>        }</div>
<div class="line"><span class="lineno">  639</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981">xwds_w25qxx_ctrl</a>(w25qxx,</div>
<div class="line"><span class="lineno">  640</span>                              cmd.instruction,</div>
<div class="line"><span class="lineno">  641</span>                              cmd.address_size, <a class="code hl_variable" href="structxwds__w25qxx__cmd.html#a5b33edfa65ca5b16282b0ec9e2c38bba">address</a>,</div>
<div class="line"><span class="lineno">  642</span>                              cmd.dummy_cycles,</div>
<div class="line"><span class="lineno">  643</span>                              <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, to);</div>
<div class="line"><span class="lineno">  644</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  645</span>                <span class="keywordflow">goto</span> err_w25qxx_ctrl;</div>
<div class="line"><span class="lineno">  646</span>        }</div>
<div class="line"><span class="lineno">  647</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a328582aa3b74906784807bccd1ace3ee">xwds_w25qxx_wait_idle</a>(w25qxx, <a class="code hl_define" href="group__xwos__lib__type__time.html#gaf09def951be67b8f6a8a743fe86cf062">XWTM_MS</a>(2000), to);</div>
<div class="line"><span class="lineno">  648</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  649</span>                <span class="keywordflow">goto</span> err_chk_idle;</div>
<div class="line"><span class="lineno">  650</span>        }</div>
<div class="line"><span class="lineno">  651</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  652</span> </div>
<div class="line"><span class="lineno">  653</span>err_chk_idle:</div>
<div class="line"><span class="lineno">  654</span>err_w25qxx_ctrl:</div>
<div class="line"><span class="lineno">  655</span>err_not_support:</div>
<div class="line"><span class="lineno">  656</span>        <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a5805e3d7db94d1e680c1d504a418e8b5">xwds_w25qxx_write_disable</a>(w25qxx, to);</div>
<div class="line"><span class="lineno">  657</span>err_we:</div>
<div class="line"><span class="lineno">  658</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  659</span>}</div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga79e9d5d4b531cb0087debdb53f9515caa09c184eac576fe749ccd6488d70babec"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa09c184eac576fe749ccd6488d70babec">XWDS_W25QXX_CMD_64KBLOCK_ERASE</a></div><div class="ttdeci">@ XWDS_W25QXX_CMD_64KBLOCK_ERASE</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00062">device.h:62</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_ab4aa445a8fe937709bfec87b6964d69b_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_ab4aa445a8fe937709bfec87b6964d69b_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_ab4aa445a8fe937709bfec87b6964d69b_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_ab4aa445a8fe937709bfec87b6964d69b_cgraph">
<area shape="rect" title="W25QXX API：擦除W25QXX的64KiB的块" alt="" coords="5,90,195,115"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981" title="W25QXX API：向W25QXX发送指令" alt="" coords="923,59,1053,84"/>
<area shape="poly" title=" " alt="" coords="134,87,242,53,417,16,489,6,557,3,625,5,698,12,875,40,932,53,931,58,874,45,697,17,625,10,557,8,490,12,418,21,243,58,136,92"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a328582aa3b74906784807bccd1ace3ee" title="W25QXX API：等待W25QXX是否空闲" alt="" coords="243,163,405,188"/>
<area shape="poly" title=" " alt="" coords="141,112,272,156,270,161,139,118"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a5805e3d7db94d1e680c1d504a418e8b5" title="W25QXX API：关闭W25QXX的写操作" alt="" coords="687,232,875,258"/>
<area shape="poly" title=" " alt="" coords="117,113,168,156,247,215,295,245,346,273,399,298,454,316,505,327,546,331,587,327,638,316,669,306,699,292,749,263,752,268,701,297,671,311,639,321,588,332,546,336,504,332,453,321,397,303,343,278,292,250,244,220,165,161,114,117"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9f8f2be10968c8ad18f21a70bca19575" title="W25QXX API：开启W25QXX的写操作" alt="" coords="453,34,639,59"/>
<area shape="poly" title=" " alt="" coords="194,88,439,57,440,62,195,93"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="1101,34,1239,59"/>
<area shape="poly" title=" " alt="" coords="1053,60,1088,55,1088,60,1054,65"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="1105,83,1235,108"/>
<area shape="poly" title=" " alt="" coords="1054,78,1091,83,1091,88,1053,83"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="1287,34,1403,59"/>
<area shape="poly" title=" " alt="" coords="1239,44,1273,44,1273,49,1239,49"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="1451,34,1581,59"/>
<area shape="poly" title=" " alt="" coords="1403,44,1437,44,1437,49,1403,49"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="1290,83,1399,108"/>
<area shape="poly" title=" " alt="" coords="1235,93,1276,93,1276,98,1235,98"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="1455,83,1577,108"/>
<area shape="poly" title=" " alt="" coords="1399,93,1441,93,1441,98,1399,98"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9e678590aa88b04bc61c35777b4ebd36" title="W25QXX API：检测W25QXX是否空闲" alt="" coords="459,83,633,108"/>
<area shape="poly" title=" " alt="" coords="350,160,452,117,477,109,479,114,454,122,352,165"/>
<area shape="rect" href="group__xwos__thd.html#ga067c6169bf591a14813b004494e41f45" title="XWOS API：线程睡眠到一个时间点" alt="" coords="475,231,617,256"/>
<area shape="poly" title=" " alt="" coords="363,186,454,216,485,225,484,230,453,221,361,191"/>
<area shape="rect" href="group__xwos__lib__type__time.html#ga123646dbc0c9e01824ef8833ec7b8589" title="将两个系统时间相加，并检查溢出" alt="" coords="484,280,608,306"/>
<area shape="poly" title=" " alt="" coords="341,186,389,226,421,248,454,266,472,273,470,278,452,271,418,252,386,230,337,190"/>
<area shape="rect" href="group__xwos__lib__type__time.html#gad9ca66730be82d000b7f7ad74eb835b4" title="比较两个系统时间" alt="" coords="503,132,589,158"/>
<area shape="poly" title=" " alt="" coords="405,162,489,150,489,155,406,167"/>
<area shape="rect" href="group__xwos__time.html#ga0a72e026418c2423692bf9c1158101ae" title="XWOS API：获取当前CPU的系统时间点" alt="" coords="503,182,589,207"/>
<area shape="poly" title=" " alt="" coords="406,180,490,187,489,192,406,185"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#ac69def306dc24b0debf5e3d5319f1b47" title="W25QXX API：读取W25QXX的SR寄存器" alt="" coords="703,84,858,110"/>
<area shape="poly" title=" " alt="" coords="634,93,689,94,689,99,634,99"/>
<area shape="poly" title=" " alt="" coords="858,85,908,79,909,84,859,90"/>
<area shape="poly" title=" " alt="" coords="796,230,959,91,963,95,799,234"/>
<area shape="poly" title=" " alt="" coords="639,49,909,64,908,70,639,54"/>
<area shape="poly" title=" " alt="" coords="606,56,709,79,707,84,605,62"/>
</map>
</div>

</div>
</div>
<a id="aeafca2ee95063cdd1f1880baddac68f9" name="aeafca2ee95063cdd1f1880baddac68f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeafca2ee95063cdd1f1880baddac68f9">&#9670;&#160;</a></span>xwds_w25qxx_erase_chip()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_erase_chip </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：擦除W25QXX的全部数据 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p><code>to</code> 表示等待超时的时间点：</p><ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00662">662</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  663</span>{</div>
<div class="line"><span class="lineno">  664</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx__cmd.html">xwds_w25qxx_cmd</a> cmd;</div>
<div class="line"><span class="lineno">  665</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  666</span> </div>
<div class="line"><span class="lineno">  667</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(w25qxx, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  668</span> </div>
<div class="line"><span class="lineno">  669</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a9f8f2be10968c8ad18f21a70bca19575">xwds_w25qxx_write_enable</a>(w25qxx, to);</div>
<div class="line"><span class="lineno">  670</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  671</span>                <span class="keywordflow">goto</span> err_we;</div>
<div class="line"><span class="lineno">  672</span>        }</div>
<div class="line"><span class="lineno">  673</span>        cmd = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>[<a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa4551aee418e7f59bcb52abd1788e2893">XWDS_W25QXX_CMD_CHIP_ERASE</a>];</div>
<div class="line"><span class="lineno">  674</span>        <span class="keywordflow">if</span> (1 != cmd.existing) {</div>
<div class="line"><span class="lineno">  675</span>                rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#ga91457bbf35f0f1085619a99423bb1f33">ENOTSUP</a>;</div>
<div class="line"><span class="lineno">  676</span>                <span class="keywordflow">goto</span> err_not_support;</div>
<div class="line"><span class="lineno">  677</span>        }</div>
<div class="line"><span class="lineno">  678</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981">xwds_w25qxx_ctrl</a>(w25qxx,</div>
<div class="line"><span class="lineno">  679</span>                              cmd.instruction,</div>
<div class="line"><span class="lineno">  680</span>                              cmd.address_size, cmd.address,</div>
<div class="line"><span class="lineno">  681</span>                              cmd.dummy_cycles,</div>
<div class="line"><span class="lineno">  682</span>                              <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, to);</div>
<div class="line"><span class="lineno">  683</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  684</span>                <span class="keywordflow">goto</span> err_w25qxx_ctrl;</div>
<div class="line"><span class="lineno">  685</span>        }</div>
<div class="line"><span class="lineno">  686</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a328582aa3b74906784807bccd1ace3ee">xwds_w25qxx_wait_idle</a>(w25qxx, <a class="code hl_define" href="group__xwos__lib__type__time.html#gaf09def951be67b8f6a8a743fe86cf062">XWTM_MS</a>(2000), to);</div>
<div class="line"><span class="lineno">  687</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  688</span>                <span class="keywordflow">goto</span> err_chk_idle;</div>
<div class="line"><span class="lineno">  689</span>        }</div>
<div class="line"><span class="lineno">  690</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  691</span> </div>
<div class="line"><span class="lineno">  692</span>err_chk_idle:</div>
<div class="line"><span class="lineno">  693</span>err_w25qxx_ctrl:</div>
<div class="line"><span class="lineno">  694</span>err_not_support:</div>
<div class="line"><span class="lineno">  695</span>        <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a5805e3d7db94d1e680c1d504a418e8b5">xwds_w25qxx_write_disable</a>(w25qxx, to);</div>
<div class="line"><span class="lineno">  696</span>err_we:</div>
<div class="line"><span class="lineno">  697</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  698</span>}</div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga79e9d5d4b531cb0087debdb53f9515caa4551aee418e7f59bcb52abd1788e2893"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa4551aee418e7f59bcb52abd1788e2893">XWDS_W25QXX_CMD_CHIP_ERASE</a></div><div class="ttdeci">@ XWDS_W25QXX_CMD_CHIP_ERASE</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00064">device.h:64</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_aeafca2ee95063cdd1f1880baddac68f9_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_aeafca2ee95063cdd1f1880baddac68f9_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_aeafca2ee95063cdd1f1880baddac68f9_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_aeafca2ee95063cdd1f1880baddac68f9_cgraph">
<area shape="rect" title="W25QXX API：擦除W25QXX的全部数据" alt="" coords="5,90,180,116"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981" title="W25QXX API：向W25QXX发送指令" alt="" coords="908,60,1039,85"/>
<area shape="poly" title=" " alt="" coords="125,88,227,54,402,16,474,6,542,3,610,5,683,12,861,40,918,53,916,59,859,46,682,18,610,10,542,8,475,12,403,21,229,59,126,93"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a328582aa3b74906784807bccd1ace3ee" title="W25QXX API：等待W25QXX是否空闲" alt="" coords="228,164,391,189"/>
<area shape="poly" title=" " alt="" coords="132,113,259,157,257,162,130,118"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a5805e3d7db94d1e680c1d504a418e8b5" title="W25QXX API：关闭W25QXX的写操作" alt="" coords="672,233,860,258"/>
<area shape="poly" title=" " alt="" coords="109,114,159,157,236,216,283,246,333,274,385,298,439,316,490,328,531,331,572,328,623,316,654,306,684,293,734,264,737,268,686,298,656,311,625,322,573,333,531,337,490,333,438,322,383,303,330,279,280,251,233,221,156,162,106,118"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9f8f2be10968c8ad18f21a70bca19575" title="W25QXX API：开启W25QXX的写操作" alt="" coords="439,34,624,60"/>
<area shape="poly" title=" " alt="" coords="180,89,425,58,426,63,180,95"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="1087,34,1224,60"/>
<area shape="poly" title=" " alt="" coords="1039,61,1073,56,1074,61,1039,66"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="1090,84,1221,109"/>
<area shape="poly" title=" " alt="" coords="1039,78,1077,83,1076,89,1039,84"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="1272,34,1388,60"/>
<area shape="poly" title=" " alt="" coords="1224,44,1258,44,1258,50,1224,50"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="1436,34,1567,60"/>
<area shape="poly" title=" " alt="" coords="1388,44,1423,44,1423,50,1388,50"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="1275,84,1385,109"/>
<area shape="poly" title=" " alt="" coords="1221,94,1262,94,1262,99,1221,99"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="1440,84,1563,109"/>
<area shape="poly" title=" " alt="" coords="1385,94,1426,94,1426,99,1385,99"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9e678590aa88b04bc61c35777b4ebd36" title="W25QXX API：检测W25QXX是否空闲" alt="" coords="444,84,619,109"/>
<area shape="poly" title=" " alt="" coords="336,161,438,118,462,110,464,115,440,123,338,166"/>
<area shape="rect" href="group__xwos__thd.html#ga067c6169bf591a14813b004494e41f45" title="XWOS API：线程睡眠到一个时间点" alt="" coords="461,232,602,257"/>
<area shape="poly" title=" " alt="" coords="348,187,439,216,470,225,469,231,438,222,347,192"/>
<area shape="rect" href="group__xwos__lib__type__time.html#ga123646dbc0c9e01824ef8833ec7b8589" title="将两个系统时间相加，并检查溢出" alt="" coords="469,281,593,306"/>
<area shape="poly" title=" " alt="" coords="326,187,374,227,406,248,440,267,457,274,455,279,438,272,403,253,371,231,323,191"/>
<area shape="rect" href="group__xwos__lib__type__time.html#gad9ca66730be82d000b7f7ad74eb835b4" title="比较两个系统时间" alt="" coords="488,133,575,158"/>
<area shape="poly" title=" " alt="" coords="391,162,474,151,475,156,391,168"/>
<area shape="rect" href="group__xwos__time.html#ga0a72e026418c2423692bf9c1158101ae" title="XWOS API：获取当前CPU的系统时间点" alt="" coords="489,182,574,208"/>
<area shape="poly" title=" " alt="" coords="391,180,475,188,475,193,391,186"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#ac69def306dc24b0debf5e3d5319f1b47" title="W25QXX API：读取W25QXX的SR寄存器" alt="" coords="689,85,843,110"/>
<area shape="poly" title=" " alt="" coords="619,94,675,94,675,100,619,99"/>
<area shape="poly" title=" " alt="" coords="843,86,894,79,894,85,844,91"/>
<area shape="poly" title=" " alt="" coords="781,231,945,92,948,96,784,235"/>
<area shape="poly" title=" " alt="" coords="624,50,894,65,894,70,624,55"/>
<area shape="poly" title=" " alt="" coords="592,57,694,79,693,85,591,62"/>
</map>
</div>

</div>
</div>
<a id="acbd1ec4eb2e5d370bc72754432c6203f" name="acbd1ec4eb2e5d370bc72754432c6203f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbd1ec4eb2e5d370bc72754432c6203f">&#9670;&#160;</a></span>xwds_w25qxx_erase_sector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_erase_sector </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：擦除W25QXX的sector </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>起始地址 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程 </li>
</ul>
</dd></dl>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00545">545</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  546</span>{</div>
<div class="line"><span class="lineno">  547</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx__cmd.html">xwds_w25qxx_cmd</a> cmd;</div>
<div class="line"><span class="lineno">  548</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  549</span> </div>
<div class="line"><span class="lineno">  550</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(w25qxx, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a9f8f2be10968c8ad18f21a70bca19575">xwds_w25qxx_write_enable</a>(w25qxx, to);</div>
<div class="line"><span class="lineno">  553</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  554</span>                <span class="keywordflow">goto</span> err_we;</div>
<div class="line"><span class="lineno">  555</span>        }</div>
<div class="line"><span class="lineno">  556</span>        cmd = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>[<a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caaeaf5700130da37837d6f9b85e94908c2">XWDS_W25QXX_CMD_SECTOR_ERASE</a>];</div>
<div class="line"><span class="lineno">  557</span>        <span class="keywordflow">if</span> (1 != cmd.existing) {</div>
<div class="line"><span class="lineno">  558</span>                rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#ga91457bbf35f0f1085619a99423bb1f33">ENOTSUP</a>;</div>
<div class="line"><span class="lineno">  559</span>                <span class="keywordflow">goto</span> err_not_support;</div>
<div class="line"><span class="lineno">  560</span>        }</div>
<div class="line"><span class="lineno">  561</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981">xwds_w25qxx_ctrl</a>(w25qxx,</div>
<div class="line"><span class="lineno">  562</span>                              cmd.instruction,</div>
<div class="line"><span class="lineno">  563</span>                              cmd.address_size, <a class="code hl_variable" href="structxwds__w25qxx__cmd.html#a5b33edfa65ca5b16282b0ec9e2c38bba">address</a>,</div>
<div class="line"><span class="lineno">  564</span>                              cmd.dummy_cycles,</div>
<div class="line"><span class="lineno">  565</span>                              <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, to);</div>
<div class="line"><span class="lineno">  566</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  567</span>                <span class="keywordflow">goto</span> err_w25qxx_ctrl;</div>
<div class="line"><span class="lineno">  568</span>        }</div>
<div class="line"><span class="lineno">  569</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a328582aa3b74906784807bccd1ace3ee">xwds_w25qxx_wait_idle</a>(w25qxx, <a class="code hl_define" href="group__xwos__lib__type__time.html#gaf09def951be67b8f6a8a743fe86cf062">XWTM_MS</a>(400), to);</div>
<div class="line"><span class="lineno">  570</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  571</span>                <span class="keywordflow">goto</span> err_chk_idle;</div>
<div class="line"><span class="lineno">  572</span>        }</div>
<div class="line"><span class="lineno">  573</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  574</span> </div>
<div class="line"><span class="lineno">  575</span>err_chk_idle:</div>
<div class="line"><span class="lineno">  576</span>err_w25qxx_ctrl:</div>
<div class="line"><span class="lineno">  577</span>err_not_support:</div>
<div class="line"><span class="lineno">  578</span>        <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a5805e3d7db94d1e680c1d504a418e8b5">xwds_w25qxx_write_disable</a>(w25qxx, to);</div>
<div class="line"><span class="lineno">  579</span>err_we:</div>
<div class="line"><span class="lineno">  580</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  581</span>}</div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga79e9d5d4b531cb0087debdb53f9515caaeaf5700130da37837d6f9b85e94908c2"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caaeaf5700130da37837d6f9b85e94908c2">XWDS_W25QXX_CMD_SECTOR_ERASE</a></div><div class="ttdeci">@ XWDS_W25QXX_CMD_SECTOR_ERASE</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00063">device.h:63</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_acbd1ec4eb2e5d370bc72754432c6203f_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_acbd1ec4eb2e5d370bc72754432c6203f_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_acbd1ec4eb2e5d370bc72754432c6203f_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_acbd1ec4eb2e5d370bc72754432c6203f_cgraph">
<area shape="rect" title="W25QXX API：擦除W25QXX的sector" alt="" coords="5,90,192,115"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981" title="W25QXX API：向W25QXX发送指令" alt="" coords="920,59,1051,84"/>
<area shape="poly" title=" " alt="" coords="133,87,239,53,414,16,487,6,554,3,622,5,695,12,873,40,930,53,928,58,871,45,695,17,622,10,555,8,487,12,415,21,241,58,134,92"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a328582aa3b74906784807bccd1ace3ee" title="W25QXX API：等待W25QXX是否空闲" alt="" coords="240,163,403,188"/>
<area shape="poly" title=" " alt="" coords="139,113,270,156,268,161,137,118"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a5805e3d7db94d1e680c1d504a418e8b5" title="W25QXX API：关闭W25QXX的写操作" alt="" coords="684,232,872,258"/>
<area shape="poly" title=" " alt="" coords="116,113,166,157,245,215,292,246,343,274,397,298,451,316,502,327,543,331,584,327,635,316,666,306,696,292,746,263,749,268,698,297,668,311,637,321,585,332,543,336,502,333,450,321,395,303,341,278,290,250,242,220,163,161,112,117"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9f8f2be10968c8ad18f21a70bca19575" title="W25QXX API：开启W25QXX的写操作" alt="" coords="451,34,636,59"/>
<area shape="poly" title=" " alt="" coords="192,88,436,57,437,62,192,93"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="1099,34,1236,59"/>
<area shape="poly" title=" " alt="" coords="1051,60,1085,55,1086,60,1051,65"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="1102,83,1233,108"/>
<area shape="poly" title=" " alt="" coords="1051,78,1089,83,1088,88,1051,83"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="1284,34,1400,59"/>
<area shape="poly" title=" " alt="" coords="1236,44,1270,44,1270,49,1236,49"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="1448,34,1579,59"/>
<area shape="poly" title=" " alt="" coords="1400,44,1435,44,1435,49,1400,49"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="1287,83,1397,108"/>
<area shape="poly" title=" " alt="" coords="1233,93,1274,93,1274,98,1233,98"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="1452,83,1575,108"/>
<area shape="poly" title=" " alt="" coords="1397,93,1438,93,1438,98,1397,98"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9e678590aa88b04bc61c35777b4ebd36" title="W25QXX API：检测W25QXX是否空闲" alt="" coords="456,83,631,108"/>
<area shape="poly" title=" " alt="" coords="348,160,450,117,474,109,476,115,452,122,350,165"/>
<area shape="rect" href="group__xwos__thd.html#ga067c6169bf591a14813b004494e41f45" title="XWOS API：线程睡眠到一个时间点" alt="" coords="473,231,614,256"/>
<area shape="poly" title=" " alt="" coords="360,186,451,216,482,225,481,230,450,221,359,191"/>
<area shape="rect" href="group__xwos__lib__type__time.html#ga123646dbc0c9e01824ef8833ec7b8589" title="将两个系统时间相加，并检查溢出" alt="" coords="481,280,605,306"/>
<area shape="poly" title=" " alt="" coords="338,186,386,226,418,248,452,267,469,274,467,279,450,271,415,252,383,230,335,191"/>
<area shape="rect" href="group__xwos__lib__type__time.html#gad9ca66730be82d000b7f7ad74eb835b4" title="比较两个系统时间" alt="" coords="500,132,587,158"/>
<area shape="poly" title=" " alt="" coords="403,162,486,150,487,155,403,167"/>
<area shape="rect" href="group__xwos__time.html#ga0a72e026418c2423692bf9c1158101ae" title="XWOS API：获取当前CPU的系统时间点" alt="" coords="501,182,586,207"/>
<area shape="poly" title=" " alt="" coords="403,180,487,187,487,192,403,185"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#ac69def306dc24b0debf5e3d5319f1b47" title="W25QXX API：读取W25QXX的SR寄存器" alt="" coords="701,84,855,110"/>
<area shape="poly" title=" " alt="" coords="631,94,687,94,687,99,631,99"/>
<area shape="poly" title=" " alt="" coords="855,85,906,79,906,84,856,90"/>
<area shape="poly" title=" " alt="" coords="793,230,957,91,960,95,796,234"/>
<area shape="poly" title=" " alt="" coords="636,49,906,65,906,70,636,54"/>
<area shape="poly" title=" " alt="" coords="604,57,706,79,705,84,603,62"/>
</map>
</div>

</div>
</div>
<a id="acc8d4892a9374530a0ae2be297d7c0b8" name="acc8d4892a9374530a0ae2be297d7c0b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc8d4892a9374530a0ae2be297d7c0b8">&#9670;&#160;</a></span>xwds_w25qxx_init_parameter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_init_parameter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：初始化W25QXX的参数 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程 </li>
</ul>
</dd></dl>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00178">178</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  179</span>{</div>
<div class="line"><span class="lineno">  180</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga846602bc6535386b1415f16f65ca50be">xwu64_t</a> uid;</div>
<div class="line"><span class="lineno">  181</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a> jid;</div>
<div class="line"><span class="lineno">  182</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gae84464fbf887686043158271f71505d9">xwu16_t</a> mid;</div>
<div class="line"><span class="lineno">  183</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a0be01296fe3e3ba7b61328591d617eb2">xwds_w25qxx_read_uid</a>(w25qxx, &amp;uid, to);</div>
<div class="line"><span class="lineno">  186</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  187</span>                <span class="keywordflow">goto</span> err_read_uid;</div>
<div class="line"><span class="lineno">  188</span>        }</div>
<div class="line"><span class="lineno">  189</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a2d215372b41e6bb9585f2fc01643f633">xwds_w25qxx_read_mid</a>(w25qxx, &amp;mid, to);</div>
<div class="line"><span class="lineno">  190</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  191</span>                <span class="keywordflow">goto</span> err_read_mid;</div>
<div class="line"><span class="lineno">  192</span>        }</div>
<div class="line"><span class="lineno">  193</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#aa46d8247222bb24f9a3b7cd8ce327864">xwds_w25qxx_read_jid</a>(w25qxx, &amp;jid, to);</div>
<div class="line"><span class="lineno">  194</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  195</span>                <span class="keywordflow">goto</span> err_read_jid;</div>
<div class="line"><span class="lineno">  196</span>        }</div>
<div class="line"><span class="lineno">  197</span>        <span class="keywordflow">switch</span> (w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a346d4fdc62da8ef8463bbfbc890ac17c">parameter</a>.<a class="code hl_variable" href="structxwds__w25qxx__parameter.html#af172c599e02f439ab31a40ce44a58f3a">mid</a>) {</div>
<div class="line"><span class="lineno">  198</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ggaab1f6637cb0bfcef5f29c8901a4158bea36596acb17ff26bdcfc7978a65b6ce5e">XWDS_W25Q80_MID</a>:</div>
<div class="line"><span class="lineno">  199</span>                w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a346d4fdc62da8ef8463bbfbc890ac17c">parameter</a>.<a class="code hl_variable" href="structxwds__w25qxx__parameter.html#a8324e6b061faba0fda27ea7c71a03033">size</a> = 1 * 1024 * 1024;</div>
<div class="line"><span class="lineno">  200</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  201</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ggaab1f6637cb0bfcef5f29c8901a4158bea958a95f7986ef5044e47531388d421af">XWDS_W25Q16_MID</a>:</div>
<div class="line"><span class="lineno">  202</span>                w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a346d4fdc62da8ef8463bbfbc890ac17c">parameter</a>.<a class="code hl_variable" href="structxwds__w25qxx__parameter.html#a8324e6b061faba0fda27ea7c71a03033">size</a> = 2 * 1024 * 1024;</div>
<div class="line"><span class="lineno">  203</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  204</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ggaab1f6637cb0bfcef5f29c8901a4158bea54e95c26c43eef9141637d084db3b6c8">XWDS_W25Q32_MID</a>:</div>
<div class="line"><span class="lineno">  205</span>                w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a346d4fdc62da8ef8463bbfbc890ac17c">parameter</a>.<a class="code hl_variable" href="structxwds__w25qxx__parameter.html#a8324e6b061faba0fda27ea7c71a03033">size</a> = 4 * 1024 * 1024;</div>
<div class="line"><span class="lineno">  206</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  207</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ggaab1f6637cb0bfcef5f29c8901a4158bea2e017df52ec78a69e572d92f263baeb2">XWDS_W25Q64_MID</a>:</div>
<div class="line"><span class="lineno">  208</span>                w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a346d4fdc62da8ef8463bbfbc890ac17c">parameter</a>.<a class="code hl_variable" href="structxwds__w25qxx__parameter.html#a8324e6b061faba0fda27ea7c71a03033">size</a> = 8 * 1024 * 1024;</div>
<div class="line"><span class="lineno">  209</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  210</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ggaab1f6637cb0bfcef5f29c8901a4158bea110749db438d4e5d6a875e1eb990f568">XWDS_W25Q128_MID</a>:</div>
<div class="line"><span class="lineno">  211</span>                w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a346d4fdc62da8ef8463bbfbc890ac17c">parameter</a>.<a class="code hl_variable" href="structxwds__w25qxx__parameter.html#a8324e6b061faba0fda27ea7c71a03033">size</a> = 16 * 1024 * 1024;</div>
<div class="line"><span class="lineno">  212</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  213</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ggaab1f6637cb0bfcef5f29c8901a4158bea6bea2971af47ce4e9186de22586f1d12">XWDS_W25Q256_MID</a>:</div>
<div class="line"><span class="lineno">  214</span>                w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a346d4fdc62da8ef8463bbfbc890ac17c">parameter</a>.<a class="code hl_variable" href="structxwds__w25qxx__parameter.html#a8324e6b061faba0fda27ea7c71a03033">size</a> = 32 * 1024 * 1024;</div>
<div class="line"><span class="lineno">  215</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  216</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  217</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  218</span>        }</div>
<div class="line"><span class="lineno">  219</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span>err_read_jid:</div>
<div class="line"><span class="lineno">  222</span>err_read_mid:</div>
<div class="line"><span class="lineno">  223</span>err_read_uid:</div>
<div class="line"><span class="lineno">  224</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  225</span>}</div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_ggaab1f6637cb0bfcef5f29c8901a4158bea110749db438d4e5d6a875e1eb990f568"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#ggaab1f6637cb0bfcef5f29c8901a4158bea110749db438d4e5d6a875e1eb990f568">XWDS_W25Q128_MID</a></div><div class="ttdeci">@ XWDS_W25Q128_MID</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00093">device.h:93</a></div></div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_ggaab1f6637cb0bfcef5f29c8901a4158bea2e017df52ec78a69e572d92f263baeb2"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#ggaab1f6637cb0bfcef5f29c8901a4158bea2e017df52ec78a69e572d92f263baeb2">XWDS_W25Q64_MID</a></div><div class="ttdeci">@ XWDS_W25Q64_MID</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00092">device.h:92</a></div></div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_ggaab1f6637cb0bfcef5f29c8901a4158bea36596acb17ff26bdcfc7978a65b6ce5e"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#ggaab1f6637cb0bfcef5f29c8901a4158bea36596acb17ff26bdcfc7978a65b6ce5e">XWDS_W25Q80_MID</a></div><div class="ttdeci">@ XWDS_W25Q80_MID</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00089">device.h:89</a></div></div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_ggaab1f6637cb0bfcef5f29c8901a4158bea54e95c26c43eef9141637d084db3b6c8"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#ggaab1f6637cb0bfcef5f29c8901a4158bea54e95c26c43eef9141637d084db3b6c8">XWDS_W25Q32_MID</a></div><div class="ttdeci">@ XWDS_W25Q32_MID</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00091">device.h:91</a></div></div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_ggaab1f6637cb0bfcef5f29c8901a4158bea6bea2971af47ce4e9186de22586f1d12"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#ggaab1f6637cb0bfcef5f29c8901a4158bea6bea2971af47ce4e9186de22586f1d12">XWDS_W25Q256_MID</a></div><div class="ttdeci">@ XWDS_W25Q256_MID</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00094">device.h:94</a></div></div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_ggaab1f6637cb0bfcef5f29c8901a4158bea958a95f7986ef5044e47531388d421af"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#ggaab1f6637cb0bfcef5f29c8901a4158bea958a95f7986ef5044e47531388d421af">XWDS_W25Q16_MID</a></div><div class="ttdeci">@ XWDS_W25Q16_MID</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00090">device.h:90</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga846602bc6535386b1415f16f65ca50be"><div class="ttname"><a href="group__xwos__lib__type.html#ga846602bc6535386b1415f16f65ca50be">xwu64_t</a></div><div class="ttdeci">uint64_t xwu64_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00303">type.h:303</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_gae84464fbf887686043158271f71505d9"><div class="ttname"><a href="group__xwos__lib__type.html#gae84464fbf887686043158271f71505d9">xwu16_t</a></div><div class="ttdeci">uint16_t xwu16_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00230">type.h:230</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_gaebfa962b7f93c0dd0b0d71111f3e2e91"><div class="ttname"><a href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a></div><div class="ttdeci">uint32_t xwu32_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00266">type.h:266</a></div></div>
<div class="ttc" id="aspi_2flash_2w25qxx_2driver_8c_html_a0be01296fe3e3ba7b61328591d617eb2"><div class="ttname"><a href="spi_2flash_2w25qxx_2driver_8c.html#a0be01296fe3e3ba7b61328591d617eb2">xwds_w25qxx_read_uid</a></div><div class="ttdeci">xwer_t xwds_w25qxx_read_uid(struct xwds_w25qxx *w25qxx, xwu64_t *uidbuf, xwtm_t to)</div><div class="ttdoc">W25QXX API：读取W25QXX的UID</div><div class="ttdef"><b>Definition</b> <a href="spi_2flash_2w25qxx_2driver_8c_source.html#l00375">driver.c:375</a></div></div>
<div class="ttc" id="aspi_2flash_2w25qxx_2driver_8c_html_a2d215372b41e6bb9585f2fc01643f633"><div class="ttname"><a href="spi_2flash_2w25qxx_2driver_8c.html#a2d215372b41e6bb9585f2fc01643f633">xwds_w25qxx_read_mid</a></div><div class="ttdeci">xwer_t xwds_w25qxx_read_mid(struct xwds_w25qxx *w25qxx, xwu16_t *midbuf, xwtm_t to)</div><div class="ttdoc">W25QXX API：读取W25QXX的MID</div><div class="ttdef"><b>Definition</b> <a href="spi_2flash_2w25qxx_2driver_8c_source.html#l00405">driver.c:405</a></div></div>
<div class="ttc" id="aspi_2flash_2w25qxx_2driver_8c_html_aa46d8247222bb24f9a3b7cd8ce327864"><div class="ttname"><a href="spi_2flash_2w25qxx_2driver_8c.html#aa46d8247222bb24f9a3b7cd8ce327864">xwds_w25qxx_read_jid</a></div><div class="ttdeci">xwer_t xwds_w25qxx_read_jid(struct xwds_w25qxx *w25qxx, xwu32_t *jidbuf, xwtm_t to)</div><div class="ttdoc">W25QXX API：读取W25QXX的JID</div><div class="ttdef"><b>Definition</b> <a href="spi_2flash_2w25qxx_2driver_8c_source.html#l00435">driver.c:435</a></div></div>
<div class="ttc" id="astructxwds__w25qxx__parameter_html_a8324e6b061faba0fda27ea7c71a03033"><div class="ttname"><a href="structxwds__w25qxx__parameter.html#a8324e6b061faba0fda27ea7c71a03033">xwds_w25qxx_parameter::size</a></div><div class="ttdeci">xwu32_t size</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00163">device.h:163</a></div></div>
<div class="ttc" id="astructxwds__w25qxx__parameter_html_af172c599e02f439ab31a40ce44a58f3a"><div class="ttname"><a href="structxwds__w25qxx__parameter.html#af172c599e02f439ab31a40ce44a58f3a">xwds_w25qxx_parameter::mid</a></div><div class="ttdeci">xwu16_t mid</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00165">device.h:165</a></div></div>
<div class="ttc" id="astructxwds__w25qxx_html_a346d4fdc62da8ef8463bbfbc890ac17c"><div class="ttname"><a href="structxwds__w25qxx.html#a346d4fdc62da8ef8463bbfbc890ac17c">xwds_w25qxx::parameter</a></div><div class="ttdeci">struct xwds_w25qxx_parameter parameter</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00176">device.h:176</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_acc8d4892a9374530a0ae2be297d7c0b8_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_acc8d4892a9374530a0ae2be297d7c0b8_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_acc8d4892a9374530a0ae2be297d7c0b8_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_acc8d4892a9374530a0ae2be297d7c0b8_cgraph">
<area shape="rect" title="W25QXX API：初始化W25QXX的参数" alt="" coords="5,55,200,80"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#aa46d8247222bb24f9a3b7cd8ce327864" title="W25QXX API：读取W25QXX的JID" alt="" coords="252,5,409,31"/>
<area shape="poly" title=" " alt="" coords="161,52,257,31,258,36,163,57"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a2d215372b41e6bb9585f2fc01643f633" title="W25QXX API：读取W25QXX的MID" alt="" coords="248,55,413,80"/>
<area shape="poly" title=" " alt="" coords="200,65,234,65,234,70,200,70"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a0be01296fe3e3ba7b61328591d617eb2" title="W25QXX API：读取W25QXX的UID" alt="" coords="250,104,411,129"/>
<area shape="poly" title=" " alt="" coords="163,77,258,98,257,104,161,83"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981" title="W25QXX API：向W25QXX发送指令" alt="" coords="461,55,592,80"/>
<area shape="poly" title=" " alt="" coords="382,28,463,49,461,54,381,33"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="640,29,777,55"/>
<area shape="poly" title=" " alt="" coords="592,56,626,51,627,56,593,61"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="643,79,774,104"/>
<area shape="poly" title=" " alt="" coords="593,73,630,78,629,84,592,79"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="825,29,941,55"/>
<area shape="poly" title=" " alt="" coords="777,39,812,39,812,45,777,45"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="989,29,1120,55"/>
<area shape="poly" title=" " alt="" coords="942,39,976,39,976,45,942,45"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="829,79,938,104"/>
<area shape="poly" title=" " alt="" coords="774,89,815,89,815,94,774,94"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="993,79,1116,104"/>
<area shape="poly" title=" " alt="" coords="938,89,980,89,980,94,938,94"/>
<area shape="poly" title=" " alt="" coords="413,65,448,65,448,70,413,70"/>
<area shape="poly" title=" " alt="" coords="381,101,461,81,463,86,382,107"/>
</map>
</div>

</div>
</div>
<a id="a894937e1ea612c37c1bb74ac4dbd31f4" name="a894937e1ea612c37c1bb74ac4dbd31f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a894937e1ea612c37c1bb74ac4dbd31f4">&#9670;&#160;</a></span>xwds_w25qxx_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> *&#160;</td>
          <td class="paramname"><em>rxb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> *&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：向W25QXX读取数据 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>起始地址 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rxb</td><td>指向缓冲区的指针，通过此缓冲区返回数据 </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">size</td><td>指向缓冲区的指针，此缓冲区：<ul>
<li>(I) 作为输入时，表示缓冲区长度</li>
<li>(O) 作为输出时，返回实际读取的长度 </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p><code>to</code> 表示等待超时的时间点：</p><ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00466">466</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  468</span>{</div>
<div class="line"><span class="lineno">  469</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx__cmd.html">xwds_w25qxx_cmd</a> cmd;</div>
<div class="line"><span class="lineno">  470</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> xfsize;</div>
<div class="line"><span class="lineno">  471</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  472</span> </div>
<div class="line"><span class="lineno">  473</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(w25qxx, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  474</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(rxb, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  475</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(size, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  476</span> </div>
<div class="line"><span class="lineno">  477</span>        xfsize = *size;</div>
<div class="line"><span class="lineno">  478</span>        cmd = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>[<a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caaf7fadc148cd5265d6e25e5716e231a83">XWDS_W25QXX_CMD_FAST_READ_DATA</a>];</div>
<div class="line"><span class="lineno">  479</span>        <span class="keywordflow">if</span> (1 != cmd.existing) {</div>
<div class="line"><span class="lineno">  480</span>                rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#ga91457bbf35f0f1085619a99423bb1f33">ENOTSUP</a>;</div>
<div class="line"><span class="lineno">  481</span>                <span class="keywordflow">goto</span> err_not_support;</div>
<div class="line"><span class="lineno">  482</span>        }</div>
<div class="line"><span class="lineno">  483</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981">xwds_w25qxx_ctrl</a>(w25qxx,</div>
<div class="line"><span class="lineno">  484</span>                              cmd.instruction,</div>
<div class="line"><span class="lineno">  485</span>                              cmd.address_size, <a class="code hl_variable" href="structxwds__w25qxx__cmd.html#a5b33edfa65ca5b16282b0ec9e2c38bba">address</a>,</div>
<div class="line"><span class="lineno">  486</span>                              cmd.dummy_cycles,</div>
<div class="line"><span class="lineno">  487</span>                              <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, rxb, xfsize, to);</div>
<div class="line"><span class="lineno">  488</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  489</span>                <span class="keywordflow">goto</span> err_w25qxx_ctrl;</div>
<div class="line"><span class="lineno">  490</span>        }</div>
<div class="line"><span class="lineno">  491</span>        *size = xfsize;</div>
<div class="line"><span class="lineno">  492</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  493</span> </div>
<div class="line"><span class="lineno">  494</span>err_w25qxx_ctrl:</div>
<div class="line"><span class="lineno">  495</span>err_not_support:</div>
<div class="line"><span class="lineno">  496</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  497</span>}</div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga79e9d5d4b531cb0087debdb53f9515caaf7fadc148cd5265d6e25e5716e231a83"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caaf7fadc148cd5265d6e25e5716e231a83">XWDS_W25QXX_CMD_FAST_READ_DATA</a></div><div class="ttdeci">@ XWDS_W25QXX_CMD_FAST_READ_DATA</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00056">device.h:56</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a894937e1ea612c37c1bb74ac4dbd31f4_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a894937e1ea612c37c1bb74ac4dbd31f4_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a894937e1ea612c37c1bb74ac4dbd31f4_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_a894937e1ea612c37c1bb74ac4dbd31f4_cgraph">
<area shape="rect" title="W25QXX API：向W25QXX读取数据" alt="" coords="5,31,143,56"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981" title="W25QXX API：向W25QXX发送指令" alt="" coords="191,31,321,56"/>
<area shape="poly" title=" " alt="" coords="143,41,177,41,177,46,143,46"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="369,5,507,31"/>
<area shape="poly" title=" " alt="" coords="321,32,356,27,356,32,322,37"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="373,55,503,80"/>
<area shape="poly" title=" " alt="" coords="322,49,359,54,359,60,321,55"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="555,5,671,31"/>
<area shape="poly" title=" " alt="" coords="507,15,541,15,541,21,507,21"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="719,5,849,31"/>
<area shape="poly" title=" " alt="" coords="671,15,705,15,705,21,671,21"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="558,55,667,80"/>
<area shape="poly" title=" " alt="" coords="503,65,544,65,544,70,503,70"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="723,55,845,80"/>
<area shape="poly" title=" " alt="" coords="667,65,709,65,709,70,667,70"/>
</map>
</div>

</div>
</div>
<a id="aa46d8247222bb24f9a3b7cd8ce327864" name="aa46d8247222bb24f9a3b7cd8ce327864"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa46d8247222bb24f9a3b7cd8ce327864">&#9670;&#160;</a></span>xwds_w25qxx_read_jid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_read_jid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a> *&#160;</td>
          <td class="paramname"><em>jidbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：读取W25QXX的JID </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">jidbuf</td><td>指向缓冲区的指针，通过此缓冲区返回JID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p><code>to</code> 表示等待超时的时间点：</p><ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00435">435</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  436</span>{</div>
<div class="line"><span class="lineno">  437</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx__cmd.html">xwds_w25qxx_cmd</a> cmd;</div>
<div class="line"><span class="lineno">  438</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  439</span> </div>
<div class="line"><span class="lineno">  440</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(w25qxx, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  441</span> </div>
<div class="line"><span class="lineno">  442</span>        cmd = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>[<a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caaef0674003aead6dccba9e5884e0991c8">XWDS_W25QXX_CMD_JEDEC_DEVICE_ID</a>];</div>
<div class="line"><span class="lineno">  443</span>        <span class="keywordflow">if</span> (1 != cmd.existing) {</div>
<div class="line"><span class="lineno">  444</span>                rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#ga91457bbf35f0f1085619a99423bb1f33">ENOTSUP</a>;</div>
<div class="line"><span class="lineno">  445</span>                <span class="keywordflow">goto</span> err_not_support;</div>
<div class="line"><span class="lineno">  446</span>        }</div>
<div class="line"><span class="lineno">  447</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981">xwds_w25qxx_ctrl</a>(w25qxx,</div>
<div class="line"><span class="lineno">  448</span>                              cmd.instruction,</div>
<div class="line"><span class="lineno">  449</span>                              cmd.address_size, cmd.address,</div>
<div class="line"><span class="lineno">  450</span>                              cmd.dummy_cycles,</div>
<div class="line"><span class="lineno">  451</span>                              <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (<a class="code hl_typedef" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> *)jidbuf, 3, to);</div>
<div class="line"><span class="lineno">  452</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  453</span>                <span class="keywordflow">goto</span> err_w25qxx_ctrl;</div>
<div class="line"><span class="lineno">  454</span>        }</div>
<div class="line"><span class="lineno">  455</span>        *jidbuf = <a class="code hl_define" href="group__xwos__lib__xwbop.html#ga4c857565d3108e2fb14fbcf0ec6c6aab">xwbop_re</a>(<a class="code hl_typedef" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a>, *jidbuf);</div>
<div class="line"><span class="lineno">  456</span>        *jidbuf &gt;&gt;= 8;</div>
<div class="line"><span class="lineno">  457</span>        w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a346d4fdc62da8ef8463bbfbc890ac17c">parameter</a>.<a class="code hl_variable" href="structxwds__w25qxx__parameter.html#a1fa470b70c4a3414138bd32ac954859d">jid</a> = *jidbuf;</div>
<div class="line"><span class="lineno">  458</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  459</span> </div>
<div class="line"><span class="lineno">  460</span>err_w25qxx_ctrl:</div>
<div class="line"><span class="lineno">  461</span>err_not_support:</div>
<div class="line"><span class="lineno">  462</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  463</span>}</div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga79e9d5d4b531cb0087debdb53f9515caaef0674003aead6dccba9e5884e0991c8"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caaef0674003aead6dccba9e5884e0991c8">XWDS_W25QXX_CMD_JEDEC_DEVICE_ID</a></div><div class="ttdeci">@ XWDS_W25QXX_CMD_JEDEC_DEVICE_ID</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00071">device.h:71</a></div></div>
<div class="ttc" id="agroup__xwos__lib__xwbop_html_ga4c857565d3108e2fb14fbcf0ec6c6aab"><div class="ttname"><a href="group__xwos__lib__xwbop.html#ga4c857565d3108e2fb14fbcf0ec6c6aab">xwbop_re</a></div><div class="ttdeci">#define xwbop_re(type, data)</div><div class="ttdoc">XWOS BOPLIB：将数据的大小端翻转</div><div class="ttdef"><b>Definition</b> <a href="xwbop_8h_source.html#l00145">xwbop.h:145</a></div></div>
<div class="ttc" id="astructxwds__w25qxx__parameter_html_a1fa470b70c4a3414138bd32ac954859d"><div class="ttname"><a href="structxwds__w25qxx__parameter.html#a1fa470b70c4a3414138bd32ac954859d">xwds_w25qxx_parameter::jid</a></div><div class="ttdeci">xwu32_t jid</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00166">device.h:166</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_aa46d8247222bb24f9a3b7cd8ce327864_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_aa46d8247222bb24f9a3b7cd8ce327864_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_aa46d8247222bb24f9a3b7cd8ce327864_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_aa46d8247222bb24f9a3b7cd8ce327864_cgraph">
<area shape="rect" title="W25QXX API：读取W25QXX的JID" alt="" coords="5,31,163,56"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981" title="W25QXX API：向W25QXX发送指令" alt="" coords="211,31,341,56"/>
<area shape="poly" title=" " alt="" coords="163,41,197,41,197,46,163,46"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="389,5,527,31"/>
<area shape="poly" title=" " alt="" coords="341,32,376,27,376,32,342,37"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="393,55,523,80"/>
<area shape="poly" title=" " alt="" coords="342,49,379,54,379,60,341,55"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="575,5,691,31"/>
<area shape="poly" title=" " alt="" coords="527,15,561,15,561,21,527,21"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="739,5,869,31"/>
<area shape="poly" title=" " alt="" coords="691,15,725,15,725,21,691,21"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="578,55,687,80"/>
<area shape="poly" title=" " alt="" coords="523,65,564,65,564,70,523,70"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="743,55,865,80"/>
<area shape="poly" title=" " alt="" coords="687,65,729,65,729,70,687,70"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_aa46d8247222bb24f9a3b7cd8ce327864_icgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_aa46d8247222bb24f9a3b7cd8ce327864_icgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_aa46d8247222bb24f9a3b7cd8ce327864_icgraph" id="aspi_2flash_2w25qxx_2driver_8c_aa46d8247222bb24f9a3b7cd8ce327864_icgraph">
<area shape="rect" title="W25QXX API：读取W25QXX的JID" alt="" coords="248,5,405,31"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#acc8d4892a9374530a0ae2be297d7c0b8" title="W25QXX API：初始化W25QXX的参数" alt="" coords="5,5,200,31"/>
<area shape="poly" title=" " alt="" coords="234,21,200,21,200,15,234,15"/>
</map>
</div>

</div>
</div>
<a id="a2d215372b41e6bb9585f2fc01643f633" name="a2d215372b41e6bb9585f2fc01643f633"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d215372b41e6bb9585f2fc01643f633">&#9670;&#160;</a></span>xwds_w25qxx_read_mid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_read_mid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#gae84464fbf887686043158271f71505d9">xwu16_t</a> *&#160;</td>
          <td class="paramname"><em>midbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：读取W25QXX的MID </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">midbuf</td><td>指向缓冲区的指针，通过此缓冲区返回MID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p><code>to</code> 表示等待超时的时间点：</p><ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00405">405</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  406</span>{</div>
<div class="line"><span class="lineno">  407</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx__cmd.html">xwds_w25qxx_cmd</a> cmd;</div>
<div class="line"><span class="lineno">  408</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(w25qxx, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  411</span> </div>
<div class="line"><span class="lineno">  412</span>        cmd = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>[<a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa920838d9cdfb7557770f664f3b3e6852">XWDS_W25QXX_CMD_MANUFACTURER_DEVICE_ID</a>];</div>
<div class="line"><span class="lineno">  413</span>        <span class="keywordflow">if</span> (1 != cmd.existing) {</div>
<div class="line"><span class="lineno">  414</span>                rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#ga91457bbf35f0f1085619a99423bb1f33">ENOTSUP</a>;</div>
<div class="line"><span class="lineno">  415</span>                <span class="keywordflow">goto</span> err_not_support;</div>
<div class="line"><span class="lineno">  416</span>        }</div>
<div class="line"><span class="lineno">  417</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981">xwds_w25qxx_ctrl</a>(w25qxx,</div>
<div class="line"><span class="lineno">  418</span>                              cmd.instruction,</div>
<div class="line"><span class="lineno">  419</span>                              cmd.address_size, cmd.address,</div>
<div class="line"><span class="lineno">  420</span>                              cmd.dummy_cycles,</div>
<div class="line"><span class="lineno">  421</span>                              <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (<a class="code hl_typedef" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> *)midbuf, 2, to);</div>
<div class="line"><span class="lineno">  422</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  423</span>                <span class="keywordflow">goto</span> err_w25qxx_ctrl;</div>
<div class="line"><span class="lineno">  424</span>        }</div>
<div class="line"><span class="lineno">  425</span>        *midbuf = <a class="code hl_define" href="group__xwos__lib__xwbop.html#ga4c857565d3108e2fb14fbcf0ec6c6aab">xwbop_re</a>(<a class="code hl_typedef" href="group__xwos__lib__type.html#gae84464fbf887686043158271f71505d9">xwu16_t</a>, *midbuf);</div>
<div class="line"><span class="lineno">  426</span>        w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a346d4fdc62da8ef8463bbfbc890ac17c">parameter</a>.<a class="code hl_variable" href="structxwds__w25qxx__parameter.html#af172c599e02f439ab31a40ce44a58f3a">mid</a> = *midbuf;</div>
<div class="line"><span class="lineno">  427</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  428</span> </div>
<div class="line"><span class="lineno">  429</span>err_w25qxx_ctrl:</div>
<div class="line"><span class="lineno">  430</span>err_not_support:</div>
<div class="line"><span class="lineno">  431</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  432</span>}</div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga79e9d5d4b531cb0087debdb53f9515caa920838d9cdfb7557770f664f3b3e6852"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa920838d9cdfb7557770f664f3b3e6852">XWDS_W25QXX_CMD_MANUFACTURER_DEVICE_ID</a></div><div class="ttdeci">@ XWDS_W25QXX_CMD_MANUFACTURER_DEVICE_ID</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00070">device.h:70</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a2d215372b41e6bb9585f2fc01643f633_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a2d215372b41e6bb9585f2fc01643f633_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a2d215372b41e6bb9585f2fc01643f633_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_a2d215372b41e6bb9585f2fc01643f633_cgraph">
<area shape="rect" title="W25QXX API：读取W25QXX的MID" alt="" coords="5,31,171,56"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981" title="W25QXX API：向W25QXX发送指令" alt="" coords="219,31,349,56"/>
<area shape="poly" title=" " alt="" coords="171,41,205,41,205,46,171,46"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="397,5,535,31"/>
<area shape="poly" title=" " alt="" coords="349,32,384,27,384,32,350,37"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="401,55,531,80"/>
<area shape="poly" title=" " alt="" coords="350,49,387,54,387,60,349,55"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="583,5,699,31"/>
<area shape="poly" title=" " alt="" coords="535,15,569,15,569,21,535,21"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="747,5,877,31"/>
<area shape="poly" title=" " alt="" coords="699,15,733,15,733,21,699,21"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="586,55,695,80"/>
<area shape="poly" title=" " alt="" coords="531,65,572,65,572,70,531,70"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="751,55,873,80"/>
<area shape="poly" title=" " alt="" coords="695,65,737,65,737,70,695,70"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a2d215372b41e6bb9585f2fc01643f633_icgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a2d215372b41e6bb9585f2fc01643f633_icgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a2d215372b41e6bb9585f2fc01643f633_icgraph" id="aspi_2flash_2w25qxx_2driver_8c_a2d215372b41e6bb9585f2fc01643f633_icgraph">
<area shape="rect" title="W25QXX API：读取W25QXX的MID" alt="" coords="248,5,413,31"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#acc8d4892a9374530a0ae2be297d7c0b8" title="W25QXX API：初始化W25QXX的参数" alt="" coords="5,5,200,31"/>
<area shape="poly" title=" " alt="" coords="234,21,200,21,200,15,234,15"/>
</map>
</div>

</div>
</div>
<a id="ac69def306dc24b0debf5e3d5319f1b47" name="ac69def306dc24b0debf5e3d5319f1b47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac69def306dc24b0debf5e3d5319f1b47">&#9670;&#160;</a></span>xwds_w25qxx_read_sr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_read_sr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a>&#160;</td>
          <td class="paramname"><em>sridx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> *&#160;</td>
          <td class="paramname"><em>srbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：读取W25QXX的SR寄存器 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sridx</td><td>SR寄存器的序号 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">srbuf</td><td>指向缓冲区的指针，通过此缓冲区返回SR寄存器的值 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p><code>to</code> 表示等待超时的时间点：</p><ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00296">296</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  299</span>{</div>
<div class="line"><span class="lineno">  300</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx__cmd.html">xwds_w25qxx_cmd</a> cmd;</div>
<div class="line"><span class="lineno">  301</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  302</span> </div>
<div class="line"><span class="lineno">  303</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(w25qxx, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  304</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>((sridx &lt; <a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga31d917350fed9f5537c5b46d2e7b8819a78c716dff54f17c99a009afcfd8a188b">XWDS_W25QXX_SR_NUM</a>), <span class="stringliteral">&quot;out-of-range&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga15d68f826dc2f784d7d3627311e916c1">ECHRNG</a>);</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>        <span class="keywordflow">switch</span> (sridx) {</div>
<div class="line"><span class="lineno">  307</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga31d917350fed9f5537c5b46d2e7b8819a2552ad2233a0efe10010b7bc2ce37476">XWDS_W25QXX_SR_2</a>:</div>
<div class="line"><span class="lineno">  308</span>                cmd = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>[<a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa3028aeb941fc0058797c548d809af23b">XWDS_W25QXX_CMD_READ_STATUS_REG_2</a>];</div>
<div class="line"><span class="lineno">  309</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  310</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga31d917350fed9f5537c5b46d2e7b8819a63278de494bb9683b7be5cd8c85c519a">XWDS_W25QXX_SR_3</a>:</div>
<div class="line"><span class="lineno">  311</span>                cmd = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>[<a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caaccdfa5bd1e599b3c69f908e138f4dc16">XWDS_W25QXX_CMD_READ_STATUS_REG_3</a>];</div>
<div class="line"><span class="lineno">  312</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  313</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga31d917350fed9f5537c5b46d2e7b8819a9a987b52392f7843aac1026aade97c61">XWDS_W25QXX_SR_1</a>:</div>
<div class="line"><span class="lineno">  314</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  315</span>                cmd = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>[<a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caaa3ab367ae10c96aa8987c14bcf0a9aec">XWDS_W25QXX_CMD_READ_STATUS_REG_1</a>];</div>
<div class="line"><span class="lineno">  316</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  317</span>        }</div>
<div class="line"><span class="lineno">  318</span>        <span class="keywordflow">if</span> (1 != cmd.existing) {</div>
<div class="line"><span class="lineno">  319</span>                rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#ga91457bbf35f0f1085619a99423bb1f33">ENOTSUP</a>;</div>
<div class="line"><span class="lineno">  320</span>                <span class="keywordflow">goto</span> err_not_support;</div>
<div class="line"><span class="lineno">  321</span>        }</div>
<div class="line"><span class="lineno">  322</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981">xwds_w25qxx_ctrl</a>(w25qxx,</div>
<div class="line"><span class="lineno">  323</span>                              cmd.instruction,</div>
<div class="line"><span class="lineno">  324</span>                              cmd.address_size, cmd.address,</div>
<div class="line"><span class="lineno">  325</span>                              cmd.dummy_cycles,</div>
<div class="line"><span class="lineno">  326</span>                              <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, srbuf, 1, to);</div>
<div class="line"><span class="lineno">  327</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  328</span>                <span class="keywordflow">goto</span> err_w25qxx_ctrl;</div>
<div class="line"><span class="lineno">  329</span>        }</div>
<div class="line"><span class="lineno">  330</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>err_w25qxx_ctrl:</div>
<div class="line"><span class="lineno">  333</span>err_not_support:</div>
<div class="line"><span class="lineno">  334</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  335</span>}</div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga31d917350fed9f5537c5b46d2e7b8819a2552ad2233a0efe10010b7bc2ce37476"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga31d917350fed9f5537c5b46d2e7b8819a2552ad2233a0efe10010b7bc2ce37476">XWDS_W25QXX_SR_2</a></div><div class="ttdeci">@ XWDS_W25QXX_SR_2</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00102">device.h:102</a></div></div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga31d917350fed9f5537c5b46d2e7b8819a63278de494bb9683b7be5cd8c85c519a"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga31d917350fed9f5537c5b46d2e7b8819a63278de494bb9683b7be5cd8c85c519a">XWDS_W25QXX_SR_3</a></div><div class="ttdeci">@ XWDS_W25QXX_SR_3</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00103">device.h:103</a></div></div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga31d917350fed9f5537c5b46d2e7b8819a78c716dff54f17c99a009afcfd8a188b"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga31d917350fed9f5537c5b46d2e7b8819a78c716dff54f17c99a009afcfd8a188b">XWDS_W25QXX_SR_NUM</a></div><div class="ttdeci">@ XWDS_W25QXX_SR_NUM</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00104">device.h:104</a></div></div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga79e9d5d4b531cb0087debdb53f9515caa3028aeb941fc0058797c548d809af23b"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa3028aeb941fc0058797c548d809af23b">XWDS_W25QXX_CMD_READ_STATUS_REG_2</a></div><div class="ttdeci">@ XWDS_W25QXX_CMD_READ_STATUS_REG_2</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00049">device.h:49</a></div></div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga79e9d5d4b531cb0087debdb53f9515caaa3ab367ae10c96aa8987c14bcf0a9aec"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caaa3ab367ae10c96aa8987c14bcf0a9aec">XWDS_W25QXX_CMD_READ_STATUS_REG_1</a></div><div class="ttdeci">@ XWDS_W25QXX_CMD_READ_STATUS_REG_1</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00048">device.h:48</a></div></div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga79e9d5d4b531cb0087debdb53f9515caaccdfa5bd1e599b3c69f908e138f4dc16"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caaccdfa5bd1e599b3c69f908e138f4dc16">XWDS_W25QXX_CMD_READ_STATUS_REG_3</a></div><div class="ttdeci">@ XWDS_W25QXX_CMD_READ_STATUS_REG_3</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00050">device.h:50</a></div></div>
<div class="ttc" id="agroup__xwos__lib__errno_html_ga15d68f826dc2f784d7d3627311e916c1"><div class="ttname"><a href="group__xwos__lib__errno.html#ga15d68f826dc2f784d7d3627311e916c1">ECHRNG</a></div><div class="ttdeci">#define ECHRNG</div><div class="ttdoc">Channel number out of range</div><div class="ttdef"><b>Definition</b> <a href="errno_8h_source.html#l00067">errno.h:67</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_ac69def306dc24b0debf5e3d5319f1b47_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_ac69def306dc24b0debf5e3d5319f1b47_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_ac69def306dc24b0debf5e3d5319f1b47_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_ac69def306dc24b0debf5e3d5319f1b47_cgraph">
<area shape="rect" title="W25QXX API：读取W25QXX的SR寄存器" alt="" coords="5,31,160,56"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981" title="W25QXX API：向W25QXX发送指令" alt="" coords="208,31,339,56"/>
<area shape="poly" title=" " alt="" coords="160,41,194,41,194,46,160,46"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="387,5,524,31"/>
<area shape="poly" title=" " alt="" coords="339,32,373,27,374,32,339,37"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="390,55,521,80"/>
<area shape="poly" title=" " alt="" coords="339,49,377,54,376,60,339,55"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="572,5,688,31"/>
<area shape="poly" title=" " alt="" coords="524,15,558,15,558,21,524,21"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="736,5,867,31"/>
<area shape="poly" title=" " alt="" coords="688,15,723,15,723,21,688,21"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="575,55,685,80"/>
<area shape="poly" title=" " alt="" coords="521,65,562,65,562,70,521,70"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="740,55,863,80"/>
<area shape="poly" title=" " alt="" coords="685,65,726,65,726,70,685,70"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_ac69def306dc24b0debf5e3d5319f1b47_icgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_ac69def306dc24b0debf5e3d5319f1b47_icgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_ac69def306dc24b0debf5e3d5319f1b47_icgraph" id="aspi_2flash_2w25qxx_2driver_8c_ac69def306dc24b0debf5e3d5319f1b47_icgraph">
<area shape="rect" title="W25QXX API：读取W25QXX的SR寄存器" alt="" coords="699,104,853,129"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9e678590aa88b04bc61c35777b4ebd36" title="W25QXX API：检测W25QXX是否空闲" alt="" coords="476,79,651,104"/>
<area shape="poly" title=" " alt="" coords="684,108,651,104,651,99,685,103"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9f8f2be10968c8ad18f21a70bca19575" title="W25QXX API：开启W25QXX的写操作" alt="" coords="243,129,428,155"/>
<area shape="poly" title=" " alt="" coords="685,125,428,139,428,134,685,119"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a328582aa3b74906784807bccd1ace3ee" title="W25QXX API：等待W25QXX是否空闲" alt="" coords="254,80,417,105"/>
<area shape="poly" title=" " alt="" coords="462,95,417,95,417,90,462,89"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9fcd3633d0d26580d4b47e92085c4fd8" title="W25QXX API：擦除W25QXX的32KiB的块" alt="" coords="5,55,195,80"/>
<area shape="poly" title=" " alt="" coords="240,85,194,80,195,75,241,80"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#ab4aa445a8fe937709bfec87b6964d69b" title="W25QXX API：擦除W25QXX的64KiB的块" alt="" coords="5,104,195,129"/>
<area shape="poly" title=" " alt="" coords="241,105,195,110,194,104,240,100"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#aeafca2ee95063cdd1f1880baddac68f9" title="W25QXX API：擦除W25QXX的全部数据" alt="" coords="13,153,187,179"/>
<area shape="poly" title=" " alt="" coords="269,112,244,120,196,144,159,156,158,151,194,140,242,116,267,107"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#acbd1ec4eb2e5d370bc72754432c6203f" title="W25QXX API：擦除W25QXX的sector" alt="" coords="7,203,193,228"/>
<area shape="poly" title=" " alt="" coords="255,113,244,120,229,137,221,156,213,175,196,193,175,205,172,200,193,189,209,172,216,154,224,135,241,116,252,109"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a0c2e955e5d0462815261eb4011ccc80d" title="W25QXX API：向W25QXX写入数据" alt="" coords="30,5,170,31"/>
<area shape="poly" title=" " alt="" coords="288,78,194,45,154,33,155,28,195,39,290,73"/>
<area shape="poly" title=" " alt="" coords="263,128,242,120,217,107,194,94,159,83,161,78,196,89,220,102,244,116,265,123"/>
<area shape="poly" title=" " alt="" coords="229,133,194,129,195,124,229,128"/>
<area shape="poly" title=" " alt="" coords="229,156,188,160,187,154,228,150"/>
<area shape="poly" title=" " alt="" coords="289,162,195,194,155,205,154,200,194,189,287,157"/>
<area shape="poly" title=" " alt="" coords="249,125,241,120,224,101,216,81,209,62,193,44,169,32,172,27,196,40,214,59,221,79,228,98,244,116,252,121"/>
</map>
</div>

</div>
</div>
<a id="a0be01296fe3e3ba7b61328591d617eb2" name="a0be01296fe3e3ba7b61328591d617eb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0be01296fe3e3ba7b61328591d617eb2">&#9670;&#160;</a></span>xwds_w25qxx_read_uid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_read_uid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga846602bc6535386b1415f16f65ca50be">xwu64_t</a> *&#160;</td>
          <td class="paramname"><em>uidbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：读取W25QXX的UID </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">uidbuf</td><td>指向缓冲区的指针，通过此缓冲区返回UID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p><code>to</code> 表示等待超时的时间点：</p><ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00375">375</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  376</span>{</div>
<div class="line"><span class="lineno">  377</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx__cmd.html">xwds_w25qxx_cmd</a> cmd;</div>
<div class="line"><span class="lineno">  378</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  379</span> </div>
<div class="line"><span class="lineno">  380</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(w25qxx, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>        cmd = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>[<a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa54efc4d8051afc06edb5b18c502063f5">XWDS_W25QXX_CMD_UNIQUE_ID</a>];</div>
<div class="line"><span class="lineno">  383</span>        <span class="keywordflow">if</span> (1 != cmd.existing) {</div>
<div class="line"><span class="lineno">  384</span>                rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#ga91457bbf35f0f1085619a99423bb1f33">ENOTSUP</a>;</div>
<div class="line"><span class="lineno">  385</span>                <span class="keywordflow">goto</span> err_not_support;</div>
<div class="line"><span class="lineno">  386</span>        }</div>
<div class="line"><span class="lineno">  387</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981">xwds_w25qxx_ctrl</a>(w25qxx,</div>
<div class="line"><span class="lineno">  388</span>                              cmd.instruction,</div>
<div class="line"><span class="lineno">  389</span>                              cmd.address_size, cmd.address,</div>
<div class="line"><span class="lineno">  390</span>                              cmd.dummy_cycles,</div>
<div class="line"><span class="lineno">  391</span>                              <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (<a class="code hl_typedef" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> *)uidbuf, 8, to);</div>
<div class="line"><span class="lineno">  392</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  393</span>                <span class="keywordflow">goto</span> err_w25qxx_ctrl;</div>
<div class="line"><span class="lineno">  394</span>        }</div>
<div class="line"><span class="lineno">  395</span>        *uidbuf = <a class="code hl_define" href="group__xwos__lib__xwbop.html#ga4c857565d3108e2fb14fbcf0ec6c6aab">xwbop_re</a>(<a class="code hl_typedef" href="group__xwos__lib__type.html#ga846602bc6535386b1415f16f65ca50be">xwu64_t</a>, *uidbuf);</div>
<div class="line"><span class="lineno">  396</span>        w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a346d4fdc62da8ef8463bbfbc890ac17c">parameter</a>.<a class="code hl_variable" href="structxwds__w25qxx__parameter.html#a6869b259ee5325f75f3315cc27c44c82">uid</a> = *uidbuf;</div>
<div class="line"><span class="lineno">  397</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>err_w25qxx_ctrl:</div>
<div class="line"><span class="lineno">  400</span>err_not_support:</div>
<div class="line"><span class="lineno">  401</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  402</span>}</div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga79e9d5d4b531cb0087debdb53f9515caa54efc4d8051afc06edb5b18c502063f5"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa54efc4d8051afc06edb5b18c502063f5">XWDS_W25QXX_CMD_UNIQUE_ID</a></div><div class="ttdeci">@ XWDS_W25QXX_CMD_UNIQUE_ID</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00069">device.h:69</a></div></div>
<div class="ttc" id="astructxwds__w25qxx__parameter_html_a6869b259ee5325f75f3315cc27c44c82"><div class="ttname"><a href="structxwds__w25qxx__parameter.html#a6869b259ee5325f75f3315cc27c44c82">xwds_w25qxx_parameter::uid</a></div><div class="ttdeci">xwu64_t uid</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00164">device.h:164</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a0be01296fe3e3ba7b61328591d617eb2_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a0be01296fe3e3ba7b61328591d617eb2_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a0be01296fe3e3ba7b61328591d617eb2_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_a0be01296fe3e3ba7b61328591d617eb2_cgraph">
<area shape="rect" title="W25QXX API：读取W25QXX的UID" alt="" coords="5,31,167,56"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981" title="W25QXX API：向W25QXX发送指令" alt="" coords="215,31,345,56"/>
<area shape="poly" title=" " alt="" coords="167,41,201,41,201,46,167,46"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="393,5,531,31"/>
<area shape="poly" title=" " alt="" coords="345,32,380,27,380,32,346,37"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="397,55,527,80"/>
<area shape="poly" title=" " alt="" coords="346,49,383,54,383,60,345,55"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="579,5,695,31"/>
<area shape="poly" title=" " alt="" coords="531,15,565,15,565,21,531,21"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="743,5,873,31"/>
<area shape="poly" title=" " alt="" coords="695,15,729,15,729,21,695,21"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="582,55,691,80"/>
<area shape="poly" title=" " alt="" coords="527,65,568,65,568,70,527,70"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="747,55,869,80"/>
<area shape="poly" title=" " alt="" coords="691,65,733,65,733,70,691,70"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a0be01296fe3e3ba7b61328591d617eb2_icgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a0be01296fe3e3ba7b61328591d617eb2_icgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a0be01296fe3e3ba7b61328591d617eb2_icgraph" id="aspi_2flash_2w25qxx_2driver_8c_a0be01296fe3e3ba7b61328591d617eb2_icgraph">
<area shape="rect" title="W25QXX API：读取W25QXX的UID" alt="" coords="248,5,409,31"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#acc8d4892a9374530a0ae2be297d7c0b8" title="W25QXX API：初始化W25QXX的参数" alt="" coords="5,5,200,31"/>
<area shape="poly" title=" " alt="" coords="234,21,200,21,200,15,234,15"/>
</map>
</div>

</div>
</div>
<a id="a409dc974c82de4d33849fb903257cee6" name="a409dc974c82de4d33849fb903257cee6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a409dc974c82de4d33849fb903257cee6">&#9670;&#160;</a></span>xwds_w25qxx_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_reset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：向W25QXX发送复位命令 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p><code>to</code> 表示等待超时的时间点：</p><ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00142">142</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  143</span>{</div>
<div class="line"><span class="lineno">  144</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx__cmd.html">xwds_w25qxx_cmd</a> cmd;</div>
<div class="line"><span class="lineno">  145</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(w25qxx, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>        cmd = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>[<a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa727569288669fce96cf0ba7867a7ab1f">XWDS_W25QXX_CMD_ENABLE_RESET</a>];</div>
<div class="line"><span class="lineno">  150</span>        <span class="keywordflow">if</span> (cmd.existing) {</div>
<div class="line"><span class="lineno">  151</span>                rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981">xwds_w25qxx_ctrl</a>(w25qxx,</div>
<div class="line"><span class="lineno">  152</span>                                      cmd.instruction,</div>
<div class="line"><span class="lineno">  153</span>                                      cmd.address_size, cmd.address,</div>
<div class="line"><span class="lineno">  154</span>                                      cmd.dummy_cycles,</div>
<div class="line"><span class="lineno">  155</span>                                      <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, to);</div>
<div class="line"><span class="lineno">  156</span>                <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  157</span>                        <span class="keywordflow">goto</span> err_w25qxx_ctrl;</div>
<div class="line"><span class="lineno">  158</span>                }</div>
<div class="line"><span class="lineno">  159</span>        }</div>
<div class="line"><span class="lineno">  160</span>        cmd = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>[<a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa5bf0c5b69a40dd309ce3db095883fbf6">XWDS_W25QXX_CMD_RESET</a>];</div>
<div class="line"><span class="lineno">  161</span>        <span class="keywordflow">if</span> (cmd.existing) {</div>
<div class="line"><span class="lineno">  162</span>                rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981">xwds_w25qxx_ctrl</a>(w25qxx,</div>
<div class="line"><span class="lineno">  163</span>                                      cmd.instruction,</div>
<div class="line"><span class="lineno">  164</span>                                      cmd.address_size, cmd.address,</div>
<div class="line"><span class="lineno">  165</span>                                      cmd.dummy_cycles,</div>
<div class="line"><span class="lineno">  166</span>                                      <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, to);</div>
<div class="line"><span class="lineno">  167</span>                <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  168</span>                        <span class="keywordflow">goto</span> err_w25qxx_ctrl;</div>
<div class="line"><span class="lineno">  169</span>                }</div>
<div class="line"><span class="lineno">  170</span>        }</div>
<div class="line"><span class="lineno">  171</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span>err_w25qxx_ctrl:</div>
<div class="line"><span class="lineno">  174</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  175</span>}</div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga79e9d5d4b531cb0087debdb53f9515caa5bf0c5b69a40dd309ce3db095883fbf6"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa5bf0c5b69a40dd309ce3db095883fbf6">XWDS_W25QXX_CMD_RESET</a></div><div class="ttdeci">@ XWDS_W25QXX_CMD_RESET</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00080">device.h:80</a></div></div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga79e9d5d4b531cb0087debdb53f9515caa727569288669fce96cf0ba7867a7ab1f"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa727569288669fce96cf0ba7867a7ab1f">XWDS_W25QXX_CMD_ENABLE_RESET</a></div><div class="ttdeci">@ XWDS_W25QXX_CMD_ENABLE_RESET</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00079">device.h:79</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a409dc974c82de4d33849fb903257cee6_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a409dc974c82de4d33849fb903257cee6_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a409dc974c82de4d33849fb903257cee6_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_a409dc974c82de4d33849fb903257cee6_cgraph">
<area shape="rect" title="W25QXX API：向W25QXX发送复位命令" alt="" coords="5,31,147,56"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981" title="W25QXX API：向W25QXX发送指令" alt="" coords="195,31,325,56"/>
<area shape="poly" title=" " alt="" coords="147,41,181,41,181,46,147,46"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="373,5,511,31"/>
<area shape="poly" title=" " alt="" coords="325,32,360,27,360,32,326,37"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="377,55,507,80"/>
<area shape="poly" title=" " alt="" coords="326,49,363,54,363,60,325,55"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="559,5,675,31"/>
<area shape="poly" title=" " alt="" coords="511,15,545,15,545,21,511,21"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="723,5,853,31"/>
<area shape="poly" title=" " alt="" coords="675,15,709,15,709,21,675,21"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="562,55,671,80"/>
<area shape="poly" title=" " alt="" coords="507,65,548,65,548,70,507,70"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="727,55,849,80"/>
<area shape="poly" title=" " alt="" coords="671,65,713,65,713,70,671,70"/>
</map>
</div>

</div>
</div>
<a id="a328582aa3b74906784807bccd1ace3ee" name="a328582aa3b74906784807bccd1ace3ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a328582aa3b74906784807bccd1ace3ee">&#9670;&#160;</a></span>xwds_w25qxx_wait_idle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_wait_idle </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>period</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：等待W25QXX是否空闲 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p><code>to</code> 表示等待超时的时间点：</p><ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00355">355</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  356</span>{</div>
<div class="line"><span class="lineno">  357</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  358</span>        <a class="code hl_typedef" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> from, sleepto;</div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a9e678590aa88b04bc61c35777b4ebd36">xwds_w25qxx_check_idle</a>(w25qxx, to);</div>
<div class="line"><span class="lineno">  361</span>        from = <a class="code hl_function" href="group__xwos__time.html#ga0a72e026418c2423692bf9c1158101ae">xwtm_now</a>();</div>
<div class="line"><span class="lineno">  362</span>        <span class="keywordflow">while</span> ((-<a class="code hl_define" href="group__xwos__lib__errno.html#ga8368025077a0385849d6817b2007c095">EBUSY</a> == rc) &amp;&amp; (<a class="code hl_function" href="group__xwos__lib__type__time.html#gad9ca66730be82d000b7f7ad74eb835b4">xwtm_cmp</a>(to, from) &gt; 0)) {</div>
<div class="line"><span class="lineno">  363</span>                sleepto = <a class="code hl_function" href="group__xwos__lib__type__time.html#ga123646dbc0c9e01824ef8833ec7b8589">xwtm_add_safely</a>(from, period);</div>
<div class="line"><span class="lineno">  364</span>                sleepto = <a class="code hl_function" href="group__xwos__lib__type__time.html#gad9ca66730be82d000b7f7ad74eb835b4">xwtm_cmp</a>(sleepto, to) &gt; 0 ? to : sleepto;</div>
<div class="line"><span class="lineno">  365</span>                rc = <a class="code hl_function" href="group__xwos__thd.html#ga067c6169bf591a14813b004494e41f45">xwos_cthd_sleep_to</a>(sleepto);</div>
<div class="line"><span class="lineno">  366</span>                <span class="keywordflow">if</span> (<a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a> == rc) {</div>
<div class="line"><span class="lineno">  367</span>                        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a9e678590aa88b04bc61c35777b4ebd36">xwds_w25qxx_check_idle</a>(w25qxx, to);</div>
<div class="line"><span class="lineno">  368</span>                        from = <a class="code hl_function" href="group__xwos__time.html#ga0a72e026418c2423692bf9c1158101ae">xwtm_now</a>();</div>
<div class="line"><span class="lineno">  369</span>                }</div>
<div class="line"><span class="lineno">  370</span>        }</div>
<div class="line"><span class="lineno">  371</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  372</span>}</div>
<div class="ttc" id="agroup__xwos__lib__type__time_html_ga123646dbc0c9e01824ef8833ec7b8589"><div class="ttname"><a href="group__xwos__lib__type__time.html#ga123646dbc0c9e01824ef8833ec7b8589">xwtm_add_safely</a></div><div class="ttdeci">static __xwcc_inline xwtm_t xwtm_add_safely(const xwtm_t a, const xwtm_t b)</div><div class="ttdoc">将两个系统时间相加，并检查溢出</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00792">type.h:792</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type__time_html_ga3079bb70c0290f939f9c6896fe43ec61"><div class="ttname"><a href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a></div><div class="ttdeci">xws64_t xwtm_t</div><div class="ttdoc">XWOS系统时间（有符号)</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00710">type.h:710</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type__time_html_gad9ca66730be82d000b7f7ad74eb835b4"><div class="ttname"><a href="group__xwos__lib__type__time.html#gad9ca66730be82d000b7f7ad74eb835b4">xwtm_cmp</a></div><div class="ttdeci">static __xwcc_inline xwer_t xwtm_cmp(const xwtm_t a, const xwtm_t b)</div><div class="ttdoc">比较两个系统时间</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00837">type.h:837</a></div></div>
<div class="ttc" id="agroup__xwos__thd_html_ga067c6169bf591a14813b004494e41f45"><div class="ttname"><a href="group__xwos__thd.html#ga067c6169bf591a14813b004494e41f45">xwos_cthd_sleep_to</a></div><div class="ttdeci">static xwer_t xwos_cthd_sleep_to(xwtm_t to)</div><div class="ttdoc">XWOS API：线程睡眠到一个时间点</div><div class="ttdef"><b>Definition</b> <a href="thd_8h_source.html#l00716">thd.h:716</a></div></div>
<div class="ttc" id="agroup__xwos__time_html_ga0a72e026418c2423692bf9c1158101ae"><div class="ttname"><a href="group__xwos__time.html#ga0a72e026418c2423692bf9c1158101ae">xwtm_now</a></div><div class="ttdeci">static xwtm_t xwtm_now(void)</div><div class="ttdoc">XWOS API：获取当前CPU的系统时间点</div><div class="ttdef"><b>Definition</b> <a href="time_8h_source.html#l00054">time.h:54</a></div></div>
<div class="ttc" id="aspi_2flash_2w25qxx_2driver_8c_html_a9e678590aa88b04bc61c35777b4ebd36"><div class="ttname"><a href="spi_2flash_2w25qxx_2driver_8c.html#a9e678590aa88b04bc61c35777b4ebd36">xwds_w25qxx_check_idle</a></div><div class="ttdeci">xwer_t xwds_w25qxx_check_idle(struct xwds_w25qxx *w25qxx, xwtm_t to)</div><div class="ttdoc">W25QXX API：检测W25QXX是否空闲</div><div class="ttdef"><b>Definition</b> <a href="spi_2flash_2w25qxx_2driver_8c_source.html#l00338">driver.c:338</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a328582aa3b74906784807bccd1ace3ee_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a328582aa3b74906784807bccd1ace3ee_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a328582aa3b74906784807bccd1ace3ee_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_a328582aa3b74906784807bccd1ace3ee_cgraph">
<area shape="rect" title="W25QXX API：等待W25QXX是否空闲" alt="" coords="5,129,168,155"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9e678590aa88b04bc61c35777b4ebd36" title="W25QXX API：检测W25QXX是否空闲" alt="" coords="216,31,391,56"/>
<area shape="poly" title=" " alt="" coords="105,127,153,96,215,65,234,58,236,63,217,70,156,101,108,132"/>
<area shape="rect" href="group__xwos__thd.html#ga067c6169bf591a14813b004494e41f45" title="XWOS API：线程睡眠到一个时间点" alt="" coords="233,80,374,105"/>
<area shape="poly" title=" " alt="" coords="143,127,233,106,234,111,144,132"/>
<area shape="rect" href="group__xwos__lib__type__time.html#ga123646dbc0c9e01824ef8833ec7b8589" title="将两个系统时间相加，并检查溢出" alt="" coords="241,129,365,155"/>
<area shape="poly" title=" " alt="" coords="168,139,228,139,228,145,168,145"/>
<area shape="rect" href="group__xwos__lib__type__time.html#gad9ca66730be82d000b7f7ad74eb835b4" title="比较两个系统时间" alt="" coords="260,179,347,204"/>
<area shape="poly" title=" " alt="" coords="144,152,247,176,246,181,143,157"/>
<area shape="rect" href="group__xwos__time.html#ga0a72e026418c2423692bf9c1158101ae" title="XWOS API：获取当前CPU的系统时间点" alt="" coords="261,228,346,253"/>
<area shape="poly" title=" " alt="" coords="109,153,157,182,217,213,249,224,247,229,215,218,154,187,106,157"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#ac69def306dc24b0debf5e3d5319f1b47" title="W25QXX API：读取W25QXX的SR寄存器" alt="" coords="439,31,593,56"/>
<area shape="poly" title=" " alt="" coords="391,41,425,41,425,46,391,46"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981" title="W25QXX API：向W25QXX发送指令" alt="" coords="641,31,772,56"/>
<area shape="poly" title=" " alt="" coords="594,41,628,41,628,46,594,46"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="820,5,957,31"/>
<area shape="poly" title=" " alt="" coords="772,32,806,27,807,32,773,37"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="823,55,954,80"/>
<area shape="poly" title=" " alt="" coords="773,49,810,54,809,60,772,55"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="1005,5,1121,31"/>
<area shape="poly" title=" " alt="" coords="957,15,992,15,992,21,957,21"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="1169,5,1300,31"/>
<area shape="poly" title=" " alt="" coords="1122,15,1156,15,1156,21,1122,21"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="1009,55,1118,80"/>
<area shape="poly" title=" " alt="" coords="954,65,995,65,995,70,954,70"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="1173,55,1296,80"/>
<area shape="poly" title=" " alt="" coords="1118,65,1160,65,1160,70,1118,70"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a328582aa3b74906784807bccd1ace3ee_icgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a328582aa3b74906784807bccd1ace3ee_icgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a328582aa3b74906784807bccd1ace3ee_icgraph" id="aspi_2flash_2w25qxx_2driver_8c_a328582aa3b74906784807bccd1ace3ee_icgraph">
<area shape="rect" title="W25QXX API：等待W25QXX是否空闲" alt="" coords="243,104,405,129"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9fcd3633d0d26580d4b47e92085c4fd8" title="W25QXX API：擦除W25QXX的32KiB的块" alt="" coords="5,5,195,31"/>
<area shape="poly" title=" " alt="" coords="292,99,247,71,194,44,160,33,162,28,196,40,249,66,295,94"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#ab4aa445a8fe937709bfec87b6964d69b" title="W25QXX API：擦除W25QXX的64KiB的块" alt="" coords="5,55,195,80"/>
<area shape="poly" title=" " alt="" coords="252,104,158,83,159,77,253,98"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#aeafca2ee95063cdd1f1880baddac68f9" title="W25QXX API：擦除W25QXX的全部数据" alt="" coords="13,104,187,129"/>
<area shape="poly" title=" " alt="" coords="229,119,187,119,187,114,229,114"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#acbd1ec4eb2e5d370bc72754432c6203f" title="W25QXX API：擦除W25QXX的sector" alt="" coords="7,153,193,179"/>
<area shape="poly" title=" " alt="" coords="253,135,159,156,158,151,252,130"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a0c2e955e5d0462815261eb4011ccc80d" title="W25QXX API：向W25QXX写入数据" alt="" coords="30,203,170,228"/>
<area shape="poly" title=" " alt="" coords="294,139,249,166,196,192,158,205,157,200,194,188,246,162,291,135"/>
</map>
</div>

</div>
</div>
<a id="a0c2e955e5d0462815261eb4011ccc80d" name="a0c2e955e5d0462815261eb4011ccc80d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c2e955e5d0462815261eb4011ccc80d">&#9670;&#160;</a></span>xwds_w25qxx_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#gaebfa962b7f93c0dd0b0d71111f3e2e91">xwu32_t</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> *&#160;</td>
          <td class="paramname"><em>txb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> *&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：向W25QXX写入数据 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>起始地址 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">txb</td><td>待写入的数据缓冲区 </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">size</td><td>指向缓冲区的指针，此缓冲区：<ul>
<li>(I) 作为输入时，表示缓冲区长度</li>
<li>(O) 作为输出时，返回实际写入的长度 </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p><code>to</code> 表示等待超时的时间点：</p><ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00500">500</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  502</span>{</div>
<div class="line"><span class="lineno">  503</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx__cmd.html">xwds_w25qxx_cmd</a> cmd;</div>
<div class="line"><span class="lineno">  504</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> xfsize;</div>
<div class="line"><span class="lineno">  505</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  506</span> </div>
<div class="line"><span class="lineno">  507</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(w25qxx, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  508</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(txb, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  509</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(size, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  510</span> </div>
<div class="line"><span class="lineno">  511</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a9f8f2be10968c8ad18f21a70bca19575">xwds_w25qxx_write_enable</a>(w25qxx, to);</div>
<div class="line"><span class="lineno">  512</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  513</span>                <span class="keywordflow">goto</span> err_we;</div>
<div class="line"><span class="lineno">  514</span>        }</div>
<div class="line"><span class="lineno">  515</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a328582aa3b74906784807bccd1ace3ee">xwds_w25qxx_wait_idle</a>(w25qxx, <a class="code hl_define" href="group__xwos__lib__type__time.html#gaf09def951be67b8f6a8a743fe86cf062">XWTM_MS</a>(1), to);</div>
<div class="line"><span class="lineno">  516</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  517</span>                <span class="keywordflow">goto</span> err_wait_idle;</div>
<div class="line"><span class="lineno">  518</span>        }</div>
<div class="line"><span class="lineno">  519</span>        xfsize = *size;</div>
<div class="line"><span class="lineno">  520</span>        cmd = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>[<a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa803778dd02de7aff0a1f31b998eb8f61">XWDS_W25QXX_CMD_PAGE_PROGRAM</a>];</div>
<div class="line"><span class="lineno">  521</span>        <span class="keywordflow">if</span> (1 != cmd.existing) {</div>
<div class="line"><span class="lineno">  522</span>                rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#ga91457bbf35f0f1085619a99423bb1f33">ENOTSUP</a>;</div>
<div class="line"><span class="lineno">  523</span>                <span class="keywordflow">goto</span> err_not_support;</div>
<div class="line"><span class="lineno">  524</span>        }</div>
<div class="line"><span class="lineno">  525</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981">xwds_w25qxx_ctrl</a>(w25qxx,</div>
<div class="line"><span class="lineno">  526</span>                              cmd.instruction,</div>
<div class="line"><span class="lineno">  527</span>                              cmd.address_size, <a class="code hl_variable" href="structxwds__w25qxx__cmd.html#a5b33edfa65ca5b16282b0ec9e2c38bba">address</a>,</div>
<div class="line"><span class="lineno">  528</span>                              cmd.dummy_cycles,</div>
<div class="line"><span class="lineno">  529</span>                              txb, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, xfsize, to);</div>
<div class="line"><span class="lineno">  530</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  531</span>                <span class="keywordflow">goto</span> err_w25qxx_ctrl;</div>
<div class="line"><span class="lineno">  532</span>        }</div>
<div class="line"><span class="lineno">  533</span>        *size = xfsize;</div>
<div class="line"><span class="lineno">  534</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  535</span> </div>
<div class="line"><span class="lineno">  536</span>err_w25qxx_ctrl:</div>
<div class="line"><span class="lineno">  537</span>err_not_support:</div>
<div class="line"><span class="lineno">  538</span>err_wait_idle:</div>
<div class="line"><span class="lineno">  539</span>        <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a5805e3d7db94d1e680c1d504a418e8b5">xwds_w25qxx_write_disable</a>(w25qxx, to);</div>
<div class="line"><span class="lineno">  540</span>err_we:</div>
<div class="line"><span class="lineno">  541</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  542</span>}</div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga79e9d5d4b531cb0087debdb53f9515caa803778dd02de7aff0a1f31b998eb8f61"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa803778dd02de7aff0a1f31b998eb8f61">XWDS_W25QXX_CMD_PAGE_PROGRAM</a></div><div class="ttdeci">@ XWDS_W25QXX_CMD_PAGE_PROGRAM</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00059">device.h:59</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a0c2e955e5d0462815261eb4011ccc80d_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a0c2e955e5d0462815261eb4011ccc80d_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a0c2e955e5d0462815261eb4011ccc80d_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_a0c2e955e5d0462815261eb4011ccc80d_cgraph">
<area shape="rect" title="W25QXX API：向W25QXX写入数据" alt="" coords="5,83,145,109"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981" title="W25QXX API：向W25QXX发送指令" alt="" coords="873,53,1004,78"/>
<area shape="poly" title=" " alt="" coords="105,81,193,50,297,24,404,12,523,4,616,4,708,14,826,33,883,46,882,52,825,39,707,19,615,10,523,9,404,17,298,30,194,55,107,86"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a328582aa3b74906784807bccd1ace3ee" title="W25QXX API：等待W25QXX是否空闲" alt="" coords="193,157,356,182"/>
<area shape="poly" title=" " alt="" coords="112,106,227,149,225,154,110,111"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a5805e3d7db94d1e680c1d504a418e8b5" title="W25QXX API：关闭W25QXX的写操作" alt="" coords="637,226,825,251"/>
<area shape="poly" title=" " alt="" coords="91,107,138,151,211,210,255,240,303,268,353,292,405,310,456,321,497,325,537,321,589,310,620,300,649,286,700,257,702,261,652,291,621,305,590,315,538,326,497,330,455,326,403,315,351,297,300,273,252,245,208,214,134,155,88,111"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9f8f2be10968c8ad18f21a70bca19575" title="W25QXX API：开启W25QXX的写操作" alt="" coords="404,27,589,53"/>
<area shape="poly" title=" " alt="" coords="145,84,390,52,391,57,146,89"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="1052,27,1189,53"/>
<area shape="poly" title=" " alt="" coords="1004,54,1038,49,1039,54,1005,59"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="1055,77,1186,102"/>
<area shape="poly" title=" " alt="" coords="1005,71,1042,76,1041,82,1004,77"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="1237,27,1353,53"/>
<area shape="poly" title=" " alt="" coords="1189,37,1224,37,1224,43,1189,43"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="1401,27,1532,53"/>
<area shape="poly" title=" " alt="" coords="1354,37,1388,37,1388,43,1354,43"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="1241,77,1350,102"/>
<area shape="poly" title=" " alt="" coords="1186,87,1227,87,1227,92,1186,92"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="1405,77,1528,102"/>
<area shape="poly" title=" " alt="" coords="1350,87,1392,87,1392,92,1350,92"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9e678590aa88b04bc61c35777b4ebd36" title="W25QXX API：检测W25QXX是否空闲" alt="" coords="409,77,584,102"/>
<area shape="poly" title=" " alt="" coords="301,154,403,111,428,103,429,108,405,116,303,159"/>
<area shape="rect" href="group__xwos__thd.html#ga067c6169bf591a14813b004494e41f45" title="XWOS API：线程睡眠到一个时间点" alt="" coords="426,225,567,250"/>
<area shape="poly" title=" " alt="" coords="314,180,405,210,436,219,434,224,403,215,312,185"/>
<area shape="rect" href="group__xwos__lib__type__time.html#ga123646dbc0c9e01824ef8833ec7b8589" title="将两个系统时间相加，并检查溢出" alt="" coords="435,274,559,299"/>
<area shape="poly" title=" " alt="" coords="292,180,340,220,371,242,405,260,422,267,420,272,403,265,369,246,337,224,288,184"/>
<area shape="rect" href="group__xwos__lib__type__time.html#gad9ca66730be82d000b7f7ad74eb835b4" title="比较两个系统时间" alt="" coords="453,126,540,151"/>
<area shape="poly" title=" " alt="" coords="356,156,439,144,440,149,357,161"/>
<area shape="rect" href="group__xwos__time.html#ga0a72e026418c2423692bf9c1158101ae" title="XWOS API：获取当前CPU的系统时间点" alt="" coords="454,175,539,201"/>
<area shape="poly" title=" " alt="" coords="357,174,440,181,440,186,356,179"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#ac69def306dc24b0debf5e3d5319f1b47" title="W25QXX API：读取W25QXX的SR寄存器" alt="" coords="654,78,809,103"/>
<area shape="poly" title=" " alt="" coords="584,87,640,88,640,93,584,93"/>
<area shape="poly" title=" " alt="" coords="809,79,859,72,860,78,809,84"/>
<area shape="poly" title=" " alt="" coords="746,224,910,85,914,89,750,228"/>
<area shape="poly" title=" " alt="" coords="590,43,859,58,859,64,589,48"/>
<area shape="poly" title=" " alt="" coords="557,50,659,73,658,78,556,55"/>
</map>
</div>

</div>
</div>
<a id="a5805e3d7db94d1e680c1d504a418e8b5" name="a5805e3d7db94d1e680c1d504a418e8b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5805e3d7db94d1e680c1d504a418e8b5">&#9670;&#160;</a></span>xwds_w25qxx_write_disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_write_disable </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：关闭W25QXX的写操作 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p><code>to</code> 表示等待超时的时间点：</p><ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00268">268</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  269</span>{</div>
<div class="line"><span class="lineno">  270</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx__cmd.html">xwds_w25qxx_cmd</a> cmd;</div>
<div class="line"><span class="lineno">  271</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(w25qxx, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>        cmd = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>[<a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa8a6e3f8f9238681f7150c1caeeff7fd2">XWDS_W25QXX_CMD_WRITE_DISABLE</a>];</div>
<div class="line"><span class="lineno">  276</span>        <span class="keywordflow">if</span> (cmd.existing) {</div>
<div class="line"><span class="lineno">  277</span>                rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#ga91457bbf35f0f1085619a99423bb1f33">ENOTSUP</a>;</div>
<div class="line"><span class="lineno">  278</span>                <span class="keywordflow">goto</span> err_not_support;</div>
<div class="line"><span class="lineno">  279</span>        }</div>
<div class="line"><span class="lineno">  280</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981">xwds_w25qxx_ctrl</a>(w25qxx,</div>
<div class="line"><span class="lineno">  281</span>                              cmd.instruction,</div>
<div class="line"><span class="lineno">  282</span>                              cmd.address_size, cmd.address,</div>
<div class="line"><span class="lineno">  283</span>                              cmd.dummy_cycles,</div>
<div class="line"><span class="lineno">  284</span>                              <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, to);</div>
<div class="line"><span class="lineno">  285</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  286</span>                <span class="keywordflow">goto</span> err_w25qxx_ctrl;</div>
<div class="line"><span class="lineno">  287</span>        }</div>
<div class="line"><span class="lineno">  288</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>err_w25qxx_ctrl:</div>
<div class="line"><span class="lineno">  291</span>err_not_support:</div>
<div class="line"><span class="lineno">  292</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  293</span>}</div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga79e9d5d4b531cb0087debdb53f9515caa8a6e3f8f9238681f7150c1caeeff7fd2"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caa8a6e3f8f9238681f7150c1caeeff7fd2">XWDS_W25QXX_CMD_WRITE_DISABLE</a></div><div class="ttdeci">@ XWDS_W25QXX_CMD_WRITE_DISABLE</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00045">device.h:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a5805e3d7db94d1e680c1d504a418e8b5_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a5805e3d7db94d1e680c1d504a418e8b5_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a5805e3d7db94d1e680c1d504a418e8b5_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_a5805e3d7db94d1e680c1d504a418e8b5_cgraph">
<area shape="rect" title="W25QXX API：关闭W25QXX的写操作" alt="" coords="5,31,193,56"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981" title="W25QXX API：向W25QXX发送指令" alt="" coords="241,31,372,56"/>
<area shape="poly" title=" " alt="" coords="193,41,228,41,228,46,193,46"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="420,5,557,31"/>
<area shape="poly" title=" " alt="" coords="372,32,406,27,407,32,373,37"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="423,55,554,80"/>
<area shape="poly" title=" " alt="" coords="373,49,410,54,409,60,372,55"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="605,5,721,31"/>
<area shape="poly" title=" " alt="" coords="557,15,592,15,592,21,557,21"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="769,5,900,31"/>
<area shape="poly" title=" " alt="" coords="722,15,756,15,756,21,722,21"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="609,55,718,80"/>
<area shape="poly" title=" " alt="" coords="554,65,595,65,595,70,554,70"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="773,55,896,80"/>
<area shape="poly" title=" " alt="" coords="718,65,760,65,760,70,718,70"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a5805e3d7db94d1e680c1d504a418e8b5_icgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a5805e3d7db94d1e680c1d504a418e8b5_icgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a5805e3d7db94d1e680c1d504a418e8b5_icgraph" id="aspi_2flash_2w25qxx_2driver_8c_a5805e3d7db94d1e680c1d504a418e8b5_icgraph">
<area shape="rect" title="W25QXX API：关闭W25QXX的写操作" alt="" coords="243,104,431,129"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9fcd3633d0d26580d4b47e92085c4fd8" title="W25QXX API：擦除W25QXX的32KiB的块" alt="" coords="5,5,195,31"/>
<area shape="poly" title=" " alt="" coords="302,99,252,71,194,44,159,33,161,28,196,40,254,67,305,95"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#ab4aa445a8fe937709bfec87b6964d69b" title="W25QXX API：擦除W25QXX的64KiB的块" alt="" coords="5,55,195,80"/>
<area shape="poly" title=" " alt="" coords="261,104,161,83,162,77,262,99"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#aeafca2ee95063cdd1f1880baddac68f9" title="W25QXX API：擦除W25QXX的全部数据" alt="" coords="13,104,187,129"/>
<area shape="poly" title=" " alt="" coords="229,119,188,119,188,114,229,114"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#acbd1ec4eb2e5d370bc72754432c6203f" title="W25QXX API：擦除W25QXX的sector" alt="" coords="7,153,193,179"/>
<area shape="poly" title=" " alt="" coords="262,135,162,156,161,151,261,130"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a0c2e955e5d0462815261eb4011ccc80d" title="W25QXX API：向W25QXX写入数据" alt="" coords="30,203,170,228"/>
<area shape="poly" title=" " alt="" coords="304,139,254,166,196,192,157,205,155,200,194,188,251,161,301,134"/>
</map>
</div>

</div>
</div>
<a id="a9f8f2be10968c8ad18f21a70bca19575" name="a9f8f2be10968c8ad18f21a70bca19575"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f8f2be10968c8ad18f21a70bca19575">&#9670;&#160;</a></span>xwds_w25qxx_write_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwds_w25qxx_write_enable </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwds__w25qxx.html">xwds_w25qxx</a> *&#160;</td>
          <td class="paramname"><em>w25qxx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>W25QXX API：开启W25QXX的写操作 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">w25qxx</td><td>W25QXX对象指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p><code>to</code> 表示等待超时的时间点：</p><ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html">driver.c</a> 第 <a class="el" href="spi_2flash_2w25qxx_2driver_8c_source.html#l00228">228</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  229</span>{</div>
<div class="line"><span class="lineno">  230</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwds__w25qxx__cmd.html">xwds_w25qxx_cmd</a> cmd;</div>
<div class="line"><span class="lineno">  231</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  232</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> sr1;</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>        <a class="code hl_define" href="group__xwcd__ds.html#ga9541a62248e32dc84221e1f55d11c2b3">XWDS_VALIDATE</a>(w25qxx, <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>        cmd = w25qxx-&gt;<a class="code hl_variable" href="structxwds__w25qxx.html#a7574da13e1e4360d5754721ed016b97b">cmdtbl</a>[<a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caaecccf641bf73e4a543a61328f0015da3">XWDS_W25QXX_CMD_WRITE_ENABLE</a>];</div>
<div class="line"><span class="lineno">  237</span>        <span class="keywordflow">if</span> (1 != cmd.existing) {</div>
<div class="line"><span class="lineno">  238</span>                rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#ga91457bbf35f0f1085619a99423bb1f33">ENOTSUP</a>;</div>
<div class="line"><span class="lineno">  239</span>                <span class="keywordflow">goto</span> err_not_support;</div>
<div class="line"><span class="lineno">  240</span>        }</div>
<div class="line"><span class="lineno">  241</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981">xwds_w25qxx_ctrl</a>(w25qxx,</div>
<div class="line"><span class="lineno">  242</span>                              cmd.instruction,</div>
<div class="line"><span class="lineno">  243</span>                              cmd.address_size, cmd.address,</div>
<div class="line"><span class="lineno">  244</span>                              cmd.dummy_cycles,</div>
<div class="line"><span class="lineno">  245</span>                              <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, to);</div>
<div class="line"><span class="lineno">  246</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  247</span>                <span class="keywordflow">goto</span> err_w25qxx_ctrl;</div>
<div class="line"><span class="lineno">  248</span>        }</div>
<div class="line"><span class="lineno">  249</span>        rc = <a class="code hl_function" href="spi_2flash_2w25qxx_2driver_8c.html#ac69def306dc24b0debf5e3d5319f1b47">xwds_w25qxx_read_sr</a>(w25qxx,</div>
<div class="line"><span class="lineno">  250</span>                                 <a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga31d917350fed9f5537c5b46d2e7b8819a9a987b52392f7843aac1026aade97c61">XWDS_W25QXX_SR_1</a>, &amp;sr1,</div>
<div class="line"><span class="lineno">  251</span>                                 to);</div>
<div class="line"><span class="lineno">  252</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  253</span>                <span class="keywordflow">goto</span> err_chk_wel;</div>
<div class="line"><span class="lineno">  254</span>        }</div>
<div class="line"><span class="lineno">  255</span>        <span class="keywordflow">if</span> (!(sr1 &amp; <a class="code hl_enumvalue" href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga3cdd30d2261b6ea8963e3780e258b99aa2071fe1981afca2ab2506de4cf675602">XWDS_W25QXX_SR1_WEL</a>)) {</div>
<div class="line"><span class="lineno">  256</span>                rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#gac2a2e9fa555401f94478f74e01868032">EACCES</a>;</div>
<div class="line"><span class="lineno">  257</span>                <span class="keywordflow">goto</span> err_chk_wel;</div>
<div class="line"><span class="lineno">  258</span>        }</div>
<div class="line"><span class="lineno">  259</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>err_chk_wel:</div>
<div class="line"><span class="lineno">  262</span>err_w25qxx_ctrl:</div>
<div class="line"><span class="lineno">  263</span>err_not_support:</div>
<div class="line"><span class="lineno">  264</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  265</span>}</div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga3cdd30d2261b6ea8963e3780e258b99aa2071fe1981afca2ab2506de4cf675602"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga3cdd30d2261b6ea8963e3780e258b99aa2071fe1981afca2ab2506de4cf675602">XWDS_W25QXX_SR1_WEL</a></div><div class="ttdeci">@ XWDS_W25QXX_SR1_WEL</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00112">device.h:112</a></div></div>
<div class="ttc" id="agroup__xwcd__peripheral__spi__flash__w25qxx_html_gga79e9d5d4b531cb0087debdb53f9515caaecccf641bf73e4a543a61328f0015da3"><div class="ttname"><a href="group__xwcd__peripheral__spi__flash__w25qxx.html#gga79e9d5d4b531cb0087debdb53f9515caaecccf641bf73e4a543a61328f0015da3">XWDS_W25QXX_CMD_WRITE_ENABLE</a></div><div class="ttdeci">@ XWDS_W25QXX_CMD_WRITE_ENABLE</div><div class="ttdef"><b>Definition</b> <a href="peripheral_2spi_2flash_2w25qxx_2device_8h_source.html#l00046">device.h:46</a></div></div>
<div class="ttc" id="agroup__xwos__lib__errno_html_gac2a2e9fa555401f94478f74e01868032"><div class="ttname"><a href="group__xwos__lib__errno.html#gac2a2e9fa555401f94478f74e01868032">EACCES</a></div><div class="ttdeci">#define EACCES</div><div class="ttdoc">Permission denied</div><div class="ttdef"><b>Definition</b> <a href="errno_8h_source.html#l00043">errno.h:43</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a9f8f2be10968c8ad18f21a70bca19575_cgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a9f8f2be10968c8ad18f21a70bca19575_cgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a9f8f2be10968c8ad18f21a70bca19575_cgraph" id="aspi_2flash_2w25qxx_2driver_8c_a9f8f2be10968c8ad18f21a70bca19575_cgraph">
<area shape="rect" title="W25QXX API：开启W25QXX的写操作" alt="" coords="5,31,191,56"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a1cbb15dfcbe39e7343a6f971bb3c7981" title="W25QXX API：向W25QXX发送指令" alt="" coords="441,31,572,56"/>
<area shape="poly" title=" " alt="" coords="191,41,428,41,428,46,191,46"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#ac69def306dc24b0debf5e3d5319f1b47" title="W25QXX API：读取W25QXX的SR寄存器" alt="" coords="239,56,393,81"/>
<area shape="poly" title=" " alt="" coords="192,52,225,55,225,61,191,57"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga44a23fb80fc46ddc53c26e27939307b3" title="W25QXX API：增加对象的引用计数" alt="" coords="620,5,757,31"/>
<area shape="poly" title=" " alt="" coords="572,32,606,27,607,32,573,37"/>
<area shape="rect" href="group__xwcd__peripheral__spi__flash__w25qxx.html#ga56fdd8b04713680accd8f32690dd6876" title="W25QXX API：减少对象的引用计数" alt="" coords="623,55,754,80"/>
<area shape="poly" title=" " alt="" coords="573,49,610,54,609,60,572,55"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gab5494314854848168abb6f20c73b3367" title="XWDS API：增加对象的引用计数" alt="" coords="805,5,921,31"/>
<area shape="poly" title=" " alt="" coords="757,15,792,15,792,21,757,21"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga00553482e152b68af626de972e2187d7" title="XWDS API：增加对象的引用计数" alt="" coords="969,5,1100,31"/>
<area shape="poly" title=" " alt="" coords="922,15,956,15,956,21,922,21"/>
<area shape="rect" href="group__xwcd__ds__spi__peripheral.html#gae0f7ed1d5997711b22b441e6e460d106" title="XWDS API：减少对象的引用计数" alt="" coords="809,55,918,80"/>
<area shape="poly" title=" " alt="" coords="754,65,795,65,795,70,754,70"/>
<area shape="rect" href="group__xwcd__ds__device.html#ga69eb284bb145032e408adea3131b9d36" title="XWDS API：减少对象的引用计数" alt="" coords="973,55,1096,80"/>
<area shape="poly" title=" " alt="" coords="918,65,960,65,960,70,918,70"/>
<area shape="poly" title=" " alt="" coords="393,56,427,51,428,56,394,61"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="spi_2flash_2w25qxx_2driver_8c_a9f8f2be10968c8ad18f21a70bca19575_icgraph.png" border="0" usemap="#aspi_2flash_2w25qxx_2driver_8c_a9f8f2be10968c8ad18f21a70bca19575_icgraph" alt=""/></div>
<map name="aspi_2flash_2w25qxx_2driver_8c_a9f8f2be10968c8ad18f21a70bca19575_icgraph" id="aspi_2flash_2w25qxx_2driver_8c_a9f8f2be10968c8ad18f21a70bca19575_icgraph">
<area shape="rect" title="W25QXX API：开启W25QXX的写操作" alt="" coords="243,104,428,129"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a9fcd3633d0d26580d4b47e92085c4fd8" title="W25QXX API：擦除W25QXX的32KiB的块" alt="" coords="5,5,195,31"/>
<area shape="poly" title=" " alt="" coords="301,99,251,71,194,44,159,33,161,28,196,40,254,66,304,95"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#ab4aa445a8fe937709bfec87b6964d69b" title="W25QXX API：擦除W25QXX的64KiB的块" alt="" coords="5,55,195,80"/>
<area shape="poly" title=" " alt="" coords="260,104,161,83,162,77,261,99"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#aeafca2ee95063cdd1f1880baddac68f9" title="W25QXX API：擦除W25QXX的全部数据" alt="" coords="13,104,187,129"/>
<area shape="poly" title=" " alt="" coords="229,119,188,119,188,114,229,114"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#acbd1ec4eb2e5d370bc72754432c6203f" title="W25QXX API：擦除W25QXX的sector" alt="" coords="7,153,193,179"/>
<area shape="poly" title=" " alt="" coords="261,135,162,156,161,151,260,130"/>
<area shape="rect" href="spi_2flash_2w25qxx_2driver_8c.html#a0c2e955e5d0462815261eb4011ccc80d" title="W25QXX API：向W25QXX写入数据" alt="" coords="30,203,170,228"/>
<area shape="poly" title=" " alt="" coords="303,139,253,166,196,192,157,205,155,200,194,188,251,161,300,134"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_91e37f1231cf9910bfa2c11be57d8122.html">xwcd</a></li><li class="navelem"><a class="el" href="dir_16e94e208a6ea392b1280d9110c02837.html">peripheral</a></li><li class="navelem"><a class="el" href="dir_2b6157805a722ae7cf1cfca466e9c7d4.html">spi</a></li><li class="navelem"><a class="el" href="dir_9b4c37ee27fd75baa93bcd60c608451d.html">flash</a></li><li class="navelem"><a class="el" href="dir_983a2496ef7d0ef45ee4770a744ccd5b.html">w25qxx</a></li><li class="navelem"><a class="el" href="spi_2flash_2w25qxx_2driver_8c.html">driver.c</a></li>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
