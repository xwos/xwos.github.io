<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Doxygen Awesome" />
<meta property="og:image" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta property="og:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<meta property="og:url" content="https://jothepro.github.io/doxygen-awesome-css/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta name="twitter:title" content="Doxygen Awesome" />
<meta name="twitter:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<!-- END twitter metadata -->
<title>XWOS API: 消息队列</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<a href="/" class="github-corner" title="返回首页">
  <svg viewBox="0 0 250 250" style="position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
    <path
      d="M 0 0 L 250 250 L 250 0 L 0 0 z M 181.19336 6.25 A 18.281986 19.638775 0 0 1 192.79297 10.798828 L 241.54492 54.201172 A 6.0939954 6.5462585 0 0 1 237.64453 65.787109 L 233.13477 65.787109 A 3.0469979 3.2731292 0 0 0 230.08789 69.060547 L 230.08789 111.61133 A 18.281986 19.638775 0 0 1 211.80664 131.25 L 205.71289 131.25 A 12.187991 13.092517 0 0 1 193.52344 118.1582 L 193.52344 98.519531 A 12.187991 13.092517 0 0 0 181.33594 85.425781 A 12.187991 13.092517 0 0 0 169.14844 98.519531 L 169.14844 118.1582 A 12.187991 13.092517 0 0 1 156.95898 131.25 L 150.86523 131.25 A 18.281986 19.638775 0 0 1 132.58398 111.61133 L 132.58398 68.994141 A 3.0469979 3.2731292 0 0 0 129.29297 65.722656 L 124.7832 65.722656 A 6.0939954 6.5462585 0 0 1 120.88281 54.201172 L 169.39258 10.798828 A 18.281986 19.638775 0 0 1 181.19336 6.25 z "/>
  </svg>
</a>
<style>.github-corner:hover</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">XWOS API
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">XWOS API参考手册</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__xwmd__isc__xwmq.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">结构体</a> &#124;
<a href="#func-members">函数</a>  </div>
  <div class="headertitle"><div class="title">消息队列<div class="ingroups"><a class="el" href="group__xwmd.html">XWOS中间件</a> &raquo; <a class="el" href="group__xwmd__isc.html">XWOS的通讯机制</a></div></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
消息队列 的协作图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq.png" border="0" usemap="#agroup____xwmd____isc____xwmq" alt=""/></div>
<map name="agroup____xwmd____isc____xwmq" id="agroup____xwmd____isc____xwmq">
<area shape="rect" href="group__xwmd__isc.html" title=" " alt="" coords="5,5,133,31"/>
<area shape="rect" title=" " alt="" coords="181,5,256,31"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
结构体</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structxwmq__msg.html">xwmq_msg</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">消息队列的消息  <a href="structxwmq__msg.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structxwmq.html">xwmq</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">消息队列对象  <a href="structxwmq.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structxwmq__d.html">xwmq_d</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">消息队列对象描述符  <a href="structxwmq__d.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:ga51603f04fac6de40ea6726d69b264cc7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga51603f04fac6de40ea6726d69b264cc7">xwmq_init</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, struct <a class="el" href="structxwmq__msg.html">xwmq_msg</a> *txq, <a class="el" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> num)</td></tr>
<tr class="memdesc:ga51603f04fac6de40ea6726d69b264cc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API：静态方式初始化消息队列  <br /></td></tr>
<tr class="separator:ga51603f04fac6de40ea6726d69b264cc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga57fec3e151fbf8044a2b7092ab2972b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga57fec3e151fbf8044a2b7092ab2972b3">xwmq_fini</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq)</td></tr>
<tr class="memdesc:ga57fec3e151fbf8044a2b7092ab2972b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API：销毁静态方式初始化的消息队列对象  <br /></td></tr>
<tr class="separator:ga57fec3e151fbf8044a2b7092ab2972b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b86e4a1725d0d9363ee8a31095222c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga8b86e4a1725d0d9363ee8a31095222c9">xwmq_grab</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq)</td></tr>
<tr class="memdesc:ga8b86e4a1725d0d9363ee8a31095222c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API：增加消息队列对象的引用计数  <br /></td></tr>
<tr class="separator:ga8b86e4a1725d0d9363ee8a31095222c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a7d5f642c3629ebfcf03e7721efd4c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga3a7d5f642c3629ebfcf03e7721efd4c2">xwmq_put</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq)</td></tr>
<tr class="memdesc:ga3a7d5f642c3629ebfcf03e7721efd4c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API：减少消息队列对象的引用计数  <br /></td></tr>
<tr class="separator:ga3a7d5f642c3629ebfcf03e7721efd4c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5b19490b030ec3da27b1e780f8093b80"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga5b19490b030ec3da27b1e780f8093b80">xwmq_get_tik</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq)</td></tr>
<tr class="memdesc:ga5b19490b030ec3da27b1e780f8093b80"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API：获取消息队列对象的标签  <br /></td></tr>
<tr class="separator:ga5b19490b030ec3da27b1e780f8093b80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab0fb10f481fc4b91c2e8bed1ba89dc13"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structxwmq__d.html">xwmq_d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#gab0fb10f481fc4b91c2e8bed1ba89dc13">xwmq_get_d</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq)</td></tr>
<tr class="memdesc:gab0fb10f481fc4b91c2e8bed1ba89dc13"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API：获取消息队列对象描述符  <br /></td></tr>
<tr class="separator:gab0fb10f481fc4b91c2e8bed1ba89dc13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1357e7c300f83638ef7758e1395e423d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga1357e7c300f83638ef7758e1395e423d">xwmq_acquire</a> (<a class="el" href="structxwmq__d.html">xwmq_d</a> mqd)</td></tr>
<tr class="memdesc:ga1357e7c300f83638ef7758e1395e423d"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API：检查消息队列对象的标签并增加引用计数  <br /></td></tr>
<tr class="separator:ga1357e7c300f83638ef7758e1395e423d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga57efc774777e38855532c6f6be1e4504"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga57efc774777e38855532c6f6be1e4504">xwmq_release</a> (<a class="el" href="structxwmq__d.html">xwmq_d</a> mqd)</td></tr>
<tr class="memdesc:ga57efc774777e38855532c6f6be1e4504"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API：检查消息队列对象的标签并减少引用计数  <br /></td></tr>
<tr class="separator:ga57efc774777e38855532c6f6be1e4504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad8d2b0b29234d2959a05eeb67a23ff45"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#gad8d2b0b29234d2959a05eeb67a23ff45">xwmq_eq</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> topic, void *data)</td></tr>
<tr class="memdesc:gad8d2b0b29234d2959a05eeb67a23ff45"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API：等待消息槽，成功后将消息发送到消息队列的 <b>尾端</b> （入队）  <br /></td></tr>
<tr class="separator:gad8d2b0b29234d2959a05eeb67a23ff45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8359c9ba02c8fb2a74e6c4c6094d94cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga8359c9ba02c8fb2a74e6c4c6094d94cc">xwmq_eq_to</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> topic, void *data, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:ga8359c9ba02c8fb2a74e6c4c6094d94cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API：限时等待消息槽，成功后将消息发送到消息队列的 <b>尾端</b> （入队）  <br /></td></tr>
<tr class="separator:ga8359c9ba02c8fb2a74e6c4c6094d94cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a32f1b107baef4bc25957bca4d4bddd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga8a32f1b107baef4bc25957bca4d4bddd">xwmq_eq_unintr</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> topic, void *data)</td></tr>
<tr class="memdesc:ga8a32f1b107baef4bc25957bca4d4bddd"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API：等待消息槽，且等待不可被中断， 成功后将消息发送到消息队列的 <b>尾端</b> （入队）  <br /></td></tr>
<tr class="separator:ga8a32f1b107baef4bc25957bca4d4bddd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga30b3fc4cf9323d3597eb8a383bdf611f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga30b3fc4cf9323d3597eb8a383bdf611f">xwmq_tryeq</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> topic, void *data)</td></tr>
<tr class="memdesc:ga30b3fc4cf9323d3597eb8a383bdf611f"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API：尝试获取消息槽，成功后将消息发送到消息队列的 <b>尾端</b> （入队）  <br /></td></tr>
<tr class="separator:ga30b3fc4cf9323d3597eb8a383bdf611f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga18b4d97f9de46feb6eebd197738aabf6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga18b4d97f9de46feb6eebd197738aabf6">xwmq_jq</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> topic, void *data)</td></tr>
<tr class="memdesc:ga18b4d97f9de46feb6eebd197738aabf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API：等待消息槽，成功后将消息发送到消息队列的 <b>首端</b> （插队）  <br /></td></tr>
<tr class="separator:ga18b4d97f9de46feb6eebd197738aabf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0eb1aa3f3e83b696612a7cd9cc90a6f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga0eb1aa3f3e83b696612a7cd9cc90a6f2">xwmq_jq_to</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> topic, void *data, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:ga0eb1aa3f3e83b696612a7cd9cc90a6f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API：限时等待消息槽，成功后将消息发送到消息队列的 <b>首端</b> （插队）  <br /></td></tr>
<tr class="separator:ga0eb1aa3f3e83b696612a7cd9cc90a6f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3c6e22dce3a927f790d95f1e294c5789"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga3c6e22dce3a927f790d95f1e294c5789">xwmq_jq_unintr</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> topic, void *data)</td></tr>
<tr class="memdesc:ga3c6e22dce3a927f790d95f1e294c5789"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API：等待消息槽，且等待不可被中断， 成功后将消息发送到消息队列的 <b>首端</b> （插队）  <br /></td></tr>
<tr class="separator:ga3c6e22dce3a927f790d95f1e294c5789"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga706a753c885996d85ec7fbf6d7461385"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga706a753c885996d85ec7fbf6d7461385">xwmq_tryjq</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> topic, void *data)</td></tr>
<tr class="memdesc:ga706a753c885996d85ec7fbf6d7461385"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API：尝试获取消息槽，成功后将消息发送到消息队列的 <b>首端</b> （插队）  <br /></td></tr>
<tr class="separator:ga706a753c885996d85ec7fbf6d7461385"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6dac123dd10ceaf0f24181b66d49d39a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga6dac123dd10ceaf0f24181b66d49d39a">xwmq_dq</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> *topic, void **databuf)</td></tr>
<tr class="memdesc:ga6dac123dd10ceaf0f24181b66d49d39a"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API: 等待从消息队列 <b>首端</b> 接收一条消息  <br /></td></tr>
<tr class="separator:ga6dac123dd10ceaf0f24181b66d49d39a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b11a75d7c8d792d305154b32c3dedee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga9b11a75d7c8d792d305154b32c3dedee">xwmq_dq_to</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> *topic, void **databuf, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:ga9b11a75d7c8d792d305154b32c3dedee"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API: 限时等待从消息队列 <b>首端</b> 接收一条消息  <br /></td></tr>
<tr class="separator:ga9b11a75d7c8d792d305154b32c3dedee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga98fe6e199b379e49ed413db1435f5b3a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga98fe6e199b379e49ed413db1435f5b3a">xwmq_dq_unintr</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> *topic, void **databuf)</td></tr>
<tr class="memdesc:ga98fe6e199b379e49ed413db1435f5b3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API: 等待从消息队列 <b>首端</b> 接收一条消息，且等待不可被中断  <br /></td></tr>
<tr class="separator:ga98fe6e199b379e49ed413db1435f5b3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga113bc97ec8121f3eb884e8da900497eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga113bc97ec8121f3eb884e8da900497eb">xwmq_trydq</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> *topic, void **databuf)</td></tr>
<tr class="memdesc:ga113bc97ec8121f3eb884e8da900497eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API: 尝试从消息队列 <b>首端</b> 接收一条消息  <br /></td></tr>
<tr class="separator:ga113bc97ec8121f3eb884e8da900497eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga79b5a6769a655a4e5946f3d60729b342"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga79b5a6769a655a4e5946f3d60729b342">xwmq_rq</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> *topic, void **databuf)</td></tr>
<tr class="memdesc:ga79b5a6769a655a4e5946f3d60729b342"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API: 等待从消息队列 <b>尾端</b> 接收一条消息  <br /></td></tr>
<tr class="separator:ga79b5a6769a655a4e5946f3d60729b342"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaacdb3c6bfb639e6d2444f479e9557c38"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#gaacdb3c6bfb639e6d2444f479e9557c38">xwmq_rq_to</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> *topic, void **databuf, <a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a> to)</td></tr>
<tr class="memdesc:gaacdb3c6bfb639e6d2444f479e9557c38"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API: 限时等待从消息队列 <b>尾端</b> 接收一条消息  <br /></td></tr>
<tr class="separator:gaacdb3c6bfb639e6d2444f479e9557c38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ebf67fde973c23ec718d35258dd7ee1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga1ebf67fde973c23ec718d35258dd7ee1">xwmq_rq_unintr</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> *topic, void **databuf)</td></tr>
<tr class="memdesc:ga1ebf67fde973c23ec718d35258dd7ee1"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API: 等待从消息队列 <b>尾端</b> 接收一条消息，且等待不可被中断  <br /></td></tr>
<tr class="separator:ga1ebf67fde973c23ec718d35258dd7ee1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c48b58030cf580f089d2cb42bc644fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xwmd__isc__xwmq.html#ga7c48b58030cf580f089d2cb42bc644fd">xwmq_tryrq</a> (struct <a class="el" href="structxwmq.html">xwmq</a> *mq, <a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> *topic, void **databuf)</td></tr>
<tr class="memdesc:ga7c48b58030cf580f089d2cb42bc644fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">XWMQ API: 尝试从消息队列 <b>尾端</b> 接收一条消息  <br /></td></tr>
<tr class="separator:ga7c48b58030cf580f089d2cb42bc644fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<p>技术参考手册： <a href="../docs/TechRefManual/Isc/Xwmq">消息队列</a></p>
<h2><a class="anchor" id="autotoc_md114"></a>
消息队列的静态初始化、销毁</h2>
<ul>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga51603f04fac6de40ea6726d69b264cc7" title="XWMQ API：静态方式初始化消息队列">xwmq_init()</a></code> ：初始化</li>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga57fec3e151fbf8044a2b7092ab2972b3" title="XWMQ API：销毁静态方式初始化的消息队列对象">xwmq_fini()</a></code> ：销毁</li>
</ul>
<h2><a class="anchor" id="autotoc_md115"></a>
消息队列的动态创建、删除</h2>
<p>XWOS并未提供基于动态内存管理的创建与删除CAPI。</p>
<h2><a class="anchor" id="autotoc_md116"></a>
发送消息</h2>
<ul>
<li>入队<ul>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#gad8d2b0b29234d2959a05eeb67a23ff45" title="XWMQ API：等待消息槽，成功后将消息发送到消息队列的 尾端 （入队）">xwmq_eq()</a></code> ：等待消息槽，只能在 <b>线程</b> 上下文使用</li>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga8359c9ba02c8fb2a74e6c4c6094d94cc" title="XWMQ API：限时等待消息槽，成功后将消息发送到消息队列的 尾端 （入队）">xwmq_eq_to()</a></code> ：限时等待消息槽，只能在 <b>线程</b> 上下文使用</li>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga8a32f1b107baef4bc25957bca4d4bddd" title="XWMQ API：等待消息槽，且等待不可被中断， 成功后将消息发送到消息队列的 尾端 （入队）">xwmq_eq_unintr()</a></code> ：不可中断地等待消息槽，只能在 <b>线程</b> 上下文使用</li>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga30b3fc4cf9323d3597eb8a383bdf611f" title="XWMQ API：尝试获取消息槽，成功后将消息发送到消息队列的 尾端 （入队）">xwmq_tryeq()</a></code> ：尝试获取消息槽，可在 <b>任意</b> 上下文使用</li>
</ul>
</li>
<li>插队<ul>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga18b4d97f9de46feb6eebd197738aabf6" title="XWMQ API：等待消息槽，成功后将消息发送到消息队列的 首端 （插队）">xwmq_jq()</a></code> ：等待消息槽，只能在 <b>线程</b> 上下文使用</li>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga0eb1aa3f3e83b696612a7cd9cc90a6f2" title="XWMQ API：限时等待消息槽，成功后将消息发送到消息队列的 首端 （插队）">xwmq_jq_to()</a></code> ：限时等待消息槽，只能在 <b>线程</b> 上下文使用</li>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga3c6e22dce3a927f790d95f1e294c5789" title="XWMQ API：等待消息槽，且等待不可被中断， 成功后将消息发送到消息队列的 首端 （插队）">xwmq_jq_unintr()</a></code> ：不可中断地等待消息槽，只能在 <b>线程</b> 上下文使用</li>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga706a753c885996d85ec7fbf6d7461385" title="XWMQ API：尝试获取消息槽，成功后将消息发送到消息队列的 首端 （插队）">xwmq_tryjq()</a></code> ：尝试获取消息槽，可在 <b>任意</b> 上下文使用</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md117"></a>
接收消息</h2>
<ul>
<li>首端离队<ul>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga6dac123dd10ceaf0f24181b66d49d39a" title="XWMQ API: 等待从消息队列 首端 接收一条消息">xwmq_dq()</a></code> ：等待消息，只能在 <b>线程</b> 上下文使用</li>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga9b11a75d7c8d792d305154b32c3dedee" title="XWMQ API: 限时等待从消息队列 首端 接收一条消息">xwmq_dq_to()</a></code> ：限时等待消息，只能在 <b>线程</b> 上下文使用</li>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga98fe6e199b379e49ed413db1435f5b3a" title="XWMQ API: 等待从消息队列 首端 接收一条消息，且等待不可被中断">xwmq_dq_unintr()</a></code> ：不可中断地等待消息，只能在 <b>线程</b> 上下文使用</li>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga113bc97ec8121f3eb884e8da900497eb" title="XWMQ API: 尝试从消息队列 首端 接收一条消息">xwmq_trydq()</a></code> ：尝试获取消息，可在 <b>任意</b> 上下文使用</li>
</ul>
</li>
<li>尾端离队<ul>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga79b5a6769a655a4e5946f3d60729b342" title="XWMQ API: 等待从消息队列 尾端 接收一条消息">xwmq_rq()</a></code> ：等待消息，只能在 <b>线程</b> 上下文使用</li>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#gaacdb3c6bfb639e6d2444f479e9557c38" title="XWMQ API: 限时等待从消息队列 尾端 接收一条消息">xwmq_rq_to()</a></code> ：限时等待消息，只能在 <b>线程</b> 上下文使用</li>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga1ebf67fde973c23ec718d35258dd7ee1" title="XWMQ API: 等待从消息队列 尾端 接收一条消息，且等待不可被中断">xwmq_rq_unintr()</a></code> ：不可中断地等待消息，只能在 <b>线程</b> 上下文使用</li>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga7c48b58030cf580f089d2cb42bc644fd" title="XWMQ API: 尝试从消息队列 尾端 接收一条消息">xwmq_tryrq()</a></code> ：尝试获取消息，可在 <b>任意</b> 上下文使用</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md118"></a>
消息队列对象的生命周期管理</h2>
<ul>
<li>通过 <b>对象指针</b> 管理生命周期：<ul>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga8b86e4a1725d0d9363ee8a31095222c9" title="XWMQ API：增加消息队列对象的引用计数">xwmq_grab()</a></code> ：增加引用计数</li>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga3a7d5f642c3629ebfcf03e7721efd4c2" title="XWMQ API：减少消息队列对象的引用计数">xwmq_put()</a></code> ：减少引用计数</li>
</ul>
</li>
<li>通过 <b>对象描述符</b> 管理生命周期：<ul>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga1357e7c300f83638ef7758e1395e423d" title="XWMQ API：检查消息队列对象的标签并增加引用计数">xwmq_acquire()</a></code> ：增加引用计数</li>
<li><code><a class="el" href="group__xwmd__isc__xwmq.html#ga57efc774777e38855532c6f6be1e4504" title="XWMQ API：检查消息队列对象的标签并减少引用计数">xwmq_release()</a></code> ：减少引用计数</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md119"></a>
对象描述符和对象标签</h2>
<p>已知消息队列对象的指针的情况下，可以通过 <code><a class="el" href="group__xwmd__isc__xwmq.html#gab0fb10f481fc4b91c2e8bed1ba89dc13" title="XWMQ API：获取消息队列对象描述符">xwmq_get_d()</a></code> 获取 <a class="el" href="structxwmq__d.html">xwmq_d</a> ， 或可以通过 <code><a class="el" href="group__xwmd__isc__xwmq.html#ga5b19490b030ec3da27b1e780f8093b80" title="XWMQ API：获取消息队列对象的标签">xwmq_get_tik()</a></code> 获取对象标签。 </p>
<h2 class="groupheader">函数说明</h2>
<a id="ga1357e7c300f83638ef7758e1395e423d" name="ga1357e7c300f83638ef7758e1395e423d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1357e7c300f83638ef7758e1395e423d">&#9670;&#160;</a></span>xwmq_acquire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_acquire </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structxwmq__d.html">xwmq_d</a>&#160;</td>
          <td class="paramname"><em>mqd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API：检查消息队列对象的标签并增加引用计数 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mqd</td><td>消息队列对象描述符 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-ENILOBJD</td><td>空的对象描述符 </td></tr>
    <tr><td class="paramname">-EOBJDEAD</td><td>对象无效 </td></tr>
    <tr><td class="paramname">-EACCES</td><td>对象标签检查失败 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：任意 </li>
</ul>
</dd></dl>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00059">59</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">   60</span>{</div>
<div class="line"><span class="lineno">   61</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="group__xwos__lib__xwobj.html#gac510a6eb1b6a08450ec6d65fe3bf7694">xwos_object_acquire</a>(&amp;mqd.<a class="code hl_variable" href="structxwmq__d.html#acdc8d67b1715bb673876fae39ada51f1">mq</a>-&gt;<a class="code hl_variable" href="structxwmq.html#a2adc72e15cceb2273b322bb1280462da">xwobj</a>, mqd.<a class="code hl_variable" href="structxwmq__d.html#a026076e147ea8817bc7bdfb6c7e18346">tik</a>);</div>
<div class="line"><span class="lineno">   62</span>}</div>
<div class="ttc" id="agroup__xwos__lib__xwobj_html_gac510a6eb1b6a08450ec6d65fe3bf7694"><div class="ttname"><a href="group__xwos__lib__xwobj.html#gac510a6eb1b6a08450ec6d65fe3bf7694">xwos_object_acquire</a></div><div class="ttdeci">xwer_t xwos_object_acquire(struct xwos_object *obj, xwsq_t tik)</div><div class="ttdoc">检查对象的标签并增加引用计数</div><div class="ttdef"><b>Definition</b> <a href="xwos_2lib_2object_8c_source.html#l00206">object.c:206</a></div></div>
<div class="ttc" id="astructxwmq__d_html_a026076e147ea8817bc7bdfb6c7e18346"><div class="ttname"><a href="structxwmq__d.html#a026076e147ea8817bc7bdfb6c7e18346">xwmq_d::tik</a></div><div class="ttdeci">xwsq_t tik</div><div class="ttdef"><b>Definition</b> <a href="xwmq_2mif_8h_source.html#l00112">mif.h:112</a></div></div>
<div class="ttc" id="astructxwmq__d_html_acdc8d67b1715bb673876fae39ada51f1"><div class="ttname"><a href="structxwmq__d.html#acdc8d67b1715bb673876fae39ada51f1">xwmq_d::mq</a></div><div class="ttdeci">struct xwmq * mq</div><div class="ttdef"><b>Definition</b> <a href="xwmq_2mif_8h_source.html#l00111">mif.h:111</a></div></div>
<div class="ttc" id="astructxwmq_html_a2adc72e15cceb2273b322bb1280462da"><div class="ttname"><a href="structxwmq.html#a2adc72e15cceb2273b322bb1280462da">xwmq::xwobj</a></div><div class="ttdeci">struct xwos_object xwobj</div><div class="ttdef"><b>Definition</b> <a href="xwmq_2mif_8h_source.html#l00098">mif.h:98</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga1357e7c300f83638ef7758e1395e423d_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga1357e7c300f83638ef7758e1395e423d_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga1357e7c300f83638ef7758e1395e423d_cgraph" id="agroup__xwmd__isc__xwmq_ga1357e7c300f83638ef7758e1395e423d_cgraph">
<area shape="rect" title="XWMQ API：检查消息队列对象的标签并增加引用计数" alt="" coords="5,45,112,70"/>
<area shape="rect" href="group__xwos__lib__xwobj.html#gac510a6eb1b6a08450ec6d65fe3bf7694" title="检查对象的标签并增加引用计数" alt="" coords="160,45,304,70"/>
<area shape="poly" title=" " alt="" coords="112,55,146,55,146,60,112,60"/>
<area shape="rect" href="xwos_2lib_2object_8c.html#ad9c8346b5ea34f808ceb236094452aa9" title=" " alt="" coords="352,5,496,45"/>
<area shape="poly" title=" " alt="" coords="304,43,338,37,339,42,305,48"/>
<area shape="rect" href="xwos_2lib_2object_8c.html#a4613deb6ad50ee8bb3acd1da5842d4ff" title=" " alt="" coords="352,69,496,109"/>
<area shape="poly" title=" " alt="" coords="305,67,339,72,338,78,304,72"/>
</map>
</div>

</div>
</div>
<a id="ga6dac123dd10ceaf0f24181b66d49d39a" name="ga6dac123dd10ceaf0f24181b66d49d39a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6dac123dd10ceaf0f24181b66d49d39a">&#9670;&#160;</a></span>xwmq_dq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_dq </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>databuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API: 等待从消息队列 <b>首端</b> 接收一条消息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">:topic</td><td>指向缓冲区的指针，通过此缓冲区返回接收消息的标题 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">:databuf</td><td>指向缓冲区的指针，通过此缓冲区返回接收消息的数据 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-EINTR</td><td>等待被中断 </td></tr>
    <tr><td class="paramname">-ENOTTHDCTX</td><td>不在线程上下文中 </td></tr>
    <tr><td class="paramname">-EDSPMPT</td><td>抢占被关闭 </td></tr>
    <tr><td class="paramname">-EDSBH</td><td>中断底半部被关闭 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p>若接收队列中没有消息，就阻塞接收线程，直到有新的消息或被中断。</p>
<p>接收消息后，会释放消息槽。若有发送线程正在等待消息槽，将唤醒发送线程。</p>
<p>如果等待被中断，此CAPI将返回 <code>-EINTR</code> 。 </p>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00388">388</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  389</span>{</div>
<div class="line"><span class="lineno">  390</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="group__xwmd__isc__xwmq.html#ga9b11a75d7c8d792d305154b32c3dedee">xwmq_dq_to</a>(mq, topic, databuf, <a class="code hl_define" href="group__xwos__lib__type__time.html#gad8937a773924ae599c30f9f75a7b7dbf">XWTM_MAX</a>);</div>
<div class="line"><span class="lineno">  391</span>}</div>
<div class="ttc" id="agroup__xwmd__isc__xwmq_html_ga9b11a75d7c8d792d305154b32c3dedee"><div class="ttname"><a href="group__xwmd__isc__xwmq.html#ga9b11a75d7c8d792d305154b32c3dedee">xwmq_dq_to</a></div><div class="ttdeci">xwer_t xwmq_dq_to(struct xwmq *mq, xwsq_t *topic, void **databuf, xwtm_t to)</div><div class="ttdoc">XWMQ API: 限时等待从消息队列 首端 接收一条消息</div><div class="ttdef"><b>Definition</b> <a href="xwmq_8c_source.html#l00394">xwmq.c:394</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type__time_html_gad8937a773924ae599c30f9f75a7b7dbf"><div class="ttname"><a href="group__xwos__lib__type__time.html#gad8937a773924ae599c30f9f75a7b7dbf">XWTM_MAX</a></div><div class="ttdeci">#define XWTM_MAX</div><div class="ttdoc">xwtm_t 的最大值</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00724">type.h:724</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga6dac123dd10ceaf0f24181b66d49d39a_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga6dac123dd10ceaf0f24181b66d49d39a_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga6dac123dd10ceaf0f24181b66d49d39a_cgraph" id="agroup__xwmd__isc__xwmq_ga6dac123dd10ceaf0f24181b66d49d39a_cgraph">
<area shape="rect" title="XWMQ API: 等待从消息队列 首端 接收一条消息" alt="" coords="5,189,84,215"/>
<area shape="rect" href="group__xwmd__isc__xwmq.html#ga9b11a75d7c8d792d305154b32c3dedee" title="XWMQ API: 限时等待从消息队列 首端 接收一条消息" alt="" coords="132,189,228,215"/>
<area shape="poly" title=" " alt="" coords="84,199,118,199,118,205,84,205"/>
<area shape="rect" href="xwmq_8c.html#afcc2194eee03bb360b90d0c47b246072" title="从消息接收队列头部选择一条消息" alt="" coords="276,103,417,128"/>
<area shape="poly" title=" " alt="" coords="204,187,275,149,307,132,309,137,277,154,206,192"/>
<area shape="rect" href="xwmq_8c.html#a5a70d91d330701da212249f5728fb5e4" title="释放一个消息槽" alt="" coords="289,164,404,189"/>
<area shape="poly" title=" " alt="" coords="228,192,275,185,276,190,229,197"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b" title="XWOS API：发布信号量" alt="" coords="288,213,405,239"/>
<area shape="poly" title=" " alt="" coords="229,206,275,213,274,218,228,212"/>
<area shape="rect" href="group__xwos__sync__sem.html#gab9fce6b4dc3add4c714dfa1c8041593f" title="XWOS API：限时等待并获取信号量" alt="" coords="279,263,414,288"/>
<area shape="poly" title=" " alt="" coords="205,212,277,249,293,255,291,260,275,254,202,217"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae" title="删除一个节点，并重新初始化它" alt="" coords="489,29,624,55"/>
<area shape="poly" title=" " alt="" coords="375,100,464,63,489,56,491,61,466,69,377,105"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf" title="XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭" alt="" coords="471,79,642,104"/>
<area shape="poly" title=" " alt="" coords="417,105,457,100,458,105,418,110"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979" title="XWOS API：解锁自旋锁，并恢复本地CPU的中断标志" alt="" coords="465,128,648,153"/>
<area shape="poly" title=" " alt="" coords="418,121,452,125,451,131,417,126"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab7918962f86f86d5c7049922a5173e81" title="删除prev节点与next节点之间的节点" alt="" coords="696,5,863,31"/>
<area shape="poly" title=" " alt="" coords="624,32,682,26,682,31,624,37"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569" title="初始化一个链表节点。" alt="" coords="706,55,853,80"/>
<area shape="poly" title=" " alt="" coords="624,47,692,55,692,60,624,52"/>
<area shape="rect" href="group__xwmm__memslice.html#ga337a549e8b2fc9e95d1e9c240bde1e31" title="XWMM API：释放内存切片" alt="" coords="480,177,633,203"/>
<area shape="poly" title=" " alt="" coords="404,178,466,182,466,187,404,183"/>
<area shape="rect" href="group__xwos__lib__lfq.html#ga1cac1b49ec185ccb135f19401e286166" title="将一个节点推入无锁队列（栈式队列）" alt="" coords="725,177,833,203"/>
<area shape="poly" title=" " alt="" coords="634,187,711,187,711,193,634,193"/>
</map>
</div>

</div>
</div>
<a id="ga9b11a75d7c8d792d305154b32c3dedee" name="ga9b11a75d7c8d792d305154b32c3dedee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9b11a75d7c8d792d305154b32c3dedee">&#9670;&#160;</a></span>xwmq_dq_to()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_dq_to </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>databuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API: 限时等待从消息队列 <b>首端</b> 接收一条消息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">:topic</td><td>指向缓冲区的指针，通过此缓冲区返回接收消息的标题 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">:databuf</td><td>指向缓冲区的指针，通过此缓冲区返回接收消息的数据 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-EINTR</td><td>等待被中断 </td></tr>
    <tr><td class="paramname">-ETIMEDOUT</td><td>超时 </td></tr>
    <tr><td class="paramname">-ENOTTHDCTX</td><td>不在线程上下文中 </td></tr>
    <tr><td class="paramname">-EDSPMPT</td><td>抢占被关闭 </td></tr>
    <tr><td class="paramname">-EDSBH</td><td>中断底半部被关闭 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<ul>
<li>若接收队列中没有消息，就阻塞接收线程，直到新的消息或被中断或超时。</li>
<li>接收消息后，会释放消息槽。若有发送线程正在等待消息槽，将唤醒发送线程。</li>
<li>如果等待被中断，此CAPI将返回 <code>-EINTR</code> 。</li>
<li><code>to</code> 表示等待超时的时间点：<ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
</li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00394">394</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  395</span>{</div>
<div class="line"><span class="lineno">  396</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  397</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmq__msg.html">xwmq_msg</a> * msg;</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((mq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  400</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  401</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((databuf), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>        rc = <a class="code hl_function" href="group__xwos__sync__sem.html#gab9fce6b4dc3add4c714dfa1c8041593f">xwos_sem_wait_to</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a287dc420d0b42e9c77135a78f08f1ef8">rxqsem</a>, to);</div>
<div class="line"><span class="lineno">  404</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  405</span>                <span class="keywordflow">goto</span> err_sem_wait_to;</div>
<div class="line"><span class="lineno">  406</span>        }</div>
<div class="line"><span class="lineno">  407</span>        msg = <a class="code hl_function" href="xwmq_8c.html#afcc2194eee03bb360b90d0c47b246072">xwmq_choose_head</a>(mq);</div>
<div class="line"><span class="lineno">  408</span>        *databuf = msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>;</div>
<div class="line"><span class="lineno">  409</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>) {</div>
<div class="line"><span class="lineno">  410</span>                *<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a> = msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>;</div>
<div class="line"><span class="lineno">  411</span>        }</div>
<div class="line"><span class="lineno">  412</span>        <a class="code hl_function" href="xwmq_8c.html#a5a70d91d330701da212249f5728fb5e4">xwmq_msg_put</a>(mq, msg);</div>
<div class="line"><span class="lineno">  413</span>        <a class="code hl_function" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b">xwos_sem_post</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a35a574ad328c5ac780f7baa931966c72">txqsem</a>);</div>
<div class="line"><span class="lineno">  414</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span>err_sem_wait_to:</div>
<div class="line"><span class="lineno">  417</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  418</span>}</div>
<div class="ttc" id="agroup__xwos__lib__errno_html_ga3f317946e043623f9d6b93dbf60e6316"><div class="ttname"><a href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a></div><div class="ttdeci">#define EFAULT</div><div class="ttdoc">Bad address</div><div class="ttdef"><b>Definition</b> <a href="errno_8h_source.html#l00044">errno.h:44</a></div></div>
<div class="ttc" id="agroup__xwos__lib__errno_html_ga6a72d49d869215a02342eb465166537b"><div class="ttname"><a href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a></div><div class="ttdeci">#define XWOK</div><div class="ttdoc">No error</div><div class="ttdef"><b>Definition</b> <a href="errno_8h_source.html#l00182">errno.h:182</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga06847ea8c7edb2b1f166288b230f251f"><div class="ttname"><a href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a></div><div class="ttdeci">signed long xwer_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00554">type.h:554</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00028">type.h:28</a></div></div>
<div class="ttc" id="agroup__xwos__standard_html_ga0c63a67f52b315298e2be98f79cd0c08"><div class="ttname"><a href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a></div><div class="ttdeci">#define XWOS_VALIDATE(exp, errstr,...)</div><div class="ttdoc">检查函数参数是否有效</div><div class="ttdef"><b>Definition</b> <a href="xwos_2standard_8h_source.html#l00076">standard.h:76</a></div></div>
<div class="ttc" id="agroup__xwos__sync__sem_html_gab9fce6b4dc3add4c714dfa1c8041593f"><div class="ttname"><a href="group__xwos__sync__sem.html#gab9fce6b4dc3add4c714dfa1c8041593f">xwos_sem_wait_to</a></div><div class="ttdeci">static xwer_t xwos_sem_wait_to(struct xwos_sem *sem, xwtm_t to)</div><div class="ttdoc">XWOS API：限时等待并获取信号量</div><div class="ttdef"><b>Definition</b> <a href="sync_2sem_8h_source.html#l00418">sem.h:418</a></div></div>
<div class="ttc" id="agroup__xwos__sync__sem_html_gaf6f291eaa8c268dccb6ebc675a24755b"><div class="ttname"><a href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b">xwos_sem_post</a></div><div class="ttdeci">static xwer_t xwos_sem_post(struct xwos_sem *sem)</div><div class="ttdoc">XWOS API：发布信号量</div><div class="ttdef"><b>Definition</b> <a href="sync_2sem_8h_source.html#l00373">sem.h:373</a></div></div>
<div class="ttc" id="astructxwmq__msg_html"><div class="ttname"><a href="structxwmq__msg.html">xwmq_msg</a></div><div class="ttdoc">消息队列的消息</div><div class="ttdef"><b>Definition</b> <a href="xwmq_2mif_8h_source.html#l00087">mif.h:87</a></div></div>
<div class="ttc" id="astructxwmq__msg_html_abb9c4759c5d64abb5fdb9d79e6f56cd1"><div class="ttname"><a href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">xwmq_msg::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition</b> <a href="xwmq_2mif_8h_source.html#l00088">mif.h:88</a></div></div>
<div class="ttc" id="astructxwmq__msg_html_ac4d91a1198be2297329071a39ce28f5d"><div class="ttname"><a href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">xwmq_msg::topic</a></div><div class="ttdeci">xwsq_t topic</div><div class="ttdef"><b>Definition</b> <a href="xwmq_2mif_8h_source.html#l00089">mif.h:89</a></div></div>
<div class="ttc" id="astructxwmq_html_a287dc420d0b42e9c77135a78f08f1ef8"><div class="ttname"><a href="structxwmq.html#a287dc420d0b42e9c77135a78f08f1ef8">xwmq::rxqsem</a></div><div class="ttdeci">struct xwos_sem rxqsem</div><div class="ttdef"><b>Definition</b> <a href="xwmq_2mif_8h_source.html#l00104">mif.h:104</a></div></div>
<div class="ttc" id="astructxwmq_html_a35a574ad328c5ac780f7baa931966c72"><div class="ttname"><a href="structxwmq.html#a35a574ad328c5ac780f7baa931966c72">xwmq::txqsem</a></div><div class="ttdeci">struct xwos_sem txqsem</div><div class="ttdef"><b>Definition</b> <a href="xwmq_2mif_8h_source.html#l00101">mif.h:101</a></div></div>
<div class="ttc" id="axwmq_8c_html_a5a70d91d330701da212249f5728fb5e4"><div class="ttname"><a href="xwmq_8c.html#a5a70d91d330701da212249f5728fb5e4">xwmq_msg_put</a></div><div class="ttdeci">static void xwmq_msg_put(struct xwmq *mq, struct xwmq_msg *msg)</div><div class="ttdoc">释放一个消息槽</div><div class="ttdef"><b>Definition</b> <a href="xwmq_8c_source.html#l00169">xwmq.c:169</a></div></div>
<div class="ttc" id="axwmq_8c_html_afcc2194eee03bb360b90d0c47b246072"><div class="ttname"><a href="xwmq_8c.html#afcc2194eee03bb360b90d0c47b246072">xwmq_choose_head</a></div><div class="ttdeci">static struct xwmq_msg * xwmq_choose_head(struct xwmq *mq)</div><div class="ttdoc">从消息接收队列头部选择一条消息</div><div class="ttdef"><b>Definition</b> <a href="xwmq_8c_source.html#l00354">xwmq.c:354</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga9b11a75d7c8d792d305154b32c3dedee_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga9b11a75d7c8d792d305154b32c3dedee_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga9b11a75d7c8d792d305154b32c3dedee_cgraph" id="agroup__xwmd__isc__xwmq_ga9b11a75d7c8d792d305154b32c3dedee_cgraph">
<area shape="rect" title="XWMQ API: 限时等待从消息队列 首端 接收一条消息" alt="" coords="5,189,101,215"/>
<area shape="rect" href="xwmq_8c.html#afcc2194eee03bb360b90d0c47b246072" title="从消息接收队列头部选择一条消息" alt="" coords="149,103,291,128"/>
<area shape="poly" title=" " alt="" coords="77,187,148,149,180,132,183,137,151,154,80,192"/>
<area shape="rect" href="xwmq_8c.html#a5a70d91d330701da212249f5728fb5e4" title="释放一个消息槽" alt="" coords="163,164,277,189"/>
<area shape="poly" title=" " alt="" coords="101,192,149,185,150,190,102,197"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b" title="XWOS API：发布信号量" alt="" coords="161,213,279,239"/>
<area shape="poly" title=" " alt="" coords="102,206,148,213,147,218,101,212"/>
<area shape="rect" href="group__xwos__sync__sem.html#gab9fce6b4dc3add4c714dfa1c8041593f" title="XWOS API：限时等待并获取信号量" alt="" coords="153,263,287,288"/>
<area shape="poly" title=" " alt="" coords="78,212,150,249,167,255,165,260,148,254,76,217"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae" title="删除一个节点，并重新初始化它" alt="" coords="363,29,497,55"/>
<area shape="poly" title=" " alt="" coords="248,100,338,63,362,56,364,61,340,69,250,105"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf" title="XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭" alt="" coords="345,79,515,104"/>
<area shape="poly" title=" " alt="" coords="291,105,331,100,331,105,291,110"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979" title="XWOS API：解锁自旋锁，并恢复本地CPU的中断标志" alt="" coords="339,128,521,153"/>
<area shape="poly" title=" " alt="" coords="291,121,325,125,325,131,291,126"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab7918962f86f86d5c7049922a5173e81" title="删除prev节点与next节点之间的节点" alt="" coords="569,5,736,31"/>
<area shape="poly" title=" " alt="" coords="497,32,555,26,556,31,498,37"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569" title="初始化一个链表节点。" alt="" coords="579,55,726,80"/>
<area shape="poly" title=" " alt="" coords="498,47,566,55,565,60,497,52"/>
<area shape="rect" href="group__xwmm__memslice.html#ga337a549e8b2fc9e95d1e9c240bde1e31" title="XWMM API：释放内存切片" alt="" coords="353,177,507,203"/>
<area shape="poly" title=" " alt="" coords="278,178,340,182,339,187,277,183"/>
<area shape="rect" href="group__xwos__lib__lfq.html#ga1cac1b49ec185ccb135f19401e286166" title="将一个节点推入无锁队列（栈式队列）" alt="" coords="599,177,707,203"/>
<area shape="poly" title=" " alt="" coords="507,187,585,187,585,193,507,193"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga9b11a75d7c8d792d305154b32c3dedee_icgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga9b11a75d7c8d792d305154b32c3dedee_icgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga9b11a75d7c8d792d305154b32c3dedee_icgraph" id="agroup__xwmd__isc__xwmq_ga9b11a75d7c8d792d305154b32c3dedee_icgraph">
<area shape="rect" title="XWMQ API: 限时等待从消息队列 首端 接收一条消息" alt="" coords="132,5,228,31"/>
<area shape="rect" href="group__xwmd__isc__xwmq.html#ga6dac123dd10ceaf0f24181b66d49d39a" title="XWMQ API: 等待从消息队列 首端 接收一条消息" alt="" coords="5,5,84,31"/>
<area shape="poly" title=" " alt="" coords="118,21,84,21,84,15,118,15"/>
</map>
</div>

</div>
</div>
<a id="ga98fe6e199b379e49ed413db1435f5b3a" name="ga98fe6e199b379e49ed413db1435f5b3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga98fe6e199b379e49ed413db1435f5b3a">&#9670;&#160;</a></span>xwmq_dq_unintr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_dq_unintr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>databuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API: 等待从消息队列 <b>首端</b> 接收一条消息，且等待不可被中断 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">:topic</td><td>指向缓冲区的指针，通过此缓冲区返回接收消息的标题 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">:databuf</td><td>指向缓冲区的指针，通过此缓冲区返回接收消息的数据 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-ENOTTHDCTX</td><td>不在线程上下文中 </td></tr>
    <tr><td class="paramname">-EDSPMPT</td><td>抢占被关闭 </td></tr>
    <tr><td class="paramname">-EDSBH</td><td>中断底半部被关闭 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p>若接收队列中没有消息，就阻塞接收线程，直到有新的消息。 并且接收线程的等待不可被中断。</p>
<p>接收消息后，会释放消息槽。若有发送线程正在等待消息槽，将唤醒发送线程。 </p>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00421">421</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  422</span>{</div>
<div class="line"><span class="lineno">  423</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  424</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmq__msg.html">xwmq_msg</a> * msg;</div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((mq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  427</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  428</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((databuf), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  429</span> </div>
<div class="line"><span class="lineno">  430</span>        rc = <a class="code hl_function" href="group__xwos__sync__sem.html#ga794e05587874027d02d0e4c87f9c2893">xwos_sem_wait_unintr</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a287dc420d0b42e9c77135a78f08f1ef8">rxqsem</a>);</div>
<div class="line"><span class="lineno">  431</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  432</span>                <span class="keywordflow">goto</span> err_sem_wait_unintr;</div>
<div class="line"><span class="lineno">  433</span>        }</div>
<div class="line"><span class="lineno">  434</span>        msg = <a class="code hl_function" href="xwmq_8c.html#afcc2194eee03bb360b90d0c47b246072">xwmq_choose_head</a>(mq);</div>
<div class="line"><span class="lineno">  435</span>        *databuf = msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>;</div>
<div class="line"><span class="lineno">  436</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>) {</div>
<div class="line"><span class="lineno">  437</span>                *<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a> = msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>;</div>
<div class="line"><span class="lineno">  438</span>        }</div>
<div class="line"><span class="lineno">  439</span>        <a class="code hl_function" href="xwmq_8c.html#a5a70d91d330701da212249f5728fb5e4">xwmq_msg_put</a>(mq, msg);</div>
<div class="line"><span class="lineno">  440</span>        <a class="code hl_function" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b">xwos_sem_post</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a35a574ad328c5ac780f7baa931966c72">txqsem</a>);</div>
<div class="line"><span class="lineno">  441</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>err_sem_wait_unintr:</div>
<div class="line"><span class="lineno">  444</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  445</span>}</div>
<div class="ttc" id="agroup__xwos__sync__sem_html_ga794e05587874027d02d0e4c87f9c2893"><div class="ttname"><a href="group__xwos__sync__sem.html#ga794e05587874027d02d0e4c87f9c2893">xwos_sem_wait_unintr</a></div><div class="ttdeci">static xwer_t xwos_sem_wait_unintr(struct xwos_sem *sem)</div><div class="ttdoc">XWOS API：等待并获取信号量，且等待不可被中断</div><div class="ttdef"><b>Definition</b> <a href="sync_2sem_8h_source.html#l00436">sem.h:436</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga98fe6e199b379e49ed413db1435f5b3a_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga98fe6e199b379e49ed413db1435f5b3a_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga98fe6e199b379e49ed413db1435f5b3a_cgraph" id="agroup__xwmd__isc__xwmq_ga98fe6e199b379e49ed413db1435f5b3a_cgraph">
<area shape="rect" title="XWMQ API: 等待从消息队列 首端 接收一条消息，且等待不可被中断" alt="" coords="5,189,123,215"/>
<area shape="rect" href="xwmq_8c.html#afcc2194eee03bb360b90d0c47b246072" title="从消息接收队列头部选择一条消息" alt="" coords="177,103,319,128"/>
<area shape="poly" title=" " alt="" coords="91,187,170,149,206,132,208,136,172,154,93,192"/>
<area shape="rect" href="xwmq_8c.html#a5a70d91d330701da212249f5728fb5e4" title="释放一个消息槽" alt="" coords="191,164,305,189"/>
<area shape="poly" title=" " alt="" coords="122,191,176,184,177,189,123,197"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b" title="XWOS API：发布信号量" alt="" coords="189,213,307,239"/>
<area shape="poly" title=" " alt="" coords="123,207,176,214,175,219,122,212"/>
<area shape="rect" href="group__xwos__sync__sem.html#ga794e05587874027d02d0e4c87f9c2893" title="XWOS API：等待并获取信号量，且等待不可被中断" alt="" coords="171,263,325,288"/>
<area shape="poly" title=" " alt="" coords="91,212,172,249,191,256,189,261,170,254,89,217"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae" title="删除一个节点，并重新初始化它" alt="" coords="397,29,532,55"/>
<area shape="poly" title=" " alt="" coords="278,100,372,63,398,56,399,61,374,69,279,105"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf" title="XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭" alt="" coords="379,79,550,104"/>
<area shape="poly" title=" " alt="" coords="319,105,366,100,366,105,319,110"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979" title="XWOS API：解锁自旋锁，并恢复本地CPU的中断标志" alt="" coords="373,128,556,153"/>
<area shape="poly" title=" " alt="" coords="319,121,360,126,360,131,318,126"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab7918962f86f86d5c7049922a5173e81" title="删除prev节点与next节点之间的节点" alt="" coords="604,5,771,31"/>
<area shape="poly" title=" " alt="" coords="532,32,590,26,590,31,532,37"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569" title="初始化一个链表节点。" alt="" coords="614,55,761,80"/>
<area shape="poly" title=" " alt="" coords="532,47,600,55,600,60,532,52"/>
<area shape="rect" href="group__xwmm__memslice.html#ga337a549e8b2fc9e95d1e9c240bde1e31" title="XWMM API：释放内存切片" alt="" coords="388,177,541,203"/>
<area shape="poly" title=" " alt="" coords="306,178,374,182,374,187,305,183"/>
<area shape="rect" href="group__xwos__lib__lfq.html#ga1cac1b49ec185ccb135f19401e286166" title="将一个节点推入无锁队列（栈式队列）" alt="" coords="633,177,741,203"/>
<area shape="poly" title=" " alt="" coords="542,187,619,187,619,193,542,193"/>
</map>
</div>

</div>
</div>
<a id="gad8d2b0b29234d2959a05eeb67a23ff45" name="gad8d2b0b29234d2959a05eeb67a23ff45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad8d2b0b29234d2959a05eeb67a23ff45">&#9670;&#160;</a></span>xwmq_eq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_eq </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a>&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API：等待消息槽，成功后将消息发送到消息队列的 <b>尾端</b> （入队） </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>消息的标题 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>消息的数据 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-EINTR</td><td>等待被中断 </td></tr>
    <tr><td class="paramname">-ENOTTHDCTX</td><td>不在线程上下文中 </td></tr>
    <tr><td class="paramname">-EDSPMPT</td><td>抢占被关闭 </td></tr>
    <tr><td class="paramname">-EDSBH</td><td>中断底半部被关闭 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p>若消息槽队列中没有空闲的消息槽，就阻塞发送线程，直到有空闲的消息槽或被中断。</p>
<p>如果等待被中断，此CAPI将返回 <code>-EINTR</code> 。 </p>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00176">176</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  177</span>{</div>
<div class="line"><span class="lineno">  178</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="group__xwmd__isc__xwmq.html#ga8359c9ba02c8fb2a74e6c4c6094d94cc">xwmq_eq_to</a>(mq, topic, data, <a class="code hl_define" href="group__xwos__lib__type__time.html#gad8937a773924ae599c30f9f75a7b7dbf">XWTM_MAX</a>);</div>
<div class="line"><span class="lineno">  179</span>}</div>
<div class="ttc" id="agroup__xwmd__isc__xwmq_html_ga8359c9ba02c8fb2a74e6c4c6094d94cc"><div class="ttname"><a href="group__xwmd__isc__xwmq.html#ga8359c9ba02c8fb2a74e6c4c6094d94cc">xwmq_eq_to</a></div><div class="ttdeci">xwer_t xwmq_eq_to(struct xwmq *mq, xwsq_t topic, void *data, xwtm_t to)</div><div class="ttdoc">XWMQ API：限时等待消息槽，成功后将消息发送到消息队列的 尾端 （入队）</div><div class="ttdef"><b>Definition</b> <a href="xwmq_8c_source.html#l00182">xwmq.c:182</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_gad8d2b0b29234d2959a05eeb67a23ff45_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_gad8d2b0b29234d2959a05eeb67a23ff45_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_gad8d2b0b29234d2959a05eeb67a23ff45_cgraph" id="agroup__xwmd__isc__xwmq_gad8d2b0b29234d2959a05eeb67a23ff45_cgraph">
<area shape="rect" title="XWMQ API：等待消息槽，成功后将消息发送到消息队列的 尾端 （入队）" alt="" coords="5,129,84,155"/>
<area shape="rect" href="group__xwmd__isc__xwmq.html#ga8359c9ba02c8fb2a74e6c4c6094d94cc" title="XWMQ API：限时等待消息槽，成功后将消息发送到消息队列的 尾端 （入队）" alt="" coords="132,129,228,155"/>
<area shape="poly" title=" " alt="" coords="84,139,118,139,118,145,84,145"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga2aa317fe5cea0989c273b3c69f69d795" title="将一个节点加入链表尾部（链表头的前面）" alt="" coords="298,5,437,31"/>
<area shape="poly" title=" " alt="" coords="188,127,222,84,247,60,275,40,287,33,289,38,277,44,250,64,226,88,192,131"/>
<area shape="rect" href="xwmq_8c.html#a266a048d37f3f16990f8d6bcf3ac2828" title="获取一个消息槽" alt="" coords="310,55,425,80"/>
<area shape="poly" title=" " alt="" coords="200,127,235,108,275,89,296,81,298,86,277,94,237,112,203,132"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b" title="XWOS API：发布信号量" alt="" coords="309,104,426,129"/>
<area shape="poly" title=" " alt="" coords="228,133,294,124,295,129,229,138"/>
<area shape="rect" href="group__xwos__sync__sem.html#gab9fce6b4dc3add4c714dfa1c8041593f" title="XWOS API：限时等待并获取信号量" alt="" coords="300,153,435,179"/>
<area shape="poly" title=" " alt="" coords="229,145,287,153,286,158,228,151"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf" title="XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭" alt="" coords="282,203,453,228"/>
<area shape="poly" title=" " alt="" coords="205,152,277,188,302,196,300,201,275,192,202,157"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979" title="XWOS API：解锁自旋锁，并恢复本地CPU的中断标志" alt="" coords="276,252,459,277"/>
<area shape="poly" title=" " alt="" coords="192,153,227,195,251,218,277,237,293,245,290,249,275,242,247,222,223,198,188,157"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga42c09bc0da5cac8327003314056f43b7" title="将一个新节点加入到prev与next之间" alt="" coords="507,5,677,31"/>
<area shape="poly" title=" " alt="" coords="437,15,493,15,493,21,437,21"/>
<area shape="rect" href="group__xwmm__memslice.html#ga6b9a1ff8b0ea0720d3e684a6b673dbe6" title="XWMM API：申请内存切片" alt="" coords="513,55,671,80"/>
<area shape="poly" title=" " alt="" coords="425,65,499,65,499,70,425,70"/>
<area shape="rect" href="group__xwos__lib__lfq.html#gacbe43c237a9c7c6f21baa98daaf49e68" title="弹出无锁队列中的第一个节点（栈式队列）" alt="" coords="725,55,827,80"/>
<area shape="poly" title=" " alt="" coords="672,65,711,65,711,70,672,70"/>
</map>
</div>

</div>
</div>
<a id="ga8359c9ba02c8fb2a74e6c4c6094d94cc" name="ga8359c9ba02c8fb2a74e6c4c6094d94cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8359c9ba02c8fb2a74e6c4c6094d94cc">&#9670;&#160;</a></span>xwmq_eq_to()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_eq_to </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a>&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API：限时等待消息槽，成功后将消息发送到消息队列的 <b>尾端</b> （入队） </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>消息的标题 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>消息的数据 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-EINTR</td><td>等待被中断 </td></tr>
    <tr><td class="paramname">-ETIMEDOUT</td><td>超时 </td></tr>
    <tr><td class="paramname">-ENOTTHDCTX</td><td>不在线程上下文中 </td></tr>
    <tr><td class="paramname">-EDSPMPT</td><td>抢占被关闭 </td></tr>
    <tr><td class="paramname">-EDSBH</td><td>中断底半部被关闭 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<ul>
<li>若消息槽队列中没有空闲的消息槽，就阻塞发送线程，直到有空闲的消息槽或被中断或超时。</li>
<li>如果等待被中断，此CAPI将返回 <code>-EINTR</code> 。</li>
<li><code>to</code> 表示等待超时的时间点：<ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
</li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00182">182</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  183</span>{</div>
<div class="line"><span class="lineno">  184</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  185</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gad21f70aa6f1364b63b1165784448bc16">xwreg_t</a> cpuirq;</div>
<div class="line"><span class="lineno">  186</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmq__msg.html">xwmq_msg</a> * msg;</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((mq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  189</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>        rc = <a class="code hl_function" href="group__xwos__sync__sem.html#gab9fce6b4dc3add4c714dfa1c8041593f">xwos_sem_wait_to</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a35a574ad328c5ac780f7baa931966c72">txqsem</a>, to);</div>
<div class="line"><span class="lineno">  192</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  193</span>                <span class="keywordflow">goto</span> err_sem_wait_to;</div>
<div class="line"><span class="lineno">  194</span>        }</div>
<div class="line"><span class="lineno">  195</span>        msg = <a class="code hl_function" href="xwmq_8c.html#a266a048d37f3f16990f8d6bcf3ac2828">xwmq_msg_get</a>(mq);</div>
<div class="line"><span class="lineno">  196</span>        msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a> = <a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>;</div>
<div class="line"><span class="lineno">  197</span>        msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a> = <a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>;</div>
<div class="line"><span class="lineno">  198</span>        <a class="code hl_function" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf">xwos_splk_lock_cpuirqsv</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a46776d84330e7e63acf6b90d13e9cf6d">rxqlock</a>, &amp;cpuirq);</div>
<div class="line"><span class="lineno">  199</span>        <a class="code hl_function" href="group__xwos__lib__bclst.html#ga2aa317fe5cea0989c273b3c69f69d795">xwlib_bclst_add_tail</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a437c514f793850e7e665ac7183320a9a">rxq</a>, &amp;msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#a7b605404c02bc7dcf8d6cb6eb4a74022">node</a>);</div>
<div class="line"><span class="lineno">  200</span>        <a class="code hl_function" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979">xwos_splk_unlock_cpuirqrs</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a46776d84330e7e63acf6b90d13e9cf6d">rxqlock</a>, cpuirq);</div>
<div class="line"><span class="lineno">  201</span>        <a class="code hl_function" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b">xwos_sem_post</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a287dc420d0b42e9c77135a78f08f1ef8">rxqsem</a>);</div>
<div class="line"><span class="lineno">  202</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>err_sem_wait_to:</div>
<div class="line"><span class="lineno">  205</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  206</span>}</div>
<div class="ttc" id="agroup__xwos__lib__bclst_html_ga2aa317fe5cea0989c273b3c69f69d795"><div class="ttname"><a href="group__xwos__lib__bclst.html#ga2aa317fe5cea0989c273b3c69f69d795">xwlib_bclst_add_tail</a></div><div class="ttdeci">static void xwlib_bclst_add_tail(struct xwlib_bclst_node *head, struct xwlib_bclst_node *newn)</div><div class="ttdoc">将一个节点加入链表尾部（链表头的前面）</div><div class="ttdef"><b>Definition</b> <a href="bclst_8h_source.html#l00357">bclst.h:357</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_gad21f70aa6f1364b63b1165784448bc16"><div class="ttname"><a href="group__xwos__lib__type.html#gad21f70aa6f1364b63b1165784448bc16">xwreg_t</a></div><div class="ttdeci">xwptr_t xwreg_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00409">type.h:409</a></div></div>
<div class="ttc" id="agroup__xwos__lock__spinlock_html_gaa83b4a8f3340ddf35346dbedf9ce3979"><div class="ttname"><a href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979">xwos_splk_unlock_cpuirqrs</a></div><div class="ttdeci">static void xwos_splk_unlock_cpuirqrs(struct xwos_splk *spl, xwreg_t cpuirq)</div><div class="ttdoc">XWOS API：解锁自旋锁，并恢复本地CPU的中断标志</div><div class="ttdef"><b>Definition</b> <a href="lock_2spinlock_8h_source.html#l00219">spinlock.h:219</a></div></div>
<div class="ttc" id="agroup__xwos__lock__spinlock_html_gad393963b449be923d8af40538b9befdf"><div class="ttname"><a href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf">xwos_splk_lock_cpuirqsv</a></div><div class="ttdeci">static void xwos_splk_lock_cpuirqsv(struct xwos_splk *spl, xwreg_t *cpuirq)</div><div class="ttdoc">XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭</div><div class="ttdef"><b>Definition</b> <a href="lock_2spinlock_8h_source.html#l00187">spinlock.h:187</a></div></div>
<div class="ttc" id="astructxwmq__msg_html_a7b605404c02bc7dcf8d6cb6eb4a74022"><div class="ttname"><a href="structxwmq__msg.html#a7b605404c02bc7dcf8d6cb6eb4a74022">xwmq_msg::node</a></div><div class="ttdeci">struct xwlib_bclst_node node</div><div class="ttdef"><b>Definition</b> <a href="xwmq_2mif_8h_source.html#l00090">mif.h:90</a></div></div>
<div class="ttc" id="astructxwmq_html_a437c514f793850e7e665ac7183320a9a"><div class="ttname"><a href="structxwmq.html#a437c514f793850e7e665ac7183320a9a">xwmq::rxq</a></div><div class="ttdeci">struct xwlib_bclst_node rxq</div><div class="ttdef"><b>Definition</b> <a href="xwmq_2mif_8h_source.html#l00102">mif.h:102</a></div></div>
<div class="ttc" id="astructxwmq_html_a46776d84330e7e63acf6b90d13e9cf6d"><div class="ttname"><a href="structxwmq.html#a46776d84330e7e63acf6b90d13e9cf6d">xwmq::rxqlock</a></div><div class="ttdeci">struct xwos_splk rxqlock</div><div class="ttdef"><b>Definition</b> <a href="xwmq_2mif_8h_source.html#l00103">mif.h:103</a></div></div>
<div class="ttc" id="axwmq_8c_html_a266a048d37f3f16990f8d6bcf3ac2828"><div class="ttname"><a href="xwmq_8c.html#a266a048d37f3f16990f8d6bcf3ac2828">xwmq_msg_get</a></div><div class="ttdeci">static struct xwmq_msg * xwmq_msg_get(struct xwmq *mq)</div><div class="ttdoc">获取一个消息槽</div><div class="ttdef"><b>Definition</b> <a href="xwmq_8c_source.html#l00153">xwmq.c:153</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga8359c9ba02c8fb2a74e6c4c6094d94cc_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga8359c9ba02c8fb2a74e6c4c6094d94cc_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga8359c9ba02c8fb2a74e6c4c6094d94cc_cgraph" id="agroup__xwmd__isc__xwmq_ga8359c9ba02c8fb2a74e6c4c6094d94cc_cgraph">
<area shape="rect" title="XWMQ API：限时等待消息槽，成功后将消息发送到消息队列的 尾端 （入队）" alt="" coords="5,129,101,155"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga2aa317fe5cea0989c273b3c69f69d795" title="将一个节点加入链表尾部（链表头的前面）" alt="" coords="171,5,310,31"/>
<area shape="poly" title=" " alt="" coords="61,127,95,84,120,60,148,40,160,33,163,38,151,44,123,64,99,88,65,131"/>
<area shape="rect" href="xwmq_8c.html#a266a048d37f3f16990f8d6bcf3ac2828" title="获取一个消息槽" alt="" coords="183,55,298,80"/>
<area shape="poly" title=" " alt="" coords="74,127,108,108,148,89,170,81,171,86,150,94,110,112,76,132"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b" title="XWOS API：发布信号量" alt="" coords="182,104,299,129"/>
<area shape="poly" title=" " alt="" coords="101,133,168,124,169,129,102,138"/>
<area shape="rect" href="group__xwos__sync__sem.html#gab9fce6b4dc3add4c714dfa1c8041593f" title="XWOS API：限时等待并获取信号量" alt="" coords="173,153,308,179"/>
<area shape="poly" title=" " alt="" coords="102,145,160,153,159,158,101,151"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf" title="XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭" alt="" coords="155,203,326,228"/>
<area shape="poly" title=" " alt="" coords="78,152,150,188,175,196,173,201,148,192,76,157"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979" title="XWOS API：解锁自旋锁，并恢复本地CPU的中断标志" alt="" coords="149,252,332,277"/>
<area shape="poly" title=" " alt="" coords="66,153,100,195,124,218,151,237,166,245,164,249,148,242,120,222,96,198,62,157"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga42c09bc0da5cac8327003314056f43b7" title="将一个新节点加入到prev与next之间" alt="" coords="380,5,551,31"/>
<area shape="poly" title=" " alt="" coords="310,15,366,15,366,21,310,21"/>
<area shape="rect" href="group__xwmm__memslice.html#ga6b9a1ff8b0ea0720d3e684a6b673dbe6" title="XWMM API：申请内存切片" alt="" coords="386,55,545,80"/>
<area shape="poly" title=" " alt="" coords="298,65,372,65,372,70,298,70"/>
<area shape="rect" href="group__xwos__lib__lfq.html#gacbe43c237a9c7c6f21baa98daaf49e68" title="弹出无锁队列中的第一个节点（栈式队列）" alt="" coords="599,55,700,80"/>
<area shape="poly" title=" " alt="" coords="545,65,585,65,585,70,545,70"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga8359c9ba02c8fb2a74e6c4c6094d94cc_icgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga8359c9ba02c8fb2a74e6c4c6094d94cc_icgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga8359c9ba02c8fb2a74e6c4c6094d94cc_icgraph" id="agroup__xwmd__isc__xwmq_ga8359c9ba02c8fb2a74e6c4c6094d94cc_icgraph">
<area shape="rect" title="XWMQ API：限时等待消息槽，成功后将消息发送到消息队列的 尾端 （入队）" alt="" coords="132,5,228,31"/>
<area shape="rect" href="group__xwmd__isc__xwmq.html#gad8d2b0b29234d2959a05eeb67a23ff45" title="XWMQ API：等待消息槽，成功后将消息发送到消息队列的 尾端 （入队）" alt="" coords="5,5,84,31"/>
<area shape="poly" title=" " alt="" coords="118,21,84,21,84,15,118,15"/>
</map>
</div>

</div>
</div>
<a id="ga8a32f1b107baef4bc25957bca4d4bddd" name="ga8a32f1b107baef4bc25957bca4d4bddd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8a32f1b107baef4bc25957bca4d4bddd">&#9670;&#160;</a></span>xwmq_eq_unintr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_eq_unintr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a>&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API：等待消息槽，且等待不可被中断， 成功后将消息发送到消息队列的 <b>尾端</b> （入队） </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>消息的标题 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>消息的数据 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-ENOTTHDCTX</td><td>不在线程上下文中 </td></tr>
    <tr><td class="paramname">-EDSPMPT</td><td>抢占被关闭 </td></tr>
    <tr><td class="paramname">-EDSBH</td><td>中断底半部被关闭 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p>若消息槽队列中没有空闲的消息槽，就阻塞发送线程，直到有空闲的消息槽。 并且发送线程的等待不可被中断。 </p>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00209">209</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  210</span>{</div>
<div class="line"><span class="lineno">  211</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  212</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gad21f70aa6f1364b63b1165784448bc16">xwreg_t</a> cpuirq;</div>
<div class="line"><span class="lineno">  213</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmq__msg.html">xwmq_msg</a> * msg;</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((mq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  216</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>        rc = <a class="code hl_function" href="group__xwos__sync__sem.html#ga794e05587874027d02d0e4c87f9c2893">xwos_sem_wait_unintr</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a35a574ad328c5ac780f7baa931966c72">txqsem</a>);</div>
<div class="line"><span class="lineno">  219</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  220</span>                <span class="keywordflow">goto</span> err_sem_wait_unintr;</div>
<div class="line"><span class="lineno">  221</span>        }</div>
<div class="line"><span class="lineno">  222</span>        msg = <a class="code hl_function" href="xwmq_8c.html#a266a048d37f3f16990f8d6bcf3ac2828">xwmq_msg_get</a>(mq);</div>
<div class="line"><span class="lineno">  223</span>        msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a> = <a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>;</div>
<div class="line"><span class="lineno">  224</span>        msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a> = <a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>;</div>
<div class="line"><span class="lineno">  225</span>        <a class="code hl_function" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf">xwos_splk_lock_cpuirqsv</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a46776d84330e7e63acf6b90d13e9cf6d">rxqlock</a>, &amp;cpuirq);</div>
<div class="line"><span class="lineno">  226</span>        <a class="code hl_function" href="group__xwos__lib__bclst.html#ga2aa317fe5cea0989c273b3c69f69d795">xwlib_bclst_add_tail</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a437c514f793850e7e665ac7183320a9a">rxq</a>, &amp;msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#a7b605404c02bc7dcf8d6cb6eb4a74022">node</a>);</div>
<div class="line"><span class="lineno">  227</span>        <a class="code hl_function" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979">xwos_splk_unlock_cpuirqrs</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a46776d84330e7e63acf6b90d13e9cf6d">rxqlock</a>, cpuirq);</div>
<div class="line"><span class="lineno">  228</span>        <a class="code hl_function" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b">xwos_sem_post</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a287dc420d0b42e9c77135a78f08f1ef8">rxqsem</a>);</div>
<div class="line"><span class="lineno">  229</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>err_sem_wait_unintr:</div>
<div class="line"><span class="lineno">  232</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  233</span>}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga8a32f1b107baef4bc25957bca4d4bddd_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga8a32f1b107baef4bc25957bca4d4bddd_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga8a32f1b107baef4bc25957bca4d4bddd_cgraph" id="agroup__xwmd__isc__xwmq_ga8a32f1b107baef4bc25957bca4d4bddd_cgraph">
<area shape="rect" title="XWMQ API：等待消息槽，且等待不可被中断， 成功后将消息发送到消息队列的 尾端 （入队）" alt="" coords="5,129,123,155"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga2aa317fe5cea0989c273b3c69f69d795" title="将一个节点加入链表尾部（链表头的前面）" alt="" coords="193,5,331,31"/>
<area shape="poly" title=" " alt="" coords="73,127,112,84,139,60,169,40,183,33,185,38,172,44,142,64,116,88,77,131"/>
<area shape="rect" href="xwmq_8c.html#a266a048d37f3f16990f8d6bcf3ac2828" title="获取一个消息槽" alt="" coords="205,55,319,80"/>
<area shape="poly" title=" " alt="" coords="88,127,170,89,193,81,194,86,172,94,90,132"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b" title="XWOS API：发布信号量" alt="" coords="203,104,321,129"/>
<area shape="poly" title=" " alt="" coords="123,132,189,123,190,129,123,137"/>
<area shape="rect" href="group__xwos__sync__sem.html#ga794e05587874027d02d0e4c87f9c2893" title="XWOS API：等待并获取信号量，且等待不可被中断" alt="" coords="185,153,339,179"/>
<area shape="poly" title=" " alt="" coords="123,146,171,152,170,158,123,152"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf" title="XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭" alt="" coords="177,203,347,228"/>
<area shape="poly" title=" " alt="" coords="91,152,172,188,198,196,196,201,170,192,89,157"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979" title="XWOS API：解锁自旋锁，并恢复本地CPU的中断标志" alt="" coords="171,252,353,277"/>
<area shape="poly" title=" " alt="" coords="78,153,116,194,143,217,172,237,188,245,186,250,169,242,140,222,113,198,74,157"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga42c09bc0da5cac8327003314056f43b7" title="将一个新节点加入到prev与next之间" alt="" coords="401,5,572,31"/>
<area shape="poly" title=" " alt="" coords="332,15,388,15,388,21,332,21"/>
<area shape="rect" href="group__xwmm__memslice.html#ga6b9a1ff8b0ea0720d3e684a6b673dbe6" title="XWMM API：申请内存切片" alt="" coords="407,55,566,80"/>
<area shape="poly" title=" " alt="" coords="319,65,394,65,394,70,319,70"/>
<area shape="rect" href="group__xwos__lib__lfq.html#gacbe43c237a9c7c6f21baa98daaf49e68" title="弹出无锁队列中的第一个节点（栈式队列）" alt="" coords="620,55,721,80"/>
<area shape="poly" title=" " alt="" coords="566,65,606,65,606,70,566,70"/>
</map>
</div>

</div>
</div>
<a id="ga57fec3e151fbf8044a2b7092ab2972b3" name="ga57fec3e151fbf8044a2b7092ab2972b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga57fec3e151fbf8044a2b7092ab2972b3">&#9670;&#160;</a></span>xwmq_fini()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API：销毁静态方式初始化的消息队列对象 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：任意 </li>
</ul>
</dd></dl>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00131">131</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  132</span>{</div>
<div class="line"><span class="lineno">  133</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((mq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  134</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="group__xwmd__isc__xwmq.html#ga3a7d5f642c3629ebfcf03e7721efd4c2">xwmq_put</a>(mq);</div>
<div class="line"><span class="lineno">  135</span>}</div>
<div class="ttc" id="agroup__xwmd__isc__xwmq_html_ga3a7d5f642c3629ebfcf03e7721efd4c2"><div class="ttname"><a href="group__xwmd__isc__xwmq.html#ga3a7d5f642c3629ebfcf03e7721efd4c2">xwmq_put</a></div><div class="ttdeci">xwer_t xwmq_put(struct xwmq *mq)</div><div class="ttdoc">XWMQ API：减少消息队列对象的引用计数</div><div class="ttdef"><b>Definition</b> <a href="xwmq_8c_source.html#l00079">xwmq.c:79</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga57fec3e151fbf8044a2b7092ab2972b3_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga57fec3e151fbf8044a2b7092ab2972b3_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga57fec3e151fbf8044a2b7092ab2972b3_cgraph" id="agroup__xwmd__isc__xwmq_ga57fec3e151fbf8044a2b7092ab2972b3_cgraph">
<area shape="rect" title="XWMQ API：销毁静态方式初始化的消息队列对象" alt="" coords="5,5,87,31"/>
<area shape="rect" href="group__xwmd__isc__xwmq.html#ga3a7d5f642c3629ebfcf03e7721efd4c2" title="XWMQ API：减少消息队列对象的引用计数" alt="" coords="135,5,217,31"/>
<area shape="poly" title=" " alt="" coords="87,15,121,15,121,21,87,21"/>
<area shape="rect" href="group__xwos__lib__xwobj.html#gad75451193241a605aef8b9fc6f934dcb" title="减少对象的引用计数" alt="" coords="265,5,385,31"/>
<area shape="poly" title=" " alt="" coords="217,15,252,15,252,21,217,21"/>
</map>
</div>

</div>
</div>
<a id="gab0fb10f481fc4b91c2e8bed1ba89dc13" name="gab0fb10f481fc4b91c2e8bed1ba89dc13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab0fb10f481fc4b91c2e8bed1ba89dc13">&#9670;&#160;</a></span>xwmq_get_d()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structxwmq__d.html">xwmq_d</a> xwmq_get_d </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>XWMQ API：获取消息队列对象描述符 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>消息队列对象描述符 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：任意 </li>
</ul>
</dd></dl>

<p class="definition">在文件 <a class="el" href="xwmq_2mif_8h_source.html">mif.h</a> 第 <a class="el" href="xwmq_2mif_8h_source.html#l00180">180</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  181</span>{</div>
<div class="line"><span class="lineno">  182</span>        <a class="code hl_struct" href="structxwmq__d.html">xwmq_d</a> mqd;</div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span>        mqd.<a class="code hl_variable" href="structxwmq__d.html#acdc8d67b1715bb673876fae39ada51f1">mq</a> = mq;</div>
<div class="line"><span class="lineno">  185</span>        mqd.<a class="code hl_variable" href="structxwmq__d.html#a026076e147ea8817bc7bdfb6c7e18346">tik</a> = <a class="code hl_function" href="group__xwmd__isc__xwmq.html#ga5b19490b030ec3da27b1e780f8093b80">xwmq_get_tik</a>(mq);</div>
<div class="line"><span class="lineno">  186</span>        <span class="keywordflow">return</span> mqd;</div>
<div class="line"><span class="lineno">  187</span>}</div>
<div class="ttc" id="agroup__xwmd__isc__xwmq_html_ga5b19490b030ec3da27b1e780f8093b80"><div class="ttname"><a href="group__xwmd__isc__xwmq.html#ga5b19490b030ec3da27b1e780f8093b80">xwmq_get_tik</a></div><div class="ttdeci">xwsq_t xwmq_get_tik(struct xwmq *mq)</div><div class="ttdoc">XWMQ API：获取消息队列对象的标签</div><div class="ttdef"><b>Definition</b> <a href="xwmq_8c_source.html#l00046">xwmq.c:46</a></div></div>
<div class="ttc" id="astructxwmq__d_html"><div class="ttname"><a href="structxwmq__d.html">xwmq_d</a></div><div class="ttdoc">消息队列对象描述符</div><div class="ttdef"><b>Definition</b> <a href="xwmq_2mif_8h_source.html#l00110">mif.h:110</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_gab0fb10f481fc4b91c2e8bed1ba89dc13_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_gab0fb10f481fc4b91c2e8bed1ba89dc13_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_gab0fb10f481fc4b91c2e8bed1ba89dc13_cgraph" id="agroup__xwmd__isc__xwmq_gab0fb10f481fc4b91c2e8bed1ba89dc13_cgraph">
<area shape="rect" title="XWMQ API：获取消息队列对象描述符" alt="" coords="5,5,101,31"/>
<area shape="rect" href="group__xwmd__isc__xwmq.html#ga5b19490b030ec3da27b1e780f8093b80" title="XWMQ API：获取消息队列对象的标签" alt="" coords="149,5,252,31"/>
<area shape="poly" title=" " alt="" coords="102,15,135,15,135,21,102,21"/>
</map>
</div>

</div>
</div>
<a id="ga5b19490b030ec3da27b1e780f8093b80" name="ga5b19490b030ec3da27b1e780f8093b80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5b19490b030ec3da27b1e780f8093b80">&#9670;&#160;</a></span>xwmq_get_tik()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> xwmq_get_tik </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API：获取消息队列对象的标签 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>消息队列对象的标签 </dd></dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：任意 </li>
</ul>
</dd></dl>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00046">46</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">   47</span>{</div>
<div class="line"><span class="lineno">   48</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> tik;</div>
<div class="line"><span class="lineno">   49</span> </div>
<div class="line"><span class="lineno">   50</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != mq) {</div>
<div class="line"><span class="lineno">   51</span>                tik = mq-&gt;<a class="code hl_variable" href="structxwmq.html#a2adc72e15cceb2273b322bb1280462da">xwobj</a>.<a class="code hl_variable" href="structxwos__object.html#ab5ec53f5e4ed98664c3cffabb82435bf">tik</a>;</div>
<div class="line"><span class="lineno">   52</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   53</span>                tik = 0;</div>
<div class="line"><span class="lineno">   54</span>        }</div>
<div class="line"><span class="lineno">   55</span>        <span class="keywordflow">return</span> tik;</div>
<div class="line"><span class="lineno">   56</span>}</div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga59fe68c80516b22de8dccb84275d23f2"><div class="ttname"><a href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a></div><div class="ttdeci">unsigned long xwsq_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00445">type.h:445</a></div></div>
<div class="ttc" id="astructxwos__object_html_ab5ec53f5e4ed98664c3cffabb82435bf"><div class="ttname"><a href="structxwos__object.html#ab5ec53f5e4ed98664c3cffabb82435bf">xwos_object::tik</a></div><div class="ttdeci">xwsq_t tik</div><div class="ttdef"><b>Definition</b> <a href="xwos_2lib_2object_8h_source.html#l00054">object.h:54</a></div></div>
</div><!-- fragment --><div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga5b19490b030ec3da27b1e780f8093b80_icgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga5b19490b030ec3da27b1e780f8093b80_icgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga5b19490b030ec3da27b1e780f8093b80_icgraph" id="agroup__xwmd__isc__xwmq_ga5b19490b030ec3da27b1e780f8093b80_icgraph">
<area shape="rect" title="XWMQ API：获取消息队列对象的标签" alt="" coords="149,5,252,31"/>
<area shape="rect" href="group__xwmd__isc__xwmq.html#gab0fb10f481fc4b91c2e8bed1ba89dc13" title="XWMQ API：获取消息队列对象描述符" alt="" coords="5,5,101,31"/>
<area shape="poly" title=" " alt="" coords="136,21,101,21,101,15,136,15"/>
</map>
</div>

</div>
</div>
<a id="ga8b86e4a1725d0d9363ee8a31095222c9" name="ga8b86e4a1725d0d9363ee8a31095222c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8b86e4a1725d0d9363ee8a31095222c9">&#9670;&#160;</a></span>xwmq_grab()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_grab </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API：增加消息队列对象的引用计数 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列控制块对象指针 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-EOBJDEAD</td><td>对象无效 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：任意 </li>
</ul>
</dd></dl>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00071">71</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">   72</span>{</div>
<div class="line"><span class="lineno">   73</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((mq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="group__xwos__lib__xwobj.html#ga78e0a4c3320e9e2348d4443294147458">xwos_object_grab</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a2adc72e15cceb2273b322bb1280462da">xwobj</a>);</div>
<div class="line"><span class="lineno">   76</span>}</div>
<div class="ttc" id="agroup__xwos__lib__xwobj_html_ga78e0a4c3320e9e2348d4443294147458"><div class="ttname"><a href="group__xwos__lib__xwobj.html#ga78e0a4c3320e9e2348d4443294147458">xwos_object_grab</a></div><div class="ttdeci">xwer_t xwos_object_grab(struct xwos_object *obj)</div><div class="ttdoc">增加对象的引用计数</div><div class="ttdef"><b>Definition</b> <a href="xwos_2lib_2object_8c_source.html#l00297">object.c:297</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga8b86e4a1725d0d9363ee8a31095222c9_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga8b86e4a1725d0d9363ee8a31095222c9_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga8b86e4a1725d0d9363ee8a31095222c9_cgraph" id="agroup__xwmd__isc__xwmq_ga8b86e4a1725d0d9363ee8a31095222c9_cgraph">
<area shape="rect" title="XWMQ API：增加消息队列对象的引用计数" alt="" coords="5,5,95,31"/>
<area shape="rect" href="group__xwos__lib__xwobj.html#ga78e0a4c3320e9e2348d4443294147458" title="增加对象的引用计数" alt="" coords="143,5,269,31"/>
<area shape="poly" title=" " alt="" coords="95,15,129,15,129,21,95,21"/>
</map>
</div>

</div>
</div>
<a id="ga51603f04fac6de40ea6726d69b264cc7" name="ga51603f04fac6de40ea6726d69b264cc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga51603f04fac6de40ea6726d69b264cc7">&#9670;&#160;</a></span>xwmq_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structxwmq__msg.html">xwmq_msg</a> *&#160;</td>
          <td class="paramname"><em>txq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API：静态方式初始化消息队列 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">txq</td><td>消息槽内存池 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num</td><td>消息槽数量 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-EINVAL</td><td>无效参数 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：任意 </li>
</ul>
</dd></dl>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00121">121</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  122</span>{</div>
<div class="line"><span class="lineno">  123</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((mq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  124</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((txq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>        <a class="code hl_function" href="xwmq_8c.html#abc2e4af423bc161255edee85031ae292">xwmq_construct</a>(mq);</div>
<div class="line"><span class="lineno">  127</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="xwmq_8c.html#aa0841cf7abe8c4dfd5626a12bf99f72d">xwmq_activate</a>(mq, txq, num, <a class="code hl_function" href="xwmq_8c.html#a9e655378c7ba09fae5b0213db1cd9bee">xwmq_gc</a>);</div>
<div class="line"><span class="lineno">  128</span>}</div>
<div class="ttc" id="axwmq_8c_html_a9e655378c7ba09fae5b0213db1cd9bee"><div class="ttname"><a href="xwmq_8c.html#a9e655378c7ba09fae5b0213db1cd9bee">xwmq_gc</a></div><div class="ttdeci">static xwer_t xwmq_gc(struct xwos_object *obj)</div><div class="ttdef"><b>Definition</b> <a href="xwmq_8c_source.html#l00034">xwmq.c:34</a></div></div>
<div class="ttc" id="axwmq_8c_html_aa0841cf7abe8c4dfd5626a12bf99f72d"><div class="ttname"><a href="xwmq_8c.html#aa0841cf7abe8c4dfd5626a12bf99f72d">xwmq_activate</a></div><div class="ttdeci">static xwer_t xwmq_activate(struct xwmq *mq, struct xwmq_msg *txq, xwsz_t num, xwobj_gc_f gcfunc)</div><div class="ttdef"><b>Definition</b> <a href="xwmq_8c_source.html#l00090">xwmq.c:90</a></div></div>
<div class="ttc" id="axwmq_8c_html_abc2e4af423bc161255edee85031ae292"><div class="ttname"><a href="xwmq_8c.html#abc2e4af423bc161255edee85031ae292">xwmq_construct</a></div><div class="ttdeci">static void xwmq_construct(struct xwmq *mq)</div><div class="ttdef"><b>Definition</b> <a href="xwmq_8c_source.html#l00022">xwmq.c:22</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga51603f04fac6de40ea6726d69b264cc7_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga51603f04fac6de40ea6726d69b264cc7_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga51603f04fac6de40ea6726d69b264cc7_cgraph" id="agroup__xwmd__isc__xwmq_ga51603f04fac6de40ea6726d69b264cc7_cgraph">
<area shape="rect" title="XWMQ API：静态方式初始化消息队列" alt="" coords="5,351,87,376"/>
<area shape="rect" href="xwmq_8c.html#aa0841cf7abe8c4dfd5626a12bf99f72d" title=" " alt="" coords="139,179,249,204"/>
<area shape="poly" title=" " alt="" coords="56,349,171,213,175,216,60,352"/>
<area shape="rect" href="xwmq_8c.html#abc2e4af423bc161255edee85031ae292" title=" " alt="" coords="135,351,253,376"/>
<area shape="poly" title=" " alt="" coords="87,361,121,361,121,366,87,366"/>
<area shape="rect" href="xwmq_8c.html#a9e655378c7ba09fae5b0213db1cd9bee" title=" " alt="" coords="155,400,233,425"/>
<area shape="poly" title=" " alt="" coords="86,374,143,393,141,398,84,379"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga08f9a7aec46aaeee30262e4bbdc65c0a" title="初始化一个链表头。" alt="" coords="306,5,453,31"/>
<area shape="poly" title=" " alt="" coords="199,177,235,112,264,73,300,40,308,35,311,39,303,44,268,77,239,115,203,180"/>
<area shape="rect" href="group__xwmm__memslice.html#ga56a8e2e7b5977d6fdd53fa8946d92368" title="XWMM API：静态方式初始化内存切片分配器" alt="" coords="305,55,453,80"/>
<area shape="poly" title=" " alt="" coords="203,177,243,134,270,110,300,89,312,83,314,88,303,94,273,114,246,138,207,180"/>
<area shape="rect" href="xwmq_8c.html#ac5ff82ddcbdede24abbfbd6a24e6ef1b" title="消息槽的构造函数" alt="" coords="304,104,455,129"/>
<area shape="poly" title=" " alt="" coords="218,176,300,138,319,131,321,136,302,143,220,181"/>
<area shape="rect" href="group__xwmd__isc__xwmq.html#ga3a7d5f642c3629ebfcf03e7721efd4c2" title="XWMQ API：减少消息队列对象的引用计数" alt="" coords="338,153,421,179"/>
<area shape="poly" title=" " alt="" coords="249,181,324,171,325,176,250,186"/>
<area shape="rect" href="group__xwos__lib__xwobj.html#ga82ce393acdabdb355bf091c21f784444" title="激活一个XWOS对象（将其引用计数初始化位1）" alt="" coords="305,203,453,228"/>
<area shape="poly" title=" " alt="" coords="250,196,292,201,291,207,249,201"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaef37596ed9c49312579530b2218150ad" title="XWOS API：静态方式初始化信号量对象" alt="" coords="325,252,434,277"/>
<area shape="poly" title=" " alt="" coords="223,202,302,237,325,245,323,250,300,242,220,207"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gac8bbb82a3177f919e10ef3c3d21c7608" title="XWOS API：初始化自旋锁" alt="" coords="325,301,433,327"/>
<area shape="poly" title=" " alt="" coords="208,203,248,244,274,267,303,286,318,294,315,299,300,291,271,271,244,248,204,206"/>
<area shape="rect" href="group__xwos__lib__lfq.html#gac87b1137608605a80577abed410ddc1a" title="初始化无锁队列节点" alt="" coords="531,5,629,31"/>
<area shape="poly" title=" " alt="" coords="431,52,517,31,519,36,432,57"/>
<area shape="rect" href="group__xwos__lib__lfq.html#ga1cac1b49ec185ccb135f19401e286166" title="将一个节点推入无锁队列（栈式队列）" alt="" coords="526,55,634,80"/>
<area shape="poly" title=" " alt="" coords="454,65,512,65,512,70,454,70"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569" title="初始化一个链表节点。" alt="" coords="507,104,653,129"/>
<area shape="poly" title=" " alt="" coords="455,114,493,114,493,119,455,119"/>
<area shape="rect" href="group__xwos__lib__xwobj.html#gad75451193241a605aef8b9fc6f934dcb" title="减少对象的引用计数" alt="" coords="520,153,640,179"/>
<area shape="poly" title=" " alt="" coords="421,163,506,163,506,169,421,169"/>
<area shape="rect" href="xwos_2lib_2object_8c.html#a244af466d95b7ae5932b74f699549639" title="从对象标签分配器获取一个标签" alt="" coords="522,203,638,228"/>
<area shape="poly" title=" " alt="" coords="454,213,508,213,508,218,454,218"/>
<area shape="rect" href="group__xwos__irq.html#gab348bfecc115e0d9bb7fc54646f26ebd" title="XWOS API：恢复本地CPU的中断" alt="" coords="704,153,863,179"/>
<area shape="poly" title=" " alt="" coords="632,200,717,179,718,185,634,205"/>
<area shape="rect" href="group__xwos__irq.html#ga6786862246388dace5c878fa112fac4d" title="XWOS API：保存然后关闭本地CPU的中断" alt="" coords="710,203,857,228"/>
<area shape="poly" title=" " alt="" coords="638,213,696,213,696,218,638,218"/>
<area shape="rect" href="group__xwos__skd.html#ga81b3779d6119cb80f31b7b36239fbff2" title="XWOS API：获取当前CPU的ID" alt="" coords="703,252,864,277"/>
<area shape="poly" title=" " alt="" coords="634,225,718,246,717,251,632,231"/>
<area shape="rect" href="group__xwos__lib__xwobj.html#ga908c48f09f38f5be9d69758fe30c5d3f" title="XWOS对象的构造函数" alt="" coords="301,351,457,376"/>
<area shape="poly" title=" " alt="" coords="254,361,287,361,287,366,254,366"/>
<area shape="rect" href="xwmq_8c.html#a3f9c27ae15a4910f44b4c9ae62507a0f" title=" " alt="" coords="324,400,435,425"/>
<area shape="poly" title=" " alt="" coords="234,410,310,410,310,415,234,415"/>
<area shape="rect" href="group__xwos__sync__sem.html#ga91a3f44977a865f10e9a46f13e261d3a" title="XWOS API：销毁静态方式初始化的信号量对象" alt="" coords="325,449,434,475"/>
<area shape="poly" title=" " alt="" coords="234,420,318,443,317,448,233,426"/>
<area shape="rect" href="group__xwos__lib__xwobj.html#gaaaa2a74387092ee01a9e495a2994d1fa" title="XWOS对象的析构函数" alt="" coords="505,400,655,425"/>
<area shape="poly" title=" " alt="" coords="435,410,491,410,491,415,435,415"/>
</map>
</div>

</div>
</div>
<a id="ga18b4d97f9de46feb6eebd197738aabf6" name="ga18b4d97f9de46feb6eebd197738aabf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga18b4d97f9de46feb6eebd197738aabf6">&#9670;&#160;</a></span>xwmq_jq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_jq </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a>&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API：等待消息槽，成功后将消息发送到消息队列的 <b>首端</b> （插队） </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>消息的标题 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>消息的数据 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-EINTR</td><td>等待被中断 </td></tr>
    <tr><td class="paramname">-ENOTTHDCTX</td><td>不在线程上下文中 </td></tr>
    <tr><td class="paramname">-EDSPMPT</td><td>抢占被关闭 </td></tr>
    <tr><td class="paramname">-EDSBH</td><td>中断底半部被关闭 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p>若消息槽队列中没有空闲的消息槽，就阻塞发送线程，直到有空闲的消息槽或被中断。</p>
<p>如果等待被中断，此CAPI将返回 <code>-EINTR</code> 。 </p>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00263">263</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  264</span>{</div>
<div class="line"><span class="lineno">  265</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="group__xwmd__isc__xwmq.html#ga0eb1aa3f3e83b696612a7cd9cc90a6f2">xwmq_jq_to</a>(mq, topic, data, <a class="code hl_define" href="group__xwos__lib__type__time.html#gad8937a773924ae599c30f9f75a7b7dbf">XWTM_MAX</a>);</div>
<div class="line"><span class="lineno">  266</span>}</div>
<div class="ttc" id="agroup__xwmd__isc__xwmq_html_ga0eb1aa3f3e83b696612a7cd9cc90a6f2"><div class="ttname"><a href="group__xwmd__isc__xwmq.html#ga0eb1aa3f3e83b696612a7cd9cc90a6f2">xwmq_jq_to</a></div><div class="ttdeci">xwer_t xwmq_jq_to(struct xwmq *mq, xwsq_t topic, void *data, xwtm_t to)</div><div class="ttdoc">XWMQ API：限时等待消息槽，成功后将消息发送到消息队列的 首端 （插队）</div><div class="ttdef"><b>Definition</b> <a href="xwmq_8c_source.html#l00269">xwmq.c:269</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga18b4d97f9de46feb6eebd197738aabf6_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga18b4d97f9de46feb6eebd197738aabf6_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga18b4d97f9de46feb6eebd197738aabf6_cgraph" id="agroup__xwmd__isc__xwmq_ga18b4d97f9de46feb6eebd197738aabf6_cgraph">
<area shape="rect" title="XWMQ API：等待消息槽，成功后将消息发送到消息队列的 首端 （插队）" alt="" coords="5,129,80,155"/>
<area shape="rect" href="group__xwmd__isc__xwmq.html#ga0eb1aa3f3e83b696612a7cd9cc90a6f2" title="XWMQ API：限时等待消息槽，成功后将消息发送到消息队列的 首端 （插队）" alt="" coords="128,129,220,155"/>
<area shape="poly" title=" " alt="" coords="80,139,114,139,114,145,80,145"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706" title="将一个节点加入链表头部（链表头的后面）" alt="" coords="284,5,435,31"/>
<area shape="poly" title=" " alt="" coords="182,127,215,84,239,60,267,40,279,33,281,38,269,44,243,64,219,88,186,131"/>
<area shape="rect" href="xwmq_8c.html#a266a048d37f3f16990f8d6bcf3ac2828" title="获取一个消息槽" alt="" coords="302,55,417,80"/>
<area shape="poly" title=" " alt="" coords="194,127,227,108,267,89,288,81,290,86,269,94,230,112,197,132"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b" title="XWOS API：发布信号量" alt="" coords="301,104,418,129"/>
<area shape="poly" title=" " alt="" coords="220,133,287,124,287,129,220,138"/>
<area shape="rect" href="group__xwos__sync__sem.html#gab9fce6b4dc3add4c714dfa1c8041593f" title="XWOS API：限时等待并获取信号量" alt="" coords="292,153,427,179"/>
<area shape="poly" title=" " alt="" coords="220,145,278,153,278,158,220,151"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf" title="XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭" alt="" coords="274,203,445,228"/>
<area shape="poly" title=" " alt="" coords="198,152,269,188,294,196,292,201,267,192,196,157"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979" title="XWOS API：解锁自旋锁，并恢复本地CPU的中断标志" alt="" coords="268,252,451,277"/>
<area shape="poly" title=" " alt="" coords="186,153,220,195,243,218,269,237,284,245,282,249,267,242,240,222,216,198,182,157"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga42c09bc0da5cac8327003314056f43b7" title="将一个新节点加入到prev与next之间" alt="" coords="499,5,669,31"/>
<area shape="poly" title=" " alt="" coords="435,15,485,15,485,21,435,21"/>
<area shape="rect" href="group__xwmm__memslice.html#ga6b9a1ff8b0ea0720d3e684a6b673dbe6" title="XWMM API：申请内存切片" alt="" coords="505,55,663,80"/>
<area shape="poly" title=" " alt="" coords="417,65,491,65,491,70,417,70"/>
<area shape="rect" href="group__xwos__lib__lfq.html#gacbe43c237a9c7c6f21baa98daaf49e68" title="弹出无锁队列中的第一个节点（栈式队列）" alt="" coords="717,55,819,80"/>
<area shape="poly" title=" " alt="" coords="664,65,703,65,703,70,664,70"/>
</map>
</div>

</div>
</div>
<a id="ga0eb1aa3f3e83b696612a7cd9cc90a6f2" name="ga0eb1aa3f3e83b696612a7cd9cc90a6f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0eb1aa3f3e83b696612a7cd9cc90a6f2">&#9670;&#160;</a></span>xwmq_jq_to()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_jq_to </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a>&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API：限时等待消息槽，成功后将消息发送到消息队列的 <b>首端</b> （插队） </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>消息的标题 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>消息的数据 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-EINTR</td><td>等待被中断 </td></tr>
    <tr><td class="paramname">-ETIMEDOUT</td><td>超时 </td></tr>
    <tr><td class="paramname">-ENOTTHDCTX</td><td>不在线程上下文中 </td></tr>
    <tr><td class="paramname">-EDSPMPT</td><td>抢占被关闭 </td></tr>
    <tr><td class="paramname">-EDSBH</td><td>中断底半部被关闭 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<ul>
<li>若消息槽队列中没有空闲的消息槽，就阻塞发送线程，直到有空闲的消息槽或被中断或超时。</li>
<li>如果等待被中断，此CAPI将返回 <code>-EINTR</code> 。</li>
<li><code>to</code> 表示等待超时的时间点：<ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
</li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00269">269</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  270</span>{</div>
<div class="line"><span class="lineno">  271</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  272</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gad21f70aa6f1364b63b1165784448bc16">xwreg_t</a> cpuirq;</div>
<div class="line"><span class="lineno">  273</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmq__msg.html">xwmq_msg</a> * msg;</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((mq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  276</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>        rc = <a class="code hl_function" href="group__xwos__sync__sem.html#gab9fce6b4dc3add4c714dfa1c8041593f">xwos_sem_wait_to</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a35a574ad328c5ac780f7baa931966c72">txqsem</a>, to);</div>
<div class="line"><span class="lineno">  279</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  280</span>                <span class="keywordflow">goto</span> err_sem_wait_to;</div>
<div class="line"><span class="lineno">  281</span>        }</div>
<div class="line"><span class="lineno">  282</span>        msg = <a class="code hl_function" href="xwmq_8c.html#a266a048d37f3f16990f8d6bcf3ac2828">xwmq_msg_get</a>(mq);</div>
<div class="line"><span class="lineno">  283</span>        msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a> = <a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>;</div>
<div class="line"><span class="lineno">  284</span>        msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a> = <a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>;</div>
<div class="line"><span class="lineno">  285</span>        <a class="code hl_function" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf">xwos_splk_lock_cpuirqsv</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a46776d84330e7e63acf6b90d13e9cf6d">rxqlock</a>, &amp;cpuirq);</div>
<div class="line"><span class="lineno">  286</span>        <a class="code hl_function" href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706">xwlib_bclst_add_head</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a437c514f793850e7e665ac7183320a9a">rxq</a>, &amp;msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#a7b605404c02bc7dcf8d6cb6eb4a74022">node</a>);</div>
<div class="line"><span class="lineno">  287</span>        <a class="code hl_function" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979">xwos_splk_unlock_cpuirqrs</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a46776d84330e7e63acf6b90d13e9cf6d">rxqlock</a>, cpuirq);</div>
<div class="line"><span class="lineno">  288</span>        <a class="code hl_function" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b">xwos_sem_post</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a287dc420d0b42e9c77135a78f08f1ef8">rxqsem</a>);</div>
<div class="line"><span class="lineno">  289</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>err_sem_wait_to:</div>
<div class="line"><span class="lineno">  292</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  293</span>}</div>
<div class="ttc" id="agroup__xwos__lib__bclst_html_ga942be8d64e19cb8efb4dd1cf10e6e706"><div class="ttname"><a href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706">xwlib_bclst_add_head</a></div><div class="ttdeci">static void xwlib_bclst_add_head(struct xwlib_bclst_node *head, struct xwlib_bclst_node *newn)</div><div class="ttdoc">将一个节点加入链表头部（链表头的后面）</div><div class="ttdef"><b>Definition</b> <a href="bclst_8h_source.html#l00345">bclst.h:345</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga0eb1aa3f3e83b696612a7cd9cc90a6f2_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga0eb1aa3f3e83b696612a7cd9cc90a6f2_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga0eb1aa3f3e83b696612a7cd9cc90a6f2_cgraph" id="agroup__xwmd__isc__xwmq_ga0eb1aa3f3e83b696612a7cd9cc90a6f2_cgraph">
<area shape="rect" title="XWMQ API：限时等待消息槽，成功后将消息发送到消息队列的 首端 （插队）" alt="" coords="5,129,97,155"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706" title="将一个节点加入链表头部（链表头的后面）" alt="" coords="161,5,312,31"/>
<area shape="poly" title=" " alt="" coords="59,127,92,84,116,60,144,40,156,33,159,38,147,44,120,64,96,88,63,131"/>
<area shape="rect" href="xwmq_8c.html#a266a048d37f3f16990f8d6bcf3ac2828" title="获取一个消息槽" alt="" coords="179,55,294,80"/>
<area shape="poly" title=" " alt="" coords="71,127,105,108,144,89,166,81,167,86,146,94,107,112,74,132"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b" title="XWOS API：发布信号量" alt="" coords="178,104,295,129"/>
<area shape="poly" title=" " alt="" coords="97,133,164,124,165,129,98,138"/>
<area shape="rect" href="group__xwos__sync__sem.html#gab9fce6b4dc3add4c714dfa1c8041593f" title="XWOS API：限时等待并获取信号量" alt="" coords="169,153,304,179"/>
<area shape="poly" title=" " alt="" coords="98,145,156,153,155,158,97,151"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf" title="XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭" alt="" coords="151,203,322,228"/>
<area shape="poly" title=" " alt="" coords="75,152,146,188,171,196,169,201,144,192,73,157"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979" title="XWOS API：解锁自旋锁，并恢复本地CPU的中断标志" alt="" coords="145,252,328,277"/>
<area shape="poly" title=" " alt="" coords="63,153,97,195,120,218,147,237,162,245,159,249,144,242,117,222,93,198,59,157"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga42c09bc0da5cac8327003314056f43b7" title="将一个新节点加入到prev与next之间" alt="" coords="376,5,547,31"/>
<area shape="poly" title=" " alt="" coords="313,15,362,15,362,21,313,21"/>
<area shape="rect" href="group__xwmm__memslice.html#ga6b9a1ff8b0ea0720d3e684a6b673dbe6" title="XWMM API：申请内存切片" alt="" coords="382,55,541,80"/>
<area shape="poly" title=" " alt="" coords="294,65,368,65,368,70,294,70"/>
<area shape="rect" href="group__xwos__lib__lfq.html#gacbe43c237a9c7c6f21baa98daaf49e68" title="弹出无锁队列中的第一个节点（栈式队列）" alt="" coords="595,55,696,80"/>
<area shape="poly" title=" " alt="" coords="541,65,581,65,581,70,541,70"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga0eb1aa3f3e83b696612a7cd9cc90a6f2_icgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga0eb1aa3f3e83b696612a7cd9cc90a6f2_icgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga0eb1aa3f3e83b696612a7cd9cc90a6f2_icgraph" id="agroup__xwmd__isc__xwmq_ga0eb1aa3f3e83b696612a7cd9cc90a6f2_icgraph">
<area shape="rect" title="XWMQ API：限时等待消息槽，成功后将消息发送到消息队列的 首端 （插队）" alt="" coords="128,5,220,31"/>
<area shape="rect" href="group__xwmd__isc__xwmq.html#ga18b4d97f9de46feb6eebd197738aabf6" title="XWMQ API：等待消息槽，成功后将消息发送到消息队列的 首端 （插队）" alt="" coords="5,5,80,31"/>
<area shape="poly" title=" " alt="" coords="114,21,80,21,80,15,114,15"/>
</map>
</div>

</div>
</div>
<a id="ga3c6e22dce3a927f790d95f1e294c5789" name="ga3c6e22dce3a927f790d95f1e294c5789"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3c6e22dce3a927f790d95f1e294c5789">&#9670;&#160;</a></span>xwmq_jq_unintr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_jq_unintr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a>&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API：等待消息槽，且等待不可被中断， 成功后将消息发送到消息队列的 <b>首端</b> （插队） </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>消息的标题 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>消息的数据 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-ENOTTHDCTX</td><td>不在线程上下文中 </td></tr>
    <tr><td class="paramname">-EDSPMPT</td><td>抢占被关闭 </td></tr>
    <tr><td class="paramname">-EDSBH</td><td>中断底半部被关闭 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p>若消息槽队列中没有空闲的消息槽，就阻塞发送线程，直到有空闲的消息槽。 并且发送线程的等待不可被中断。 </p>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00296">296</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  297</span>{</div>
<div class="line"><span class="lineno">  298</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  299</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gad21f70aa6f1364b63b1165784448bc16">xwreg_t</a> cpuirq;</div>
<div class="line"><span class="lineno">  300</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmq__msg.html">xwmq_msg</a> * msg;</div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((mq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  303</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>        rc = <a class="code hl_function" href="group__xwos__sync__sem.html#ga794e05587874027d02d0e4c87f9c2893">xwos_sem_wait_unintr</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a35a574ad328c5ac780f7baa931966c72">txqsem</a>);</div>
<div class="line"><span class="lineno">  306</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  307</span>                <span class="keywordflow">goto</span> err_sem_wait_unintr;</div>
<div class="line"><span class="lineno">  308</span>        }</div>
<div class="line"><span class="lineno">  309</span>        msg = <a class="code hl_function" href="xwmq_8c.html#a266a048d37f3f16990f8d6bcf3ac2828">xwmq_msg_get</a>(mq);</div>
<div class="line"><span class="lineno">  310</span>        msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a> = <a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>;</div>
<div class="line"><span class="lineno">  311</span>        msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a> = <a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>;</div>
<div class="line"><span class="lineno">  312</span>        <a class="code hl_function" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf">xwos_splk_lock_cpuirqsv</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a46776d84330e7e63acf6b90d13e9cf6d">rxqlock</a>, &amp;cpuirq);</div>
<div class="line"><span class="lineno">  313</span>        <a class="code hl_function" href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706">xwlib_bclst_add_head</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a437c514f793850e7e665ac7183320a9a">rxq</a>, &amp;msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#a7b605404c02bc7dcf8d6cb6eb4a74022">node</a>);</div>
<div class="line"><span class="lineno">  314</span>        <a class="code hl_function" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979">xwos_splk_unlock_cpuirqrs</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a46776d84330e7e63acf6b90d13e9cf6d">rxqlock</a>, cpuirq);</div>
<div class="line"><span class="lineno">  315</span>        <a class="code hl_function" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b">xwos_sem_post</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a287dc420d0b42e9c77135a78f08f1ef8">rxqsem</a>);</div>
<div class="line"><span class="lineno">  316</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>err_sem_wait_unintr:</div>
<div class="line"><span class="lineno">  319</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  320</span>}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga3c6e22dce3a927f790d95f1e294c5789_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga3c6e22dce3a927f790d95f1e294c5789_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga3c6e22dce3a927f790d95f1e294c5789_cgraph" id="agroup__xwmd__isc__xwmq_ga3c6e22dce3a927f790d95f1e294c5789_cgraph">
<area shape="rect" title="XWMQ API：等待消息槽，且等待不可被中断， 成功后将消息发送到消息队列的 首端 （插队）" alt="" coords="5,129,119,155"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706" title="将一个节点加入链表头部（链表头的后面）" alt="" coords="183,5,333,31"/>
<area shape="poly" title=" " alt="" coords="71,127,109,84,136,60,165,40,179,33,181,38,168,44,139,64,113,88,75,131"/>
<area shape="rect" href="xwmq_8c.html#a266a048d37f3f16990f8d6bcf3ac2828" title="获取一个消息槽" alt="" coords="201,55,315,80"/>
<area shape="poly" title=" " alt="" coords="85,127,166,89,188,81,189,87,168,94,87,132"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b" title="XWOS API：发布信号量" alt="" coords="199,104,317,129"/>
<area shape="poly" title=" " alt="" coords="118,132,185,123,186,129,119,137"/>
<area shape="rect" href="group__xwos__sync__sem.html#ga794e05587874027d02d0e4c87f9c2893" title="XWOS API：等待并获取信号量，且等待不可被中断" alt="" coords="181,153,335,179"/>
<area shape="poly" title=" " alt="" coords="119,146,167,152,166,157,118,152"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf" title="XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭" alt="" coords="173,203,343,228"/>
<area shape="poly" title=" " alt="" coords="89,152,168,188,194,196,192,201,166,192,87,157"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979" title="XWOS API：解锁自旋锁，并恢复本地CPU的中断标志" alt="" coords="167,252,349,277"/>
<area shape="poly" title=" " alt="" coords="75,153,113,194,139,217,168,237,184,245,182,250,165,242,136,222,110,198,71,157"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga42c09bc0da5cac8327003314056f43b7" title="将一个新节点加入到prev与next之间" alt="" coords="397,5,568,31"/>
<area shape="poly" title=" " alt="" coords="334,15,383,15,383,21,334,21"/>
<area shape="rect" href="group__xwmm__memslice.html#ga6b9a1ff8b0ea0720d3e684a6b673dbe6" title="XWMM API：申请内存切片" alt="" coords="403,55,562,80"/>
<area shape="poly" title=" " alt="" coords="315,65,390,65,390,70,315,70"/>
<area shape="rect" href="group__xwos__lib__lfq.html#gacbe43c237a9c7c6f21baa98daaf49e68" title="弹出无锁队列中的第一个节点（栈式队列）" alt="" coords="616,55,717,80"/>
<area shape="poly" title=" " alt="" coords="562,65,602,65,602,70,562,70"/>
</map>
</div>

</div>
</div>
<a id="ga3a7d5f642c3629ebfcf03e7721efd4c2" name="ga3a7d5f642c3629ebfcf03e7721efd4c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3a7d5f642c3629ebfcf03e7721efd4c2">&#9670;&#160;</a></span>xwmq_put()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API：减少消息队列对象的引用计数 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列控制块对象指针 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EOBJDEAD</td><td>对象无效 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：任意 </li>
</ul>
</dd></dl>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00079">79</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">   80</span>{</div>
<div class="line"><span class="lineno">   81</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((mq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="group__xwos__lib__xwobj.html#gad75451193241a605aef8b9fc6f934dcb">xwos_object_put</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a2adc72e15cceb2273b322bb1280462da">xwobj</a>);</div>
<div class="line"><span class="lineno">   84</span>}</div>
<div class="ttc" id="agroup__xwos__lib__xwobj_html_gad75451193241a605aef8b9fc6f934dcb"><div class="ttname"><a href="group__xwos__lib__xwobj.html#gad75451193241a605aef8b9fc6f934dcb">xwos_object_put</a></div><div class="ttdeci">xwer_t xwos_object_put(struct xwos_object *obj)</div><div class="ttdoc">减少对象的引用计数</div><div class="ttdef"><b>Definition</b> <a href="xwos_2lib_2object_8c_source.html#l00316">object.c:316</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga3a7d5f642c3629ebfcf03e7721efd4c2_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga3a7d5f642c3629ebfcf03e7721efd4c2_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga3a7d5f642c3629ebfcf03e7721efd4c2_cgraph" id="agroup__xwmd__isc__xwmq_ga3a7d5f642c3629ebfcf03e7721efd4c2_cgraph">
<area shape="rect" title="XWMQ API：减少消息队列对象的引用计数" alt="" coords="5,5,88,31"/>
<area shape="rect" href="group__xwos__lib__xwobj.html#gad75451193241a605aef8b9fc6f934dcb" title="减少对象的引用计数" alt="" coords="136,5,256,31"/>
<area shape="poly" title=" " alt="" coords="88,15,122,15,122,21,88,21"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga3a7d5f642c3629ebfcf03e7721efd4c2_icgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga3a7d5f642c3629ebfcf03e7721efd4c2_icgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga3a7d5f642c3629ebfcf03e7721efd4c2_icgraph" id="agroup__xwmd__isc__xwmq_ga3a7d5f642c3629ebfcf03e7721efd4c2_icgraph">
<area shape="rect" title="XWMQ API：减少消息队列对象的引用计数" alt="" coords="293,31,376,56"/>
<area shape="rect" href="xwmq_8c.html#aa0841cf7abe8c4dfd5626a12bf99f72d" title=" " alt="" coords="135,5,245,31"/>
<area shape="poly" title=" " alt="" coords="279,36,245,30,246,25,280,31"/>
<area shape="rect" href="group__xwmd__isc__xwmq.html#ga57fec3e151fbf8044a2b7092ab2972b3" title="XWMQ API：销毁静态方式初始化的消息队列对象" alt="" coords="149,55,231,80"/>
<area shape="poly" title=" " alt="" coords="280,55,231,63,230,58,279,50"/>
<area shape="rect" href="group__xwmd__isc__xwmq.html#ga51603f04fac6de40ea6726d69b264cc7" title="XWMQ API：静态方式初始化消息队列" alt="" coords="5,5,87,31"/>
<area shape="poly" title=" " alt="" coords="121,21,87,21,87,15,121,15"/>
</map>
</div>

</div>
</div>
<a id="ga57efc774777e38855532c6f6be1e4504" name="ga57efc774777e38855532c6f6be1e4504"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga57efc774777e38855532c6f6be1e4504">&#9670;&#160;</a></span>xwmq_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structxwmq__d.html">xwmq_d</a>&#160;</td>
          <td class="paramname"><em>mqd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API：检查消息队列对象的标签并减少引用计数 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mqd</td><td>消息队列对象描述符 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-ENILOBJD</td><td>空的对象描述符 </td></tr>
    <tr><td class="paramname">-EOBJDEAD</td><td>对象无效 </td></tr>
    <tr><td class="paramname">-EACCES</td><td>对象标签检查失败 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：任意 </li>
</ul>
</dd></dl>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00065">65</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">   66</span>{</div>
<div class="line"><span class="lineno">   67</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="group__xwos__lib__xwobj.html#gac2826d86066a8dfdcc77fe7a8c53edfc">xwos_object_release</a>(&amp;mqd.<a class="code hl_variable" href="structxwmq__d.html#acdc8d67b1715bb673876fae39ada51f1">mq</a>-&gt;<a class="code hl_variable" href="structxwmq.html#a2adc72e15cceb2273b322bb1280462da">xwobj</a>, mqd.<a class="code hl_variable" href="structxwmq__d.html#a026076e147ea8817bc7bdfb6c7e18346">tik</a>);</div>
<div class="line"><span class="lineno">   68</span>}</div>
<div class="ttc" id="agroup__xwos__lib__xwobj_html_gac2826d86066a8dfdcc77fe7a8c53edfc"><div class="ttname"><a href="group__xwos__lib__xwobj.html#gac2826d86066a8dfdcc77fe7a8c53edfc">xwos_object_release</a></div><div class="ttdeci">xwer_t xwos_object_release(struct xwos_object *obj, xwsq_t tik)</div><div class="ttdoc">检查对象的标签并减少引用计数</div><div class="ttdef"><b>Definition</b> <a href="xwos_2lib_2object_8c_source.html#l00265">object.c:265</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga57efc774777e38855532c6f6be1e4504_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga57efc774777e38855532c6f6be1e4504_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga57efc774777e38855532c6f6be1e4504_cgraph" id="agroup__xwmd__isc__xwmq_ga57efc774777e38855532c6f6be1e4504_cgraph">
<area shape="rect" title="XWMQ API：检查消息队列对象的标签并减少引用计数" alt="" coords="5,45,112,70"/>
<area shape="rect" href="group__xwos__lib__xwobj.html#gac2826d86066a8dfdcc77fe7a8c53edfc" title="检查对象的标签并减少引用计数" alt="" coords="160,45,304,70"/>
<area shape="poly" title=" " alt="" coords="112,55,146,55,146,60,112,60"/>
<area shape="rect" href="xwos_2lib_2object_8c.html#a7f4a56f353b86f47a6c81f20fa2595ae" title=" " alt="" coords="352,5,496,45"/>
<area shape="poly" title=" " alt="" coords="304,43,338,37,339,42,305,48"/>
<area shape="rect" href="xwos_2lib_2object_8c.html#aa6ff4702eed783a1d4ab1b253acc26bf" title=" " alt="" coords="352,69,496,109"/>
<area shape="poly" title=" " alt="" coords="305,67,339,72,338,78,304,72"/>
</map>
</div>

</div>
</div>
<a id="ga79b5a6769a655a4e5946f3d60729b342" name="ga79b5a6769a655a4e5946f3d60729b342"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga79b5a6769a655a4e5946f3d60729b342">&#9670;&#160;</a></span>xwmq_rq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_rq </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>databuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API: 等待从消息队列 <b>尾端</b> 接收一条消息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">:topic</td><td>指向缓冲区的指针，通过此缓冲区返回接收消息的标题 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">:databuf</td><td>指向缓冲区的指针，通过此缓冲区返回接收消息的数据 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-EINTR</td><td>等待被中断 </td></tr>
    <tr><td class="paramname">-ENOTTHDCTX</td><td>不在线程上下文中 </td></tr>
    <tr><td class="paramname">-EDSPMPT</td><td>抢占被关闭 </td></tr>
    <tr><td class="paramname">-EDSBH</td><td>中断底半部被关闭 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p>若接收队列中没有消息，就阻塞接收线程，直到有新的消息或被中断。</p>
<p>接收消息后，会释放消息槽。若有发送线程正在等待消息槽，将唤醒发送线程。</p>
<p>如果等待被中断，此CAPI将返回 <code>-EINTR</code> 。 </p>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00475">475</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  476</span>{</div>
<div class="line"><span class="lineno">  477</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="group__xwmd__isc__xwmq.html#gaacdb3c6bfb639e6d2444f479e9557c38">xwmq_rq_to</a>(mq, topic, databuf, <a class="code hl_define" href="group__xwos__lib__type__time.html#gad8937a773924ae599c30f9f75a7b7dbf">XWTM_MAX</a>);</div>
<div class="line"><span class="lineno">  478</span>}</div>
<div class="ttc" id="agroup__xwmd__isc__xwmq_html_gaacdb3c6bfb639e6d2444f479e9557c38"><div class="ttname"><a href="group__xwmd__isc__xwmq.html#gaacdb3c6bfb639e6d2444f479e9557c38">xwmq_rq_to</a></div><div class="ttdeci">xwer_t xwmq_rq_to(struct xwmq *mq, xwsq_t *topic, void **databuf, xwtm_t to)</div><div class="ttdoc">XWMQ API: 限时等待从消息队列 尾端 接收一条消息</div><div class="ttdef"><b>Definition</b> <a href="xwmq_8c_source.html#l00481">xwmq.c:481</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga79b5a6769a655a4e5946f3d60729b342_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga79b5a6769a655a4e5946f3d60729b342_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga79b5a6769a655a4e5946f3d60729b342_cgraph" id="agroup__xwmd__isc__xwmq_ga79b5a6769a655a4e5946f3d60729b342_cgraph">
<area shape="rect" title="XWMQ API: 等待从消息队列 尾端 接收一条消息" alt="" coords="5,189,80,215"/>
<area shape="rect" href="group__xwmd__isc__xwmq.html#gaacdb3c6bfb639e6d2444f479e9557c38" title="XWMQ API: 限时等待从消息队列 尾端 接收一条消息" alt="" coords="128,189,221,215"/>
<area shape="poly" title=" " alt="" coords="80,199,114,199,114,205,80,205"/>
<area shape="rect" href="xwmq_8c.html#ab11ae57b63b75fd37debce2e7bfc7881" title="从消息接收队列尾部选择一条消息" alt="" coords="271,103,402,128"/>
<area shape="poly" title=" " alt="" coords="198,187,299,132,301,137,201,192"/>
<area shape="rect" href="xwmq_8c.html#a5a70d91d330701da212249f5728fb5e4" title="释放一个消息槽" alt="" coords="279,164,394,189"/>
<area shape="poly" title=" " alt="" coords="221,192,265,185,266,190,222,197"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b" title="XWOS API：发布信号量" alt="" coords="278,213,395,239"/>
<area shape="poly" title=" " alt="" coords="222,206,265,213,264,218,221,212"/>
<area shape="rect" href="group__xwos__sync__sem.html#gab9fce6b4dc3add4c714dfa1c8041593f" title="XWOS API：限时等待并获取信号量" alt="" coords="269,263,404,288"/>
<area shape="poly" title=" " alt="" coords="199,212,270,249,286,255,284,260,268,254,197,217"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae" title="删除一个节点，并重新初始化它" alt="" coords="476,29,611,55"/>
<area shape="poly" title=" " alt="" coords="363,100,451,63,476,56,477,61,453,69,365,105"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf" title="XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭" alt="" coords="458,79,629,104"/>
<area shape="poly" title=" " alt="" coords="402,105,444,100,445,105,403,110"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979" title="XWOS API：解锁自旋锁，并恢复本地CPU的中断标志" alt="" coords="452,128,635,153"/>
<area shape="poly" title=" " alt="" coords="403,121,439,125,438,130,402,126"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab7918962f86f86d5c7049922a5173e81" title="删除prev节点与next节点之间的节点" alt="" coords="683,5,849,31"/>
<area shape="poly" title=" " alt="" coords="610,32,669,26,669,31,611,37"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569" title="初始化一个链表节点。" alt="" coords="693,55,839,80"/>
<area shape="poly" title=" " alt="" coords="611,47,679,55,678,60,610,52"/>
<area shape="rect" href="group__xwmm__memslice.html#ga337a549e8b2fc9e95d1e9c240bde1e31" title="XWMM API：释放内存切片" alt="" coords="467,177,620,203"/>
<area shape="poly" title=" " alt="" coords="394,178,453,182,453,187,394,183"/>
<area shape="rect" href="group__xwos__lib__lfq.html#ga1cac1b49ec185ccb135f19401e286166" title="将一个节点推入无锁队列（栈式队列）" alt="" coords="712,177,820,203"/>
<area shape="poly" title=" " alt="" coords="620,187,698,187,698,193,620,193"/>
</map>
</div>

</div>
</div>
<a id="gaacdb3c6bfb639e6d2444f479e9557c38" name="gaacdb3c6bfb639e6d2444f479e9557c38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaacdb3c6bfb639e6d2444f479e9557c38">&#9670;&#160;</a></span>xwmq_rq_to()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_rq_to </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>databuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type__time.html#ga3079bb70c0290f939f9c6896fe43ec61">xwtm_t</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API: 限时等待从消息队列 <b>尾端</b> 接收一条消息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">:topic</td><td>指向缓冲区的指针，通过此缓冲区返回接收消息的标题 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">:databuf</td><td>指向缓冲区的指针，通过此缓冲区返回接收消息的数据 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>期望唤醒的时间点 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-EINTR</td><td>等待被中断 </td></tr>
    <tr><td class="paramname">-ETIMEDOUT</td><td>超时 </td></tr>
    <tr><td class="paramname">-ENOTTHDCTX</td><td>不在线程上下文中 </td></tr>
    <tr><td class="paramname">-EDSPMPT</td><td>抢占被关闭 </td></tr>
    <tr><td class="paramname">-EDSBH</td><td>中断底半部被关闭 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<ul>
<li>若接收队列中没有消息，就阻塞接收线程，直到新的消息或被中断或超时。</li>
<li>接收消息后，会释放消息槽。若有发送线程正在等待消息槽，将唤醒发送线程。</li>
<li>如果等待被中断，此CAPI将返回 <code>-EINTR</code> 。</li>
<li><code>to</code> 表示等待超时的时间点：<ul>
<li><code>to</code> 通常是未来的时间，即 <b>当前系统时间</b> + <code>delta</code> ， 可以使用 <code>xwtm_ft(delta)</code> 表示；</li>
<li>如果 <code>to</code> 是过去的时间点，将直接返回 <code>-ETIMEDOUT</code> 。 </li>
</ul>
</li>
</ul>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00481">481</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  482</span>{</div>
<div class="line"><span class="lineno">  483</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  484</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmq__msg.html">xwmq_msg</a> * msg;</div>
<div class="line"><span class="lineno">  485</span> </div>
<div class="line"><span class="lineno">  486</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((mq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  487</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  488</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((databuf), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  489</span> </div>
<div class="line"><span class="lineno">  490</span>        rc = <a class="code hl_function" href="group__xwos__sync__sem.html#gab9fce6b4dc3add4c714dfa1c8041593f">xwos_sem_wait_to</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a287dc420d0b42e9c77135a78f08f1ef8">rxqsem</a>, to);</div>
<div class="line"><span class="lineno">  491</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  492</span>                <span class="keywordflow">goto</span> err_sem_wait_to;</div>
<div class="line"><span class="lineno">  493</span>        }</div>
<div class="line"><span class="lineno">  494</span>        msg = <a class="code hl_function" href="xwmq_8c.html#ab11ae57b63b75fd37debce2e7bfc7881">xwmq_choose_tail</a>(mq);</div>
<div class="line"><span class="lineno">  495</span>        *databuf = msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>;</div>
<div class="line"><span class="lineno">  496</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>) {</div>
<div class="line"><span class="lineno">  497</span>                *<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a> = msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>;</div>
<div class="line"><span class="lineno">  498</span>        }</div>
<div class="line"><span class="lineno">  499</span>        <a class="code hl_function" href="xwmq_8c.html#a5a70d91d330701da212249f5728fb5e4">xwmq_msg_put</a>(mq, msg);</div>
<div class="line"><span class="lineno">  500</span>        <a class="code hl_function" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b">xwos_sem_post</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a35a574ad328c5ac780f7baa931966c72">txqsem</a>);</div>
<div class="line"><span class="lineno">  501</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  502</span> </div>
<div class="line"><span class="lineno">  503</span>err_sem_wait_to:</div>
<div class="line"><span class="lineno">  504</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  505</span>}</div>
<div class="ttc" id="axwmq_8c_html_ab11ae57b63b75fd37debce2e7bfc7881"><div class="ttname"><a href="xwmq_8c.html#ab11ae57b63b75fd37debce2e7bfc7881">xwmq_choose_tail</a></div><div class="ttdeci">static struct xwmq_msg * xwmq_choose_tail(struct xwmq *mq)</div><div class="ttdoc">从消息接收队列尾部选择一条消息</div><div class="ttdef"><b>Definition</b> <a href="xwmq_8c_source.html#l00373">xwmq.c:373</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_gaacdb3c6bfb639e6d2444f479e9557c38_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_gaacdb3c6bfb639e6d2444f479e9557c38_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_gaacdb3c6bfb639e6d2444f479e9557c38_cgraph" id="agroup__xwmd__isc__xwmq_gaacdb3c6bfb639e6d2444f479e9557c38_cgraph">
<area shape="rect" title="XWMQ API: 限时等待从消息队列 尾端 接收一条消息" alt="" coords="5,189,99,215"/>
<area shape="rect" href="xwmq_8c.html#ab11ae57b63b75fd37debce2e7bfc7881" title="从消息接收队列尾部选择一条消息" alt="" coords="149,103,279,128"/>
<area shape="poly" title=" " alt="" coords="76,187,176,132,178,137,78,192"/>
<area shape="rect" href="xwmq_8c.html#a5a70d91d330701da212249f5728fb5e4" title="释放一个消息槽" alt="" coords="157,164,271,189"/>
<area shape="poly" title=" " alt="" coords="99,192,142,185,143,190,99,197"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b" title="XWOS API：发布信号量" alt="" coords="155,213,273,239"/>
<area shape="poly" title=" " alt="" coords="99,206,142,213,141,218,99,212"/>
<area shape="rect" href="group__xwos__sync__sem.html#gab9fce6b4dc3add4c714dfa1c8041593f" title="XWOS API：限时等待并获取信号量" alt="" coords="147,263,281,288"/>
<area shape="poly" title=" " alt="" coords="77,212,148,249,164,255,161,260,146,254,74,217"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae" title="删除一个节点，并重新初始化它" alt="" coords="353,29,488,55"/>
<area shape="poly" title=" " alt="" coords="241,100,328,63,353,56,355,61,330,69,243,105"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf" title="XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭" alt="" coords="335,79,506,104"/>
<area shape="poly" title=" " alt="" coords="280,105,321,100,322,105,280,110"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979" title="XWOS API：解锁自旋锁，并恢复本地CPU的中断标志" alt="" coords="329,128,512,153"/>
<area shape="poly" title=" " alt="" coords="280,121,316,125,316,130,280,126"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab7918962f86f86d5c7049922a5173e81" title="删除prev节点与next节点之间的节点" alt="" coords="560,5,727,31"/>
<area shape="poly" title=" " alt="" coords="488,32,546,26,546,31,488,37"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569" title="初始化一个链表节点。" alt="" coords="570,55,717,80"/>
<area shape="poly" title=" " alt="" coords="488,47,556,55,556,60,488,52"/>
<area shape="rect" href="group__xwmm__memslice.html#ga337a549e8b2fc9e95d1e9c240bde1e31" title="XWMM API：释放内存切片" alt="" coords="344,177,497,203"/>
<area shape="poly" title=" " alt="" coords="272,178,330,182,330,187,271,183"/>
<area shape="rect" href="group__xwos__lib__lfq.html#ga1cac1b49ec185ccb135f19401e286166" title="将一个节点推入无锁队列（栈式队列）" alt="" coords="589,177,697,203"/>
<area shape="poly" title=" " alt="" coords="498,187,575,187,575,193,498,193"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_gaacdb3c6bfb639e6d2444f479e9557c38_icgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_gaacdb3c6bfb639e6d2444f479e9557c38_icgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_gaacdb3c6bfb639e6d2444f479e9557c38_icgraph" id="agroup__xwmd__isc__xwmq_gaacdb3c6bfb639e6d2444f479e9557c38_icgraph">
<area shape="rect" title="XWMQ API: 限时等待从消息队列 尾端 接收一条消息" alt="" coords="128,5,221,31"/>
<area shape="rect" href="group__xwmd__isc__xwmq.html#ga79b5a6769a655a4e5946f3d60729b342" title="XWMQ API: 等待从消息队列 尾端 接收一条消息" alt="" coords="5,5,80,31"/>
<area shape="poly" title=" " alt="" coords="114,21,80,21,80,15,114,15"/>
</map>
</div>

</div>
</div>
<a id="ga1ebf67fde973c23ec718d35258dd7ee1" name="ga1ebf67fde973c23ec718d35258dd7ee1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1ebf67fde973c23ec718d35258dd7ee1">&#9670;&#160;</a></span>xwmq_rq_unintr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_rq_unintr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>databuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API: 等待从消息队列 <b>尾端</b> 接收一条消息，且等待不可被中断 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">:topic</td><td>指向缓冲区的指针，通过此缓冲区返回接收消息的标题 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">:databuf</td><td>指向缓冲区的指针，通过此缓冲区返回接收消息的数据 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-ENOTTHDCTX</td><td>不在线程上下文中 </td></tr>
    <tr><td class="paramname">-EDSPMPT</td><td>抢占被关闭 </td></tr>
    <tr><td class="paramname">-EDSBH</td><td>中断底半部被关闭 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：线程</li>
</ul>
</dd></dl>
<p>若接收队列中没有消息，就阻塞接收线程，直到有新的消息。 并且接收线程的等待不可被中断。</p>
<p>接收消息后，会释放消息槽。若有发送线程正在等待消息槽，将唤醒发送线程。 </p>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00508">508</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  509</span>{</div>
<div class="line"><span class="lineno">  510</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  511</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmq__msg.html">xwmq_msg</a> * msg;</div>
<div class="line"><span class="lineno">  512</span> </div>
<div class="line"><span class="lineno">  513</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((mq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  514</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  515</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((databuf), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  516</span> </div>
<div class="line"><span class="lineno">  517</span>        rc = <a class="code hl_function" href="group__xwos__sync__sem.html#ga794e05587874027d02d0e4c87f9c2893">xwos_sem_wait_unintr</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a287dc420d0b42e9c77135a78f08f1ef8">rxqsem</a>);</div>
<div class="line"><span class="lineno">  518</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  519</span>                <span class="keywordflow">goto</span> err_sem_wait_unintr;</div>
<div class="line"><span class="lineno">  520</span>        }</div>
<div class="line"><span class="lineno">  521</span>        msg = <a class="code hl_function" href="xwmq_8c.html#ab11ae57b63b75fd37debce2e7bfc7881">xwmq_choose_tail</a>(mq);</div>
<div class="line"><span class="lineno">  522</span>        *databuf = msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>;</div>
<div class="line"><span class="lineno">  523</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>) {</div>
<div class="line"><span class="lineno">  524</span>                *<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a> = msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>;</div>
<div class="line"><span class="lineno">  525</span>        }</div>
<div class="line"><span class="lineno">  526</span>        <a class="code hl_function" href="xwmq_8c.html#a5a70d91d330701da212249f5728fb5e4">xwmq_msg_put</a>(mq, msg);</div>
<div class="line"><span class="lineno">  527</span>        <a class="code hl_function" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b">xwos_sem_post</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a35a574ad328c5ac780f7baa931966c72">txqsem</a>);</div>
<div class="line"><span class="lineno">  528</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span>err_sem_wait_unintr:</div>
<div class="line"><span class="lineno">  531</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  532</span>}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga1ebf67fde973c23ec718d35258dd7ee1_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga1ebf67fde973c23ec718d35258dd7ee1_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga1ebf67fde973c23ec718d35258dd7ee1_cgraph" id="agroup__xwmd__isc__xwmq_ga1ebf67fde973c23ec718d35258dd7ee1_cgraph">
<area shape="rect" title="XWMQ API: 等待从消息队列 尾端 接收一条消息，且等待不可被中断" alt="" coords="5,189,120,215"/>
<area shape="rect" href="xwmq_8c.html#ab11ae57b63b75fd37debce2e7bfc7881" title="从消息接收队列尾部选择一条消息" alt="" coords="180,103,311,128"/>
<area shape="poly" title=" " alt="" coords="89,187,167,149,203,131,206,136,169,154,91,192"/>
<area shape="rect" href="xwmq_8c.html#a5a70d91d330701da212249f5728fb5e4" title="释放一个消息槽" alt="" coords="188,164,303,189"/>
<area shape="poly" title=" " alt="" coords="120,191,174,184,175,189,121,197"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b" title="XWOS API：发布信号量" alt="" coords="187,213,304,239"/>
<area shape="poly" title=" " alt="" coords="121,207,173,214,172,219,120,212"/>
<area shape="rect" href="group__xwos__sync__sem.html#ga794e05587874027d02d0e4c87f9c2893" title="XWOS API：等待并获取信号量，且等待不可被中断" alt="" coords="168,263,323,288"/>
<area shape="poly" title=" " alt="" coords="89,212,169,249,188,256,187,261,167,254,87,217"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae" title="删除一个节点，并重新初始化它" alt="" coords="395,29,529,55"/>
<area shape="poly" title=" " alt="" coords="275,100,370,63,395,56,397,61,372,69,277,105"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf" title="XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭" alt="" coords="377,79,547,104"/>
<area shape="poly" title=" " alt="" coords="311,105,363,100,363,105,311,111"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979" title="XWOS API：解锁自旋锁，并恢复本地CPU的中断标志" alt="" coords="371,128,553,153"/>
<area shape="poly" title=" " alt="" coords="311,120,357,126,356,131,311,126"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab7918962f86f86d5c7049922a5173e81" title="删除prev节点与next节点之间的节点" alt="" coords="601,5,768,31"/>
<area shape="poly" title=" " alt="" coords="529,32,587,26,588,31,530,37"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569" title="初始化一个链表节点。" alt="" coords="611,55,758,80"/>
<area shape="poly" title=" " alt="" coords="530,47,598,55,597,60,529,52"/>
<area shape="rect" href="group__xwmm__memslice.html#ga337a549e8b2fc9e95d1e9c240bde1e31" title="XWMM API：释放内存切片" alt="" coords="385,177,539,203"/>
<area shape="poly" title=" " alt="" coords="303,178,372,182,371,187,303,183"/>
<area shape="rect" href="group__xwos__lib__lfq.html#ga1cac1b49ec185ccb135f19401e286166" title="将一个节点推入无锁队列（栈式队列）" alt="" coords="631,177,739,203"/>
<area shape="poly" title=" " alt="" coords="539,187,617,187,617,193,539,193"/>
</map>
</div>

</div>
</div>
<a id="ga113bc97ec8121f3eb884e8da900497eb" name="ga113bc97ec8121f3eb884e8da900497eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga113bc97ec8121f3eb884e8da900497eb">&#9670;&#160;</a></span>xwmq_trydq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_trydq </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>databuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API: 尝试从消息队列 <b>首端</b> 接收一条消息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">:topic</td><td>指向缓冲区的指针，通过此缓冲区返回接收消息的标题 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">:databuf</td><td>指向缓冲区的指针，通过此缓冲区返回接收消息的数据 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-ENODATA</td><td>接收队列为空 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：任意</li>
</ul>
</dd></dl>
<p>若接收队列中没有新的消息，就立即返回 <code>-ENODATA</code> ，此CAPI可在中断中使用。</p>
<p>接收消息后，会释放消息槽。若有发送线程正在等待消息槽，将唤醒发送线程。 </p>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00448">448</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  449</span>{</div>
<div class="line"><span class="lineno">  450</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  451</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmq__msg.html">xwmq_msg</a> * msg;</div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((mq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  454</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  455</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((databuf), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  456</span> </div>
<div class="line"><span class="lineno">  457</span>        rc = <a class="code hl_function" href="group__xwos__sync__sem.html#ga453bbb4747cdd5cc94ddb9b988ee0866">xwos_sem_trywait</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a287dc420d0b42e9c77135a78f08f1ef8">rxqsem</a>);</div>
<div class="line"><span class="lineno">  458</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  459</span>                <span class="keywordflow">goto</span> err_sem_trywait;</div>
<div class="line"><span class="lineno">  460</span>        }</div>
<div class="line"><span class="lineno">  461</span>        msg = <a class="code hl_function" href="xwmq_8c.html#afcc2194eee03bb360b90d0c47b246072">xwmq_choose_head</a>(mq);</div>
<div class="line"><span class="lineno">  462</span>        *databuf = msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>;</div>
<div class="line"><span class="lineno">  463</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>) {</div>
<div class="line"><span class="lineno">  464</span>                *<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a> = msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>;</div>
<div class="line"><span class="lineno">  465</span>        }</div>
<div class="line"><span class="lineno">  466</span>        <a class="code hl_function" href="xwmq_8c.html#a5a70d91d330701da212249f5728fb5e4">xwmq_msg_put</a>(mq, msg);</div>
<div class="line"><span class="lineno">  467</span>        <a class="code hl_function" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b">xwos_sem_post</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a35a574ad328c5ac780f7baa931966c72">txqsem</a>);</div>
<div class="line"><span class="lineno">  468</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  470</span>err_sem_trywait:</div>
<div class="line"><span class="lineno">  471</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  472</span>}</div>
<div class="ttc" id="agroup__xwos__sync__sem_html_ga453bbb4747cdd5cc94ddb9b988ee0866"><div class="ttname"><a href="group__xwos__sync__sem.html#ga453bbb4747cdd5cc94ddb9b988ee0866">xwos_sem_trywait</a></div><div class="ttdeci">static xwer_t xwos_sem_trywait(struct xwos_sem *sem)</div><div class="ttdoc">XWOS API：尝试获取信号量</div><div class="ttdef"><b>Definition</b> <a href="sync_2sem_8h_source.html#l00454">sem.h:454</a></div></div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga113bc97ec8121f3eb884e8da900497eb_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga113bc97ec8121f3eb884e8da900497eb_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga113bc97ec8121f3eb884e8da900497eb_cgraph" id="agroup__xwmd__isc__xwmq_ga113bc97ec8121f3eb884e8da900497eb_cgraph">
<area shape="rect" title="XWMQ API: 尝试从消息队列 首端 接收一条消息" alt="" coords="5,189,99,215"/>
<area shape="rect" href="xwmq_8c.html#afcc2194eee03bb360b90d0c47b246072" title="从消息接收队列头部选择一条消息" alt="" coords="147,103,288,128"/>
<area shape="poly" title=" " alt="" coords="75,187,145,149,178,132,180,137,148,154,78,192"/>
<area shape="rect" href="xwmq_8c.html#a5a70d91d330701da212249f5728fb5e4" title="释放一个消息槽" alt="" coords="160,164,275,189"/>
<area shape="poly" title=" " alt="" coords="99,192,146,185,147,190,99,198"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b" title="XWOS API：发布信号量" alt="" coords="159,213,276,239"/>
<area shape="poly" title=" " alt="" coords="99,206,145,213,145,218,99,211"/>
<area shape="rect" href="group__xwos__sync__sem.html#ga453bbb4747cdd5cc94ddb9b988ee0866" title="XWOS API：尝试获取信号量" alt="" coords="152,263,283,288"/>
<area shape="poly" title=" " alt="" coords="76,212,148,249,164,255,162,260,146,254,74,217"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae" title="删除一个节点，并重新初始化它" alt="" coords="360,29,495,55"/>
<area shape="poly" title=" " alt="" coords="245,100,335,63,360,56,361,61,337,69,247,105"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf" title="XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭" alt="" coords="342,79,513,104"/>
<area shape="poly" title=" " alt="" coords="288,105,328,100,329,105,289,110"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979" title="XWOS API：解锁自旋锁，并恢复本地CPU的中断标志" alt="" coords="336,128,519,153"/>
<area shape="poly" title=" " alt="" coords="289,121,323,125,322,131,288,126"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab7918962f86f86d5c7049922a5173e81" title="删除prev节点与next节点之间的节点" alt="" coords="567,5,733,31"/>
<area shape="poly" title=" " alt="" coords="494,32,553,26,553,31,495,37"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569" title="初始化一个链表节点。" alt="" coords="577,55,723,80"/>
<area shape="poly" title=" " alt="" coords="495,47,563,55,562,60,494,52"/>
<area shape="rect" href="group__xwmm__memslice.html#ga337a549e8b2fc9e95d1e9c240bde1e31" title="XWMM API：释放内存切片" alt="" coords="351,177,504,203"/>
<area shape="poly" title=" " alt="" coords="275,178,337,182,337,187,275,183"/>
<area shape="rect" href="group__xwos__lib__lfq.html#ga1cac1b49ec185ccb135f19401e286166" title="将一个节点推入无锁队列（栈式队列）" alt="" coords="596,177,704,203"/>
<area shape="poly" title=" " alt="" coords="504,187,582,187,582,193,504,193"/>
</map>
</div>

</div>
</div>
<a id="ga30b3fc4cf9323d3597eb8a383bdf611f" name="ga30b3fc4cf9323d3597eb8a383bdf611f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga30b3fc4cf9323d3597eb8a383bdf611f">&#9670;&#160;</a></span>xwmq_tryeq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_tryeq </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a>&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API：尝试获取消息槽，成功后将消息发送到消息队列的 <b>尾端</b> （入队） </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>消息的标题 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>消息的数据 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-ENODATA</td><td>接收队列为空 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：任意</li>
</ul>
</dd></dl>
<p>若消息槽队列中没有空闲的消息槽，就立即返回 <code>-ENODATA</code>，此CAPI可在中断中使用。 </p>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00236">236</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  237</span>{</div>
<div class="line"><span class="lineno">  238</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  239</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gad21f70aa6f1364b63b1165784448bc16">xwreg_t</a> cpuirq;</div>
<div class="line"><span class="lineno">  240</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmq__msg.html">xwmq_msg</a> * msg;</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((mq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  243</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>        rc = <a class="code hl_function" href="group__xwos__sync__sem.html#ga453bbb4747cdd5cc94ddb9b988ee0866">xwos_sem_trywait</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a35a574ad328c5ac780f7baa931966c72">txqsem</a>);</div>
<div class="line"><span class="lineno">  246</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  247</span>                <span class="keywordflow">goto</span> err_sem_trywait;</div>
<div class="line"><span class="lineno">  248</span>        }</div>
<div class="line"><span class="lineno">  249</span>        msg = <a class="code hl_function" href="xwmq_8c.html#a266a048d37f3f16990f8d6bcf3ac2828">xwmq_msg_get</a>(mq);</div>
<div class="line"><span class="lineno">  250</span>        msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a> = <a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>;</div>
<div class="line"><span class="lineno">  251</span>        msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a> = <a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>;</div>
<div class="line"><span class="lineno">  252</span>        <a class="code hl_function" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf">xwos_splk_lock_cpuirqsv</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a46776d84330e7e63acf6b90d13e9cf6d">rxqlock</a>, &amp;cpuirq);</div>
<div class="line"><span class="lineno">  253</span>        <a class="code hl_function" href="group__xwos__lib__bclst.html#ga2aa317fe5cea0989c273b3c69f69d795">xwlib_bclst_add_tail</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a437c514f793850e7e665ac7183320a9a">rxq</a>, &amp;msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#a7b605404c02bc7dcf8d6cb6eb4a74022">node</a>);</div>
<div class="line"><span class="lineno">  254</span>        <a class="code hl_function" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979">xwos_splk_unlock_cpuirqrs</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a46776d84330e7e63acf6b90d13e9cf6d">rxqlock</a>, cpuirq);</div>
<div class="line"><span class="lineno">  255</span>        <a class="code hl_function" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b">xwos_sem_post</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a287dc420d0b42e9c77135a78f08f1ef8">rxqsem</a>);</div>
<div class="line"><span class="lineno">  256</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>err_sem_trywait:</div>
<div class="line"><span class="lineno">  259</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  260</span>}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga30b3fc4cf9323d3597eb8a383bdf611f_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga30b3fc4cf9323d3597eb8a383bdf611f_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga30b3fc4cf9323d3597eb8a383bdf611f_cgraph" id="agroup__xwmd__isc__xwmq_ga30b3fc4cf9323d3597eb8a383bdf611f_cgraph">
<area shape="rect" title="XWMQ API：尝试获取消息槽，成功后将消息发送到消息队列的 尾端 （入队）" alt="" coords="5,129,99,155"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga2aa317fe5cea0989c273b3c69f69d795" title="将一个节点加入链表尾部（链表头的前面）" alt="" coords="169,5,307,31"/>
<area shape="poly" title=" " alt="" coords="60,127,93,84,118,60,145,40,157,33,160,38,148,44,121,64,97,88,64,131"/>
<area shape="rect" href="xwmq_8c.html#a266a048d37f3f16990f8d6bcf3ac2828" title="获取一个消息槽" alt="" coords="181,55,295,80"/>
<area shape="poly" title=" " alt="" coords="72,127,106,108,146,89,167,81,169,86,148,94,108,112,75,132"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b" title="XWOS API：发布信号量" alt="" coords="179,104,297,129"/>
<area shape="poly" title=" " alt="" coords="99,133,165,124,166,129,99,138"/>
<area shape="rect" href="group__xwos__sync__sem.html#ga453bbb4747cdd5cc94ddb9b988ee0866" title="XWOS API：尝试获取信号量" alt="" coords="173,153,303,179"/>
<area shape="poly" title=" " alt="" coords="99,145,160,153,159,159,99,151"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf" title="XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭" alt="" coords="153,203,323,228"/>
<area shape="poly" title=" " alt="" coords="76,152,148,188,172,196,171,201,146,192,74,157"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979" title="XWOS API：解锁自旋锁，并恢复本地CPU的中断标志" alt="" coords="147,252,329,277"/>
<area shape="poly" title=" " alt="" coords="64,153,98,195,122,218,148,237,163,245,161,250,145,242,118,222,94,198,60,157"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga42c09bc0da5cac8327003314056f43b7" title="将一个新节点加入到prev与next之间" alt="" coords="377,5,548,31"/>
<area shape="poly" title=" " alt="" coords="308,15,364,15,364,21,308,21"/>
<area shape="rect" href="group__xwmm__memslice.html#ga6b9a1ff8b0ea0720d3e684a6b673dbe6" title="XWMM API：申请内存切片" alt="" coords="383,55,542,80"/>
<area shape="poly" title=" " alt="" coords="295,65,370,65,370,70,295,70"/>
<area shape="rect" href="group__xwos__lib__lfq.html#gacbe43c237a9c7c6f21baa98daaf49e68" title="弹出无锁队列中的第一个节点（栈式队列）" alt="" coords="596,55,697,80"/>
<area shape="poly" title=" " alt="" coords="542,65,582,65,582,70,542,70"/>
</map>
</div>

</div>
</div>
<a id="ga706a753c885996d85ec7fbf6d7461385" name="ga706a753c885996d85ec7fbf6d7461385"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga706a753c885996d85ec7fbf6d7461385">&#9670;&#160;</a></span>xwmq_tryjq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_tryjq </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a>&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API：尝试获取消息槽，成功后将消息发送到消息队列的 <b>首端</b> （插队） </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>消息的标题 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>消息的数据 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-ENODATA</td><td>接收队列为空 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：任意</li>
</ul>
</dd></dl>
<p>若消息槽队列中没有空闲的消息槽，就立即返回 <code>-ENODATA</code>，此CAPI可在中断中使用。 </p>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00323">323</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  324</span>{</div>
<div class="line"><span class="lineno">  325</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  326</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gad21f70aa6f1364b63b1165784448bc16">xwreg_t</a> cpuirq;</div>
<div class="line"><span class="lineno">  327</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmq__msg.html">xwmq_msg</a> * msg;</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((mq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  330</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>        rc = <a class="code hl_function" href="group__xwos__sync__sem.html#ga453bbb4747cdd5cc94ddb9b988ee0866">xwos_sem_trywait</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a35a574ad328c5ac780f7baa931966c72">txqsem</a>);</div>
<div class="line"><span class="lineno">  333</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  334</span>                <span class="keywordflow">goto</span> err_sem_trywait;</div>
<div class="line"><span class="lineno">  335</span>        }</div>
<div class="line"><span class="lineno">  336</span>        msg = <a class="code hl_function" href="xwmq_8c.html#a266a048d37f3f16990f8d6bcf3ac2828">xwmq_msg_get</a>(mq);</div>
<div class="line"><span class="lineno">  337</span>        msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a> = <a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>;</div>
<div class="line"><span class="lineno">  338</span>        msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a> = <a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>;</div>
<div class="line"><span class="lineno">  339</span>        <a class="code hl_function" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf">xwos_splk_lock_cpuirqsv</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a46776d84330e7e63acf6b90d13e9cf6d">rxqlock</a>, &amp;cpuirq);</div>
<div class="line"><span class="lineno">  340</span>        <a class="code hl_function" href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706">xwlib_bclst_add_head</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a437c514f793850e7e665ac7183320a9a">rxq</a>, &amp;msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#a7b605404c02bc7dcf8d6cb6eb4a74022">node</a>);</div>
<div class="line"><span class="lineno">  341</span>        <a class="code hl_function" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979">xwos_splk_unlock_cpuirqrs</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a46776d84330e7e63acf6b90d13e9cf6d">rxqlock</a>, cpuirq);</div>
<div class="line"><span class="lineno">  342</span>        <a class="code hl_function" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b">xwos_sem_post</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a287dc420d0b42e9c77135a78f08f1ef8">rxqsem</a>);</div>
<div class="line"><span class="lineno">  343</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>err_sem_trywait:</div>
<div class="line"><span class="lineno">  346</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  347</span>}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga706a753c885996d85ec7fbf6d7461385_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga706a753c885996d85ec7fbf6d7461385_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga706a753c885996d85ec7fbf6d7461385_cgraph" id="agroup__xwmd__isc__xwmq_ga706a753c885996d85ec7fbf6d7461385_cgraph">
<area shape="rect" title="XWMQ API：尝试获取消息槽，成功后将消息发送到消息队列的 首端 （插队）" alt="" coords="5,129,95,155"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706" title="将一个节点加入链表头部（链表头的后面）" alt="" coords="159,5,309,31"/>
<area shape="poly" title=" " alt="" coords="57,127,90,84,114,60,141,40,153,33,156,38,144,44,118,64,94,88,62,131"/>
<area shape="rect" href="xwmq_8c.html#a266a048d37f3f16990f8d6bcf3ac2828" title="获取一个消息槽" alt="" coords="177,55,291,80"/>
<area shape="poly" title=" " alt="" coords="70,127,103,108,142,89,163,81,164,86,144,94,105,112,72,132"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b" title="XWOS API：发布信号量" alt="" coords="175,104,293,129"/>
<area shape="poly" title=" " alt="" coords="94,133,161,124,162,129,95,139"/>
<area shape="rect" href="group__xwos__sync__sem.html#ga453bbb4747cdd5cc94ddb9b988ee0866" title="XWOS API：尝试获取信号量" alt="" coords="169,153,299,179"/>
<area shape="poly" title=" " alt="" coords="95,145,156,153,155,158,94,150"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf" title="XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭" alt="" coords="149,203,319,228"/>
<area shape="poly" title=" " alt="" coords="74,152,144,188,168,196,166,201,142,192,71,157"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979" title="XWOS API：解锁自旋锁，并恢复本地CPU的中断标志" alt="" coords="143,252,325,277"/>
<area shape="poly" title=" " alt="" coords="62,153,95,195,118,218,144,237,159,245,157,249,141,242,114,222,91,198,58,156"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga42c09bc0da5cac8327003314056f43b7" title="将一个新节点加入到prev与next之间" alt="" coords="373,5,544,31"/>
<area shape="poly" title=" " alt="" coords="310,15,359,15,359,21,310,21"/>
<area shape="rect" href="group__xwmm__memslice.html#ga6b9a1ff8b0ea0720d3e684a6b673dbe6" title="XWMM API：申请内存切片" alt="" coords="379,55,538,80"/>
<area shape="poly" title=" " alt="" coords="291,65,366,65,366,70,291,70"/>
<area shape="rect" href="group__xwos__lib__lfq.html#gacbe43c237a9c7c6f21baa98daaf49e68" title="弹出无锁队列中的第一个节点（栈式队列）" alt="" coords="592,55,693,80"/>
<area shape="poly" title=" " alt="" coords="538,65,578,65,578,70,538,70"/>
</map>
</div>

</div>
</div>
<a id="ga7c48b58030cf580f089d2cb42bc644fd" name="ga7c48b58030cf580f089d2cb42bc644fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7c48b58030cf580f089d2cb42bc644fd">&#9670;&#160;</a></span>xwmq_tryrq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> xwmq_tryrq </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxwmq.html">xwmq</a> *&#160;</td>
          <td class="paramname"><em>mq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>databuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>XWMQ API: 尝试从消息队列 <b>尾端</b> 接收一条消息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mq</td><td>消息队列对象的指针 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">:topic</td><td>指向缓冲区的指针，通过此缓冲区返回接收消息的标题 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">:databuf</td><td>指向缓冲区的指针，通过此缓冲区返回接收消息的数据 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>错误码 </dd></dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">XWOK</td><td>没有错误 </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>空指针 </td></tr>
    <tr><td class="paramname">-ENODATA</td><td>接收队列为空 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>注解</dt><dd><ul>
<li>上下文：任意</li>
</ul>
</dd></dl>
<p>若接收队列中没有新的消息，就立即返回 <code>-ENODATA</code> ，此CAPI可在中断中使用。</p>
<p>接收消息后，会释放消息槽。若有发送线程正在等待消息槽，将唤醒发送线程。 </p>
<p>&lt;No error</p>

<p class="definition">在文件 <a class="el" href="xwmq_8c_source.html">xwmq.c</a> 第 <a class="el" href="xwmq_8c_source.html#l00535">535</a> 行定义.</p>
<div class="fragment"><div class="line"><span class="lineno">  536</span>{</div>
<div class="line"><span class="lineno">  537</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><span class="lineno">  538</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmq__msg.html">xwmq_msg</a> * msg;</div>
<div class="line"><span class="lineno">  539</span> </div>
<div class="line"><span class="lineno">  540</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((mq), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  541</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  542</span>        <a class="code hl_define" href="group__xwos__standard.html#ga0c63a67f52b315298e2be98f79cd0c08">XWOS_VALIDATE</a>((databuf), <span class="stringliteral">&quot;nullptr&quot;</span>, -<a class="code hl_define" href="group__xwos__lib__errno.html#ga3f317946e043623f9d6b93dbf60e6316">EFAULT</a>);</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span>        rc = <a class="code hl_function" href="group__xwos__sync__sem.html#ga453bbb4747cdd5cc94ddb9b988ee0866">xwos_sem_trywait</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a287dc420d0b42e9c77135a78f08f1ef8">rxqsem</a>);</div>
<div class="line"><span class="lineno">  545</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><span class="lineno">  546</span>                <span class="keywordflow">goto</span> err_sem_trywait;</div>
<div class="line"><span class="lineno">  547</span>        }</div>
<div class="line"><span class="lineno">  548</span>        msg = <a class="code hl_function" href="xwmq_8c.html#ab11ae57b63b75fd37debce2e7bfc7881">xwmq_choose_tail</a>(mq);</div>
<div class="line"><span class="lineno">  549</span>        *databuf = msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#abb9c4759c5d64abb5fdb9d79e6f56cd1">data</a>;</div>
<div class="line"><span class="lineno">  550</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>) {</div>
<div class="line"><span class="lineno">  551</span>                *<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a> = msg-&gt;<a class="code hl_variable" href="structxwmq__msg.html#ac4d91a1198be2297329071a39ce28f5d">topic</a>;</div>
<div class="line"><span class="lineno">  552</span>        }</div>
<div class="line"><span class="lineno">  553</span>        <a class="code hl_function" href="xwmq_8c.html#a5a70d91d330701da212249f5728fb5e4">xwmq_msg_put</a>(mq, msg);</div>
<div class="line"><span class="lineno">  554</span>        <a class="code hl_function" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b">xwos_sem_post</a>(&amp;mq-&gt;<a class="code hl_variable" href="structxwmq.html#a35a574ad328c5ac780f7baa931966c72">txqsem</a>);</div>
<div class="line"><span class="lineno">  555</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><span class="lineno">  556</span> </div>
<div class="line"><span class="lineno">  557</span>err_sem_trywait:</div>
<div class="line"><span class="lineno">  558</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><span class="lineno">  559</span>}</div>
</div><!-- fragment --><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__xwmd__isc__xwmq_ga7c48b58030cf580f089d2cb42bc644fd_cgraph.png" border="0" usemap="#agroup__xwmd__isc__xwmq_ga7c48b58030cf580f089d2cb42bc644fd_cgraph" alt=""/></div>
<map name="agroup__xwmd__isc__xwmq_ga7c48b58030cf580f089d2cb42bc644fd_cgraph" id="agroup__xwmd__isc__xwmq_ga7c48b58030cf580f089d2cb42bc644fd_cgraph">
<area shape="rect" title="XWMQ API: 尝试从消息队列 尾端 接收一条消息" alt="" coords="5,189,96,215"/>
<area shape="rect" href="xwmq_8c.html#ab11ae57b63b75fd37debce2e7bfc7881" title="从消息接收队列尾部选择一条消息" alt="" coords="144,103,275,128"/>
<area shape="poly" title=" " alt="" coords="74,187,172,133,174,137,76,192"/>
<area shape="rect" href="xwmq_8c.html#a5a70d91d330701da212249f5728fb5e4" title="释放一个消息槽" alt="" coords="152,164,267,189"/>
<area shape="poly" title=" " alt="" coords="96,192,138,185,139,191,97,197"/>
<area shape="rect" href="group__xwos__sync__sem.html#gaf6f291eaa8c268dccb6ebc675a24755b" title="XWOS API：发布信号量" alt="" coords="151,213,268,239"/>
<area shape="poly" title=" " alt="" coords="97,206,137,212,136,218,96,211"/>
<area shape="rect" href="group__xwos__sync__sem.html#ga453bbb4747cdd5cc94ddb9b988ee0866" title="XWOS API：尝试获取信号量" alt="" coords="144,263,275,288"/>
<area shape="poly" title=" " alt="" coords="75,212,145,249,160,255,158,260,143,254,73,217"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae" title="删除一个节点，并重新初始化它" alt="" coords="347,29,481,55"/>
<area shape="poly" title=" " alt="" coords="235,100,322,64,345,56,347,61,324,68,238,105"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gad393963b449be923d8af40538b9befdf" title="XWOS API：上锁自旋锁，保存本地CPU的中断标志并关闭" alt="" coords="329,79,499,104"/>
<area shape="poly" title=" " alt="" coords="275,105,315,100,315,106,275,110"/>
<area shape="rect" href="group__xwos__lock__spinlock.html#gaa83b4a8f3340ddf35346dbedf9ce3979" title="XWOS API：解锁自旋锁，并恢复本地CPU的中断标志" alt="" coords="323,128,505,153"/>
<area shape="poly" title=" " alt="" coords="275,121,309,125,309,130,275,126"/>
<area shape="rect" href="group__xwos__lib__bclst.html#gab7918962f86f86d5c7049922a5173e81" title="删除prev节点与next节点之间的节点" alt="" coords="553,5,720,31"/>
<area shape="poly" title=" " alt="" coords="481,32,539,26,540,31,482,37"/>
<area shape="rect" href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569" title="初始化一个链表节点。" alt="" coords="563,55,710,80"/>
<area shape="poly" title=" " alt="" coords="482,47,550,55,549,60,481,52"/>
<area shape="rect" href="group__xwmm__memslice.html#ga337a549e8b2fc9e95d1e9c240bde1e31" title="XWMM API：释放内存切片" alt="" coords="337,177,491,203"/>
<area shape="poly" title=" " alt="" coords="267,178,323,181,323,187,267,183"/>
<area shape="rect" href="group__xwos__lib__lfq.html#ga1cac1b49ec185ccb135f19401e286166" title="将一个节点推入无锁队列（栈式队列）" alt="" coords="583,177,691,203"/>
<area shape="poly" title=" " alt="" coords="491,187,569,187,569,193,491,193"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
