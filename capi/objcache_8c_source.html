<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Doxygen Awesome" />
<meta property="og:image" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta property="og:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<meta property="og:url" content="https://jothepro.github.io/doxygen-awesome-css/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta name="twitter:title" content="Doxygen Awesome" />
<meta name="twitter:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<!-- END twitter metadata -->
<title>XWOS API: xwos/mm/mempool/objcache.c 源文件</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<a href="/" class="github-corner" title="返回首页">
  <svg viewBox="0 0 250 250" style="position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
    <path
      d="M 0 0 L 250 250 L 250 0 L 0 0 z M 181.19336 6.25 A 18.281986 19.638775 0 0 1 192.79297 10.798828 L 241.54492 54.201172 A 6.0939954 6.5462585 0 0 1 237.64453 65.787109 L 233.13477 65.787109 A 3.0469979 3.2731292 0 0 0 230.08789 69.060547 L 230.08789 111.61133 A 18.281986 19.638775 0 0 1 211.80664 131.25 L 205.71289 131.25 A 12.187991 13.092517 0 0 1 193.52344 118.1582 L 193.52344 98.519531 A 12.187991 13.092517 0 0 0 181.33594 85.425781 A 12.187991 13.092517 0 0 0 169.14844 98.519531 L 169.14844 118.1582 A 12.187991 13.092517 0 0 1 156.95898 131.25 L 150.86523 131.25 A 18.281986 19.638775 0 0 1 132.58398 111.61133 L 132.58398 68.994141 A 3.0469979 3.2731292 0 0 0 129.29297 65.722656 L 124.7832 65.722656 A 6.0939954 6.5462585 0 0 1 120.88281 54.201172 L 169.39258 10.798828 A 18.281986 19.638775 0 0 1 181.19336 6.25 z "/>
  </svg>
</a>
<style>.github-corner:hover</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">XWOS API
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">XWOS API参考手册</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('objcache_8c_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">objcache.c</div></div>
</div><!--header-->
<div class="contents">
<a href="objcache_8c.html">浏览该文件的文档.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span> </div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &lt;<a class="code" href="xwos_2standard_8h.html">xwos/standard.h</a>&gt;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &lt;<a class="code" href="xwbop_8h.html">xwos/lib/xwbop.h</a>&gt;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &lt;<a class="code" href="xwaop_8h.html">xwos/lib/xwaop.h</a>&gt;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &lt;<a class="code" href="bclst_8h.html">xwos/lib/bclst.h</a>&gt;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &lt;<a class="code" href="lfq_8h.html">xwos/lib/lfq.h</a>&gt;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;<a class="code" href="lock_2seqlock_8h.html">xwos/osal/lock/seqlock.h</a>&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;<a class="code" href="xwos_2mm_2common_8h.html">xwos/mm/common.h</a>&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &lt;<a class="code" href="page_8h.html">xwos/mm/mempool/page.h</a>&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &lt;<a class="code" href="objcache_8h.html">xwos/mm/mempool/objcache.h</a>&gt;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span> </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="comment">/* #define XWMM_MEMPOOLLOGF */</span> </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#ifdef XWMM_MEMPOOLLOGF</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#  define xwmm_mempoollogf(lv, thd, fmt, ...) \</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">          xwlogf(lv, &quot;Thd:%s&quot;</span>, fmt, thd-&gt;stack.name, ##__VA_ARGS__)</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno"><a class="line" href="objcache_8c.html#a60823aba59fadea7895981b1b3c2f1ee">   28</a></span><span class="preprocessor">#  define xwmm_mempoollogf(lv, thd, fmt, ...)</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="keyword">static</span> <a class="code hl_define" href="group__xwos__lib__compiler.html#gac32a8f440521a89c27b9d7674c431128">__xwos_code</a></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="keywordtype">void</span> <a class="code hl_function" href="objcache_8c.html#a75c1bbc6602c82f1cc906c65303ee59d">xwmm_mempool_objcache_page_init</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__objcache.html">xwmm_mempool_objcache</a> * oc,</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>                                     <span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__page.html">xwmm_mempool_page</a> * pg);</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="keyword">static</span> <a class="code hl_define" href="group__xwos__lib__compiler.html#gac32a8f440521a89c27b9d7674c431128">__xwos_code</a></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> <a class="code hl_function" href="objcache_8c.html#a21221e21cca4abbdfc36138c1cecb3f5">xwmm_mempool_objcache_free_idle_page</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__objcache.html">xwmm_mempool_objcache</a> * oc,</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>                                            <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> nr);</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="keyword">static</span> <a class="code hl_define" href="group__xwos__lib__compiler.html#gac32a8f440521a89c27b9d7674c431128">__xwos_code</a></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="keywordtype">void</span> <a class="code hl_function" href="objcache_8c.html#a6523b89f414d275f4c4548a684b21092">xwmm_mempool_objcache_page_put</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__objcache.html">xwmm_mempool_objcache</a> * oc,</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>                                    <span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__page.html">xwmm_mempool_page</a> * pg);</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span> </div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="keyword">static</span> <a class="code hl_define" href="group__xwos__lib__compiler.html#gac32a8f440521a89c27b9d7674c431128">__xwos_code</a></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> <a class="code hl_function" href="objcache_8c.html#a23e4915feeaf7a05d46ec2affe504642">xwmm_mempool_objcache_page_get</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__objcache.html">xwmm_mempool_objcache</a> * oc,</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>                                      <span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__page.html">xwmm_mempool_page</a> ** pgbuf);</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="keyword">static</span> <a class="code hl_define" href="group__xwos__lib__compiler.html#gac32a8f440521a89c27b9d7674c431128">__xwos_code</a></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> <a class="code hl_function" href="objcache_8c.html#a27d6631115c7033bfb49d22d5d3d992d">xwmm_mempool_objcache_i_a_malloc</a>(<span class="keywordtype">void</span> * <span class="keyword">this</span>, <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> size, <span class="keywordtype">void</span> ** membuf);</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span> </div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="keyword">static</span> <a class="code hl_define" href="group__xwos__lib__compiler.html#gac32a8f440521a89c27b9d7674c431128">__xwos_code</a></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> <a class="code hl_function" href="objcache_8c.html#a7214f0b448c3680b68f84d3bb6d7155a">xwmm_mempool_objcache_i_a_free</a>(<span class="keywordtype">void</span> * <span class="keyword">this</span>, <span class="keywordtype">void</span> * mem);</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><a class="code hl_define" href="group__xwos__lib__compiler.html#gaee1a35ed0d87e827ff253fe4db95e9bc">__xwos_api</a></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno"><a class="line" href="group__xwmm__mempool.html#ga15d8fc6d72d2ef920927bd6702174c3a">   54</a></span><a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> <a class="code hl_function" href="group__xwmm__mempool.html#ga15d8fc6d72d2ef920927bd6702174c3a">xwmm_mempool_objcache_init</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__objcache.html">xwmm_mempool_objcache</a> * oc,</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>                                  <span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__page__allocator.html">xwmm_mempool_page_allocator</a> * pa,</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>                                  <span class="keyword">const</span> <span class="keywordtype">char</span> * name,</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>                                  <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> objsize, <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> alignment, <a class="code hl_typedef" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a> pg_order,</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>                                  <a class="code hl_typedef" href="group__xwos__lib__type.html#gaf7d6db44108764f9cbaea53c923d2736">ctor_f</a> ctor, <a class="code hl_typedef" href="group__xwos__lib__type.html#gafe80dfa42b558589ad7ebce2bea43946">dtor_f</a> dtor)</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>{</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> nr;</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> pgsize;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="comment">/*</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="comment"> * ----------------------------</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="comment"> * | struct xwmm_mempool_page |</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><span class="comment"> * -----------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="comment"> * |  attr.objcache.objhead   |-&gt;| obj | a | obj | a | obj | a | ...</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="comment"> * |--------------------------|-------------------------------------------------</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="comment"> * | ...                      |        |   ^     |   ^     |   ^</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="comment"> * |--------------------------|        |___|     |___|     |___|</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="comment"> * obj: object</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="comment"> * a: alignment area</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="comment"> */</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>        alignment = <a class="code hl_define" href="group__xwos__lib__xwbop.html#ga9f63c663f101e3b76de2eba319247598">XWBOP_ALIGN</a>(alignment, (<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>)<a class="code hl_define" href="group__xwmm__common.html#ga5fda7561f71a27db613b7fe335ea3259">XWMM_ALIGNMENT</a>);</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>        objsize = <a class="code hl_define" href="group__xwos__lib__xwbop.html#ga9f63c663f101e3b76de2eba319247598">XWBOP_ALIGN</a>(objsize, (<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>)alignment);</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != ctor) {</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>                <a class="code hl_typedef" href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a> obj[objsize];</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>                ctor((<span class="keywordtype">void</span> *)obj);</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>                oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a2a35a6f0e7edd3a011291ae539af6206">backup</a> = *((<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a> *)obj);</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>                oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a2a35a6f0e7edd3a011291ae539af6206">backup</a> = 0;</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>        }</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span> </div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>        pgsize = pa-&gt;<a class="code hl_variable" href="structxwmm__mempool__page__allocator.html#a2216cfe5628f8cb83492d737e0495898">pgsize</a> &lt;&lt; pg_order;</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>        nr = pgsize / objsize;</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span> </div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>        oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#ae1ad35716f2e10b301250dcc03373f45">name</a> = name;</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>        oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a053bc33ff6399770874b14c65bdb5390">pa</a> = pa;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>        oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a05389bc2c128416b3fa0b43671168b40">objsize</a> = objsize;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>        oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a9f390ff2475ae7356d31d863a8de1352">alignment</a> = alignment;</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>        oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#ae62b80a7807877435a82a08b2e62cfbd">pg_order</a> = pg_order;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>        oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">pg_objnr</a> = nr;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#adba198ae35ae05763c41a9370a6dcf58">ctor</a> = ctor;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>        oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a15ae123a3f28aeb8f2786e235f17beff">dtor</a> = dtor;</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>        oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#afc8c3ae5d542f2a700f5b2ac17aed6d2">capacity</a> = 0;</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>        oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#aca5c7fbe77e4fc6836679fc6f4189c3d">idleness</a> = 0;</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>        oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#ac54752393665135700c995010d23a6be">reserved</a> = 0;</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>        <a class="code hl_function" href="group__xwos__lib__bclst.html#ga08f9a7aec46aaeee30262e4bbdc65c0a">xwlib_bclst_init_head</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a05d16698a1572d3ad039e4f3d8e4a5ee">full</a>);</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>        <a class="code hl_function" href="group__xwos__lib__bclst.html#ga08f9a7aec46aaeee30262e4bbdc65c0a">xwlib_bclst_init_head</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#aa90dcd466fd2d2df7008925e664d277d">available</a>);</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>        <a class="code hl_function" href="group__xwos__lib__bclst.html#ga08f9a7aec46aaeee30262e4bbdc65c0a">xwlib_bclst_init_head</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a26d781cc1112808f876f0d2551da2d30">idle</a>);</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>        <a class="code hl_function" href="group__xwos__lock__seqlock.html#ga230119b86fd51047f83cbe1e74982892">xwos_sqlk_init</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a6d27d017089b61643a2248a048b26ef8">lock</a>);</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>        oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#ab876b978a4238f33b78443659e0fc38c">i_a</a>.<a class="code hl_variable" href="structxwmm__mempool__i__allocator.html#a8338a06dc3dafd768e21d832868be524">malloc</a> = <a class="code hl_function" href="objcache_8c.html#a27d6631115c7033bfb49d22d5d3d992d">xwmm_mempool_objcache_i_a_malloc</a>;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>        oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#ab876b978a4238f33b78443659e0fc38c">i_a</a>.<a class="code hl_variable" href="structxwmm__mempool__i__allocator.html#a4f2e653d62ac1e58420fb623ee28ab23">free</a> = <a class="code hl_function" href="objcache_8c.html#a7214f0b448c3680b68f84d3bb6d7155a">xwmm_mempool_objcache_i_a_free</a>;</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>}</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span><span class="keyword">static</span> <a class="code hl_define" href="group__xwos__lib__compiler.html#gac32a8f440521a89c27b9d7674c431128">__xwos_code</a></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno"><a class="line" href="objcache_8c.html#a75c1bbc6602c82f1cc906c65303ee59d">  115</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="objcache_8c.html#a75c1bbc6602c82f1cc906c65303ee59d">xwmm_mempool_objcache_page_init</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__objcache.html">xwmm_mempool_objcache</a> * oc,</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>                                     <span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__page.html">xwmm_mempool_page</a> * pg)</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>{</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> i;</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> loop;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a> curr;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a> next;</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span> </div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>        <a class="code hl_function" href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569">xwlib_bclst_init_node</a>(&amp;pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#a12866c4340feabc2fade6a9d5a7dbb16">node</a>);</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>        pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#aa87dbecfaa4f9c859311f560c5bfdf28">refcnt</a> = 0;</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>        pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a92a86e9c7241aa8d80d586a6168062c4">data</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#a4e0eea86b489b7969ef1d4a309f17056">value</a> = oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a05389bc2c128416b3fa0b43671168b40">objsize</a>;</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span> </div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>        <span class="comment">/* 构造所有对象 */</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#adba198ae35ae05763c41a9370a6dcf58">ctor</a>) {</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>                curr = pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a86aa875179e54032edc2152789309c19">mapping</a>;</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>                next = curr;</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>                loop = oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">pg_objnr</a>;</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>                <span class="keywordflow">for</span> (i = 0; i &lt; loop; i++) {</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>                        next += oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a05389bc2c128416b3fa0b43671168b40">objsize</a>;</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>                        oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#adba198ae35ae05763c41a9370a6dcf58">ctor</a>((<span class="keywordtype">void</span> *)curr);</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>                        curr = next;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>                }</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>        }</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>        <span class="comment">/* 初始化无锁队列 */</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        <a class="code hl_function" href="group__xwos__lib__lfq.html#gac87b1137608605a80577abed410ddc1a">xwlib_lfq_init</a>(&amp;pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#ac3d78b8833f1da346fff3ead6ccc88ac">objhead</a>);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>        curr = pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a86aa875179e54032edc2152789309c19">mapping</a>;</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>        next = curr;</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>        loop = oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">pg_objnr</a>;</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>        <span class="keywordflow">for</span> (i = 0; i &lt; loop; i++) {</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>                next += oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a05389bc2c128416b3fa0b43671168b40">objsize</a>;</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>                <a class="code hl_function" href="group__xwos__lib__lfq.html#gac87b1137608605a80577abed410ddc1a">xwlib_lfq_init</a>((<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2225ca1f29b430d7c231a07487f1cc06">atomic_xwlfq_t</a> *)curr);</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>                <a class="code hl_function" href="group__xwos__lib__lfq.html#ga1cac1b49ec185ccb135f19401e286166">xwlib_lfq_push</a>(&amp;pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#ac3d78b8833f1da346fff3ead6ccc88ac">objhead</a>,</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>                               (<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2225ca1f29b430d7c231a07487f1cc06">atomic_xwlfq_t</a> *)curr);</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>                curr = next;</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>        }</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>}</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span><span class="keyword">static</span> <a class="code hl_define" href="group__xwos__lib__compiler.html#gac32a8f440521a89c27b9d7674c431128">__xwos_code</a></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno"><a class="line" href="objcache_8c.html#a21221e21cca4abbdfc36138c1cecb3f5">  160</a></span><a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> <a class="code hl_function" href="objcache_8c.html#a21221e21cca4abbdfc36138c1cecb3f5">xwmm_mempool_objcache_free_idle_page</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__objcache.html">xwmm_mempool_objcache</a> * oc,</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>                                            <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> nr)</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>{</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmm__mempool__page.html">xwmm_mempool_page</a> * pg;</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gad21f70aa6f1364b63b1165784448bc16">xwreg_t</a> flag;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> real;</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span> </div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>        real = 0;</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>        <span class="keywordflow">while</span> (real &lt; nr) {</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>                <a class="code hl_function" href="group__xwos__lock__seqlock.html#gabc138d69277ba1017ade0f27c6c282cb">xwos_sqlk_wr_lock_cpuirqsv</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a6d27d017089b61643a2248a048b26ef8">lock</a>, &amp;flag);</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="group__xwos__lib__bclst.html#ga54d0d6c4a04b8f3c80891f7d0f5a1e62">xwlib_bclst_tst_empty</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a26d781cc1112808f876f0d2551da2d30">idle</a>)) {</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>                        <a class="code hl_function" href="group__xwos__lock__seqlock.html#gadcb38d5d6dad7969e1231c47c131f3c8">xwos_sqlk_wr_unlock_cpuirqrs</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a6d27d017089b61643a2248a048b26ef8">lock</a>, flag);</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>                }</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>                pg = <a class="code hl_define" href="group__xwos__lib__bclst.html#gac19bef358525ab7d2c8c57685db99387">xwlib_bclst_last_entry</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a26d781cc1112808f876f0d2551da2d30">idle</a>,</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>                                            <span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__page.html">xwmm_mempool_page</a>,</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>                                            <a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.objcache.node);</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>                <a class="code hl_function" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae">xwlib_bclst_del_init</a>(&amp;pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#a12866c4340feabc2fade6a9d5a7dbb16">node</a>);</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>                <a class="code hl_function" href="group__xwos__lock__seqlock.html#gadcb38d5d6dad7969e1231c47c131f3c8">xwos_sqlk_wr_unlock_cpuirqrs</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a6d27d017089b61643a2248a048b26ef8">lock</a>, flag);</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>                <span class="comment">// cppcheck-suppress [misra-c2012-17.7]</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>                <a class="code hl_function" href="group__xwmm__mempool.html#ga52f11e08dc37a0cc72717169b6ae4131">xwmm_mempool_page_free</a>(oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a053bc33ff6399770874b14c65bdb5390">pa</a>, pg);</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>                <a class="code hl_define" href="group__xwos__lib__xwaop.html#gae0b3f8bf7b0d30d78c73f24dbfde6273">xwaop_sub</a>(<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>, &amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#afc8c3ae5d542f2a700f5b2ac17aed6d2">capacity</a>, oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">pg_objnr</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>                <a class="code hl_define" href="group__xwos__lib__xwaop.html#gae0b3f8bf7b0d30d78c73f24dbfde6273">xwaop_sub</a>(<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>, &amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#aca5c7fbe77e4fc6836679fc6f4189c3d">idleness</a>, oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">pg_objnr</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>                real++;</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        }</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>        <span class="keywordflow">return</span> real;</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>}</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span> </div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span><span class="keyword">static</span> <a class="code hl_define" href="group__xwos__lib__compiler.html#gac32a8f440521a89c27b9d7674c431128">__xwos_code</a></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno"><a class="line" href="objcache_8c.html#a6523b89f414d275f4c4548a684b21092">  197</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="objcache_8c.html#a6523b89f414d275f4c4548a684b21092">xwmm_mempool_objcache_page_put</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__objcache.html">xwmm_mempool_objcache</a> * oc,</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>                                    <span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__page.html">xwmm_mempool_page</a> * pg)</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>{</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gad21f70aa6f1364b63b1165784448bc16">xwreg_t</a> flag;</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span> </div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>        <a class="code hl_function" href="group__xwos__lock__seqlock.html#gabc138d69277ba1017ade0f27c6c282cb">xwos_sqlk_wr_lock_cpuirqsv</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a6d27d017089b61643a2248a048b26ef8">lock</a>, &amp;flag);</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>        <a class="code hl_define" href="group__xwos__standard.html#ga1bab891fe9a97ea85286bc6e44a88c17">XWOS_BUG_ON</a>((<a class="code hl_typedef" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a>)0 == pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#aa87dbecfaa4f9c859311f560c5bfdf28">refcnt</a>);</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>        pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#aa87dbecfaa4f9c859311f560c5bfdf28">refcnt</a>--;</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>        <a class="code hl_function" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae">xwlib_bclst_del_init</a>(&amp;pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#a12866c4340feabc2fade6a9d5a7dbb16">node</a>);</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>        <span class="keywordflow">if</span> ((<a class="code hl_typedef" href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a>)0 == pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#aa87dbecfaa4f9c859311f560c5bfdf28">refcnt</a>) {</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>                <a class="code hl_function" href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706">xwlib_bclst_add_head</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a26d781cc1112808f876f0d2551da2d30">idle</a>,</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>                                     &amp;pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#a12866c4340feabc2fade6a9d5a7dbb16">node</a>);</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>                <a class="code hl_function" href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706">xwlib_bclst_add_head</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#aa90dcd466fd2d2df7008925e664d277d">available</a>,</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>                                     &amp;pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#a12866c4340feabc2fade6a9d5a7dbb16">node</a>);</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>        }</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>        <a class="code hl_function" href="group__xwos__lock__seqlock.html#gadcb38d5d6dad7969e1231c47c131f3c8">xwos_sqlk_wr_unlock_cpuirqrs</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a6d27d017089b61643a2248a048b26ef8">lock</a>, flag);</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>}</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span> </div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span><span class="keyword">static</span> <a class="code hl_define" href="group__xwos__lib__compiler.html#gac32a8f440521a89c27b9d7674c431128">__xwos_code</a></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno"><a class="line" href="objcache_8c.html#a23e4915feeaf7a05d46ec2affe504642">  225</a></span><a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> <a class="code hl_function" href="objcache_8c.html#a23e4915feeaf7a05d46ec2affe504642">xwmm_mempool_objcache_page_get</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__objcache.html">xwmm_mempool_objcache</a> * oc,</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>                                      <span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__page.html">xwmm_mempool_page</a> ** pgbuf)</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>{</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmm__mempool__page.html">xwmm_mempool_page</a> * pg;</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gad21f70aa6f1364b63b1165784448bc16">xwreg_t</a> flag;</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span> </div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>        <a class="code hl_function" href="group__xwos__lock__seqlock.html#gabc138d69277ba1017ade0f27c6c282cb">xwos_sqlk_wr_lock_cpuirqsv</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a6d27d017089b61643a2248a048b26ef8">lock</a>, &amp;flag);</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="group__xwos__lib__bclst.html#ga54d0d6c4a04b8f3c80891f7d0f5a1e62">xwlib_bclst_tst_empty</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#aa90dcd466fd2d2df7008925e664d277d">available</a>)) {</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>                pg = <a class="code hl_define" href="group__xwos__lib__bclst.html#gaf6605d963c470c23c3031a450144d119">xwlib_bclst_first_entry</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#aa90dcd466fd2d2df7008925e664d277d">available</a>,</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>                                             <span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__page.html">xwmm_mempool_page</a>,</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>                                             <a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.objcache.node);</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>                <a class="code hl_function" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae">xwlib_bclst_del_init</a>(&amp;pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#a12866c4340feabc2fade6a9d5a7dbb16">node</a>);</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>                <a class="code hl_function" href="group__xwos__lock__seqlock.html#gadcb38d5d6dad7969e1231c47c131f3c8">xwos_sqlk_wr_unlock_cpuirqrs</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a6d27d017089b61643a2248a048b26ef8">lock</a>, flag);</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_function" href="group__xwos__lib__bclst.html#ga54d0d6c4a04b8f3c80891f7d0f5a1e62">xwlib_bclst_tst_empty</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a26d781cc1112808f876f0d2551da2d30">idle</a>)) {</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>                pg = <a class="code hl_define" href="group__xwos__lib__bclst.html#gaf6605d963c470c23c3031a450144d119">xwlib_bclst_first_entry</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a26d781cc1112808f876f0d2551da2d30">idle</a>,</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>                                             <span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__page.html">xwmm_mempool_page</a>,</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>                                             <a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.objcache.node);</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>                <a class="code hl_function" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae">xwlib_bclst_del_init</a>(&amp;pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#a12866c4340feabc2fade6a9d5a7dbb16">node</a>);</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>                <a class="code hl_function" href="group__xwos__lock__seqlock.html#gadcb38d5d6dad7969e1231c47c131f3c8">xwos_sqlk_wr_unlock_cpuirqrs</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a6d27d017089b61643a2248a048b26ef8">lock</a>, flag);</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>                <a class="code hl_function" href="group__xwos__lock__seqlock.html#gadcb38d5d6dad7969e1231c47c131f3c8">xwos_sqlk_wr_unlock_cpuirqrs</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a6d27d017089b61643a2248a048b26ef8">lock</a>, flag);</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>                rc = <a class="code hl_function" href="group__xwmm__mempool.html#ga7cbe7d0a7d7052c887dc7723c5010ec1">xwmm_mempool_page_allocate</a>(oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a053bc33ff6399770874b14c65bdb5390">pa</a>, oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#ae62b80a7807877435a82a08b2e62cfbd">pg_order</a>, &amp;pg);</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>                <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>                        <span class="keywordflow">goto</span> err_pg_alloc;</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>                }</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>                <a class="code hl_define" href="group__xwos__lib__xwaop.html#gadd1ff1c64048de270aac44c35a8519e7">xwaop_add</a>(<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>, &amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#afc8c3ae5d542f2a700f5b2ac17aed6d2">capacity</a>, oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">pg_objnr</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>                <a class="code hl_define" href="group__xwos__lib__xwaop.html#gadd1ff1c64048de270aac44c35a8519e7">xwaop_add</a>(<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>, &amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#aca5c7fbe77e4fc6836679fc6f4189c3d">idleness</a>, oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">pg_objnr</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>                <a class="code hl_function" href="objcache_8c.html#a75c1bbc6602c82f1cc906c65303ee59d">xwmm_mempool_objcache_page_init</a>(oc, pg);</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>        }</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>        *pgbuf = pg;</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span> </div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>err_pg_alloc:</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>}</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span> </div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span><a class="code hl_define" href="group__xwos__lib__compiler.html#gaee1a35ed0d87e827ff253fe4db95e9bc">__xwos_api</a></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno"><a class="line" href="group__xwmm__mempool.html#ga86e445faf7ecf95130e042fa9b96a41b">  263</a></span><a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> <a class="code hl_function" href="group__xwmm__mempool.html#ga86e445faf7ecf95130e042fa9b96a41b">xwmm_mempool_objcache_alloc</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__objcache.html">xwmm_mempool_objcache</a> * oc, <span class="keywordtype">void</span> ** objbuf)</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>{</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmm__mempool__page.html">xwmm_mempool_page</a> * pg;</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga862eb6a46e40b94681ec41a99f4fcb7e">xwlfq_t</a> * obj;</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gad21f70aa6f1364b63b1165784448bc16">xwreg_t</a> flag;</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span> </div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        rc = <a class="code hl_function" href="objcache_8c.html#a23e4915feeaf7a05d46ec2affe504642">xwmm_mempool_objcache_page_get</a>(oc, &amp;pg);</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>                <span class="keywordflow">goto</span> err_page_get;</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>        }</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span> </div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>        <a class="code hl_define" href="group__xwos__lib__xwaop.html#gae0b3f8bf7b0d30d78c73f24dbfde6273">xwaop_sub</a>(<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>, &amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#aca5c7fbe77e4fc6836679fc6f4189c3d">idleness</a>, 1, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>        obj = <a class="code hl_function" href="group__xwos__lib__lfq.html#gacbe43c237a9c7c6f21baa98daaf49e68">xwlib_lfq_pop</a>(&amp;pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#ac3d78b8833f1da346fff3ead6ccc88ac">objhead</a>);</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>        <a class="code hl_define" href="group__xwos__standard.html#ga1bab891fe9a97ea85286bc6e44a88c17">XWOS_BUG_ON</a>(<a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == obj);</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>        *obj = oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a2a35a6f0e7edd3a011291ae539af6206">backup</a>;</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>        *objbuf = (<span class="keywordtype">void</span> *)obj;</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span> </div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>        <a class="code hl_function" href="group__xwos__lock__seqlock.html#gabc138d69277ba1017ade0f27c6c282cb">xwos_sqlk_wr_lock_cpuirqsv</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a6d27d017089b61643a2248a048b26ef8">lock</a>, &amp;flag);</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>        <a class="code hl_define" href="group__xwos__standard.html#ga1bab891fe9a97ea85286bc6e44a88c17">XWOS_BUG_ON</a>(pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#aa87dbecfaa4f9c859311f560c5bfdf28">refcnt</a> &gt;= oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">pg_objnr</a>);</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>        pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#aa87dbecfaa4f9c859311f560c5bfdf28">refcnt</a>++;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>        <a class="code hl_function" href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae">xwlib_bclst_del_init</a>(&amp;pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#a12866c4340feabc2fade6a9d5a7dbb16">node</a>);</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>        <span class="keywordflow">if</span> (pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#aa87dbecfaa4f9c859311f560c5bfdf28">refcnt</a> == oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">pg_objnr</a>) {</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>                <a class="code hl_function" href="group__xwos__lib__bclst.html#ga2aa317fe5cea0989c273b3c69f69d795">xwlib_bclst_add_tail</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a05d16698a1572d3ad039e4f3d8e4a5ee">full</a>, &amp;pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#a12866c4340feabc2fade6a9d5a7dbb16">node</a>);</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>                <a class="code hl_function" href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706">xwlib_bclst_add_head</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#aa90dcd466fd2d2df7008925e664d277d">available</a>, &amp;pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#a12866c4340feabc2fade6a9d5a7dbb16">node</a>);</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>        }</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>        <a class="code hl_function" href="group__xwos__lock__seqlock.html#gadcb38d5d6dad7969e1231c47c131f3c8">xwos_sqlk_wr_unlock_cpuirqrs</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a6d27d017089b61643a2248a048b26ef8">lock</a>, flag);</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span> </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span> </div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>err_page_get:</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>}</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span> </div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span><a class="code hl_define" href="group__xwos__lib__compiler.html#gaee1a35ed0d87e827ff253fe4db95e9bc">__xwos_api</a></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno"><a class="line" href="group__xwmm__mempool.html#gae7d39e7ba00cc3926284e6ba8775121b">  299</a></span><a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> <a class="code hl_function" href="group__xwmm__mempool.html#gae7d39e7ba00cc3926284e6ba8775121b">xwmm_mempool_objcache_free</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__objcache.html">xwmm_mempool_objcache</a> * oc, <span class="keywordtype">void</span> * obj)</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>{</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2225ca1f29b430d7c231a07487f1cc06">atomic_xwlfq_t</a> * lfq;</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmm__mempool__page.html">xwmm_mempool_page</a> * pg;</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> reserved;</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> idleness;</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a> offset;</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a> origin;</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span> </div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>        rc = <a class="code hl_function" href="group__xwmm__mempool.html#gac5da9c9562774fdac8cda7f769d60967">xwmm_mempool_page_find</a>(oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a053bc33ff6399770874b14c65bdb5390">pa</a>, obj, &amp;pg);</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>                <span class="keywordflow">goto</span> err_pg_find;</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>        }</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span> </div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>        offset = ((<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)obj - pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a86aa875179e54032edc2152789309c19">mapping</a>) % oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a05389bc2c128416b3fa0b43671168b40">objsize</a>;</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>        origin = (<a class="code hl_typedef" href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a>)obj - offset;</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>        obj = (<span class="keywordtype">void</span> *)origin;</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span> </div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a15ae123a3f28aeb8f2786e235f17beff">dtor</a>) {</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>                oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a15ae123a3f28aeb8f2786e235f17beff">dtor</a>(obj);</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        }</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>        lfq = (<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2225ca1f29b430d7c231a07487f1cc06">atomic_xwlfq_t</a> *)obj;</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        <a class="code hl_function" href="group__xwos__lib__lfq.html#ga1cac1b49ec185ccb135f19401e286166">xwlib_lfq_push</a>(&amp;pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#ac3d78b8833f1da346fff3ead6ccc88ac">objhead</a>, lfq);</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span> </div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>        <a class="code hl_function" href="objcache_8c.html#a6523b89f414d275f4c4548a684b21092">xwmm_mempool_objcache_page_put</a>(oc, pg);</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        <a class="code hl_define" href="group__xwos__lib__xwaop.html#gadd1ff1c64048de270aac44c35a8519e7">xwaop_add</a>(<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>, &amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#aca5c7fbe77e4fc6836679fc6f4189c3d">idleness</a>, 1, &amp;idleness, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>        reserved = <a class="code hl_define" href="group__xwos__lib__xwaop.html#ga9a53ba42b71093821567101c3ebcbe77">xwaop_load</a>(<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>, &amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#ac54752393665135700c995010d23a6be">reserved</a>, <a class="code hl_enumvalue" href="group__xwos__lib__type.html#gga33d957600264a16ede92db2e6e42f830acdb5a6e088c69ee770c24d3612d12adc">xwaop_mo_relaxed</a>);</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span> </div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        <span class="keywordflow">if</span> ((reserved + oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">pg_objnr</a>) &lt;= idleness) {</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>                <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> nr;</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span> </div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>                nr = (idleness - reserved) / oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">pg_objnr</a>;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>                <span class="comment">// cppcheck-suppress [misra-c2012-17.7]</span></div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>                <a class="code hl_function" href="objcache_8c.html#a21221e21cca4abbdfc36138c1cecb3f5">xwmm_mempool_objcache_free_idle_page</a>(oc, nr);</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>        }</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span> </div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span> </div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>err_pg_find:</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>}</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span> </div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span><a class="code hl_define" href="group__xwos__lib__compiler.html#gaee1a35ed0d87e827ff253fe4db95e9bc">__xwos_api</a></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno"><a class="line" href="group__xwmm__mempool.html#gaa72ed546dbddbbb8dd035c01c6334a24">  344</a></span><a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> <a class="code hl_function" href="group__xwmm__mempool.html#gaa72ed546dbddbbb8dd035c01c6334a24">xwmm_mempool_objcache_reserve</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__objcache.html">xwmm_mempool_objcache</a> * oc,</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>                                     <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> reserved)</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>{</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmm__mempool__page.html">xwmm_mempool_page</a> * pg;</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> capacity;</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> idleness;</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#gad21f70aa6f1364b63b1165784448bc16">xwreg_t</a> flag;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span> </div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>        reserved = <a class="code hl_define" href="group__xwos__lib__xwbop.html#ga1cc40fbe6c12b077b678ba7d7a13fe72">XWBOP_DIV_ROUND_UP</a>(reserved, oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">pg_objnr</a>);</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>        <a class="code hl_define" href="group__xwos__lib__xwaop.html#gab07c56319425fcf967780c8bd151bb91">xwaop_write</a>(<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>, &amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#ac54752393665135700c995010d23a6be">reserved</a>, reserved, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>        capacity = <a class="code hl_define" href="group__xwos__lib__xwaop.html#ga9a53ba42b71093821567101c3ebcbe77">xwaop_load</a>(<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>, &amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#afc8c3ae5d542f2a700f5b2ac17aed6d2">capacity</a>, <a class="code hl_enumvalue" href="group__xwos__lib__type.html#gga33d957600264a16ede92db2e6e42f830acdb5a6e088c69ee770c24d3612d12adc">xwaop_mo_relaxed</a>);</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>        idleness = <a class="code hl_define" href="group__xwos__lib__xwaop.html#ga9a53ba42b71093821567101c3ebcbe77">xwaop_load</a>(<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>, &amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#aca5c7fbe77e4fc6836679fc6f4189c3d">idleness</a>, <a class="code hl_enumvalue" href="group__xwos__lib__type.html#gga33d957600264a16ede92db2e6e42f830acdb5a6e088c69ee770c24d3612d12adc">xwaop_mo_relaxed</a>);</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>        <span class="keywordflow">if</span> (capacity &lt; reserved) {</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>                rc = <a class="code hl_function" href="group__xwmm__mempool.html#ga7cbe7d0a7d7052c887dc7723c5010ec1">xwmm_mempool_page_allocate</a>(oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a053bc33ff6399770874b14c65bdb5390">pa</a>, oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#ae62b80a7807877435a82a08b2e62cfbd">pg_order</a>, &amp;pg);</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>                <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>                        <span class="keywordflow">goto</span> err_pg_alloc;</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>                }</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>                <a class="code hl_define" href="group__xwos__lib__xwaop.html#gadd1ff1c64048de270aac44c35a8519e7">xwaop_add</a>(<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>, &amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#afc8c3ae5d542f2a700f5b2ac17aed6d2">capacity</a>, oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">pg_objnr</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>                <a class="code hl_define" href="group__xwos__lib__xwaop.html#gadd1ff1c64048de270aac44c35a8519e7">xwaop_add</a>(<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>, &amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#aca5c7fbe77e4fc6836679fc6f4189c3d">idleness</a>, oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">pg_objnr</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>                <a class="code hl_function" href="objcache_8c.html#a75c1bbc6602c82f1cc906c65303ee59d">xwmm_mempool_objcache_page_init</a>(oc, pg);</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>                <a class="code hl_function" href="group__xwos__lock__seqlock.html#gabc138d69277ba1017ade0f27c6c282cb">xwos_sqlk_wr_lock_cpuirqsv</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a6d27d017089b61643a2248a048b26ef8">lock</a>, &amp;flag);</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>                <a class="code hl_function" href="group__xwos__lib__bclst.html#ga2aa317fe5cea0989c273b3c69f69d795">xwlib_bclst_add_tail</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a26d781cc1112808f876f0d2551da2d30">idle</a>, &amp;pg-&gt;<a class="code hl_variable" href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">attr</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">objcache</a>.<a class="code hl_variable" href="structxwmm__mempool__page.html#a12866c4340feabc2fade6a9d5a7dbb16">node</a>);</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>                <a class="code hl_function" href="group__xwos__lock__seqlock.html#gadcb38d5d6dad7969e1231c47c131f3c8">xwos_sqlk_wr_unlock_cpuirqrs</a>(&amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">page_list</a>.<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a6d27d017089b61643a2248a048b26ef8">lock</a>, flag);</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((reserved + oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">pg_objnr</a>) &lt; idleness) {</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>                <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> nr;</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span> </div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>                nr = (idleness - reserved) / oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">pg_objnr</a>;</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>                <span class="comment">// cppcheck-suppress [misra-c2012-17.7]</span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>                <a class="code hl_function" href="objcache_8c.html#a21221e21cca4abbdfc36138c1cecb3f5">xwmm_mempool_objcache_free_idle_page</a>(oc, nr);</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        }</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span> </div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>err_pg_alloc:</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>}</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span> </div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span><a class="code hl_define" href="group__xwos__lib__compiler.html#gaee1a35ed0d87e827ff253fe4db95e9bc">__xwos_api</a></div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno"><a class="line" href="group__xwmm__mempool.html#gab664530444050735173f9bc44c32ab14">  383</a></span><a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> <a class="code hl_function" href="group__xwmm__mempool.html#gab664530444050735173f9bc44c32ab14">xwmm_mempool_objcache_get_capacity</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structxwmm__mempool__objcache.html">xwmm_mempool_objcache</a> * oc,</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>                                          <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> * capacity)</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>{</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>        *capacity = <a class="code hl_define" href="group__xwos__lib__xwaop.html#ga9a53ba42b71093821567101c3ebcbe77">xwaop_load</a>(<a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a>, &amp;oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#afc8c3ae5d542f2a700f5b2ac17aed6d2">capacity</a>, <a class="code hl_enumvalue" href="group__xwos__lib__type.html#gga33d957600264a16ede92db2e6e42f830acdb5a6e088c69ee770c24d3612d12adc">xwaop_mo_relaxed</a>);</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>}</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span> </div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span><span class="keyword">static</span> <a class="code hl_define" href="group__xwos__lib__compiler.html#gac32a8f440521a89c27b9d7674c431128">__xwos_code</a></div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno"><a class="line" href="objcache_8c.html#a27d6631115c7033bfb49d22d5d3d992d">  400</a></span><a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> <a class="code hl_function" href="objcache_8c.html#a27d6631115c7033bfb49d22d5d3d992d">xwmm_mempool_objcache_i_a_malloc</a>(<span class="keywordtype">void</span> * <span class="keyword">this</span>, <a class="code hl_typedef" href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a> size, <span class="keywordtype">void</span> ** membuf)</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>{</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmm__mempool__objcache.html">xwmm_mempool_objcache</a> * oc;</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span> </div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>        oc = <span class="keyword">this</span>;</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>        <span class="keywordflow">if</span> (size &gt; oc-&gt;<a class="code hl_variable" href="structxwmm__mempool__objcache.html#a05389bc2c128416b3fa0b43671168b40">objsize</a>) {</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>                rc = -<a class="code hl_define" href="group__xwos__lib__errno.html#gacb09eefda9ef228712245d1104fe9c89">ESIZE</a>;</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>                <span class="keywordflow">goto</span> err_size;</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>        }</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>        rc = <a class="code hl_function" href="group__xwmm__mempool.html#ga86e445faf7ecf95130e042fa9b96a41b">xwmm_mempool_objcache_alloc</a>(oc, membuf);</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>                <span class="keywordflow">goto</span> err_alloc;</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>        }</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a>;</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span> </div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>err_alloc:</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>err_size:</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>}</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span> </div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span><span class="keyword">static</span> <a class="code hl_define" href="group__xwos__lib__compiler.html#gac32a8f440521a89c27b9d7674c431128">__xwos_code</a></div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno"><a class="line" href="objcache_8c.html#a7214f0b448c3680b68f84d3bb6d7155a">  430</a></span><a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> <a class="code hl_function" href="objcache_8c.html#a7214f0b448c3680b68f84d3bb6d7155a">xwmm_mempool_objcache_i_a_free</a>(<span class="keywordtype">void</span> * <span class="keyword">this</span>, <span class="keywordtype">void</span> * mem)</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>{</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structxwmm__mempool__objcache.html">xwmm_mempool_objcache</a> * oc;</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>        <a class="code hl_typedef" href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a> rc;</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span> </div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        oc = <span class="keyword">this</span>;</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>        rc = <a class="code hl_function" href="group__xwmm__mempool.html#gae7d39e7ba00cc3926284e6ba8775121b">xwmm_mempool_objcache_free</a>(oc, mem);</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>        <span class="keywordflow">return</span> rc;</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>}</div>
<div class="ttc" id="abclst_8h_html"><div class="ttname"><a href="bclst_8h.html">bclst.h</a></div><div class="ttdoc">XWOS通用库：双循环链表</div></div>
<div class="ttc" id="agroup__xwmm__common_html_ga5fda7561f71a27db613b7fe335ea3259"><div class="ttname"><a href="group__xwmm__common.html#ga5fda7561f71a27db613b7fe335ea3259">XWMM_ALIGNMENT</a></div><div class="ttdeci">#define XWMM_ALIGNMENT</div><div class="ttdef"><b>Definition</b> <a href="xwos_2mm_2common_8h_source.html#l00029">common.h:29</a></div></div>
<div class="ttc" id="agroup__xwmm__mempool_html_ga15d8fc6d72d2ef920927bd6702174c3a"><div class="ttname"><a href="group__xwmm__mempool.html#ga15d8fc6d72d2ef920927bd6702174c3a">xwmm_mempool_objcache_init</a></div><div class="ttdeci">xwer_t xwmm_mempool_objcache_init(struct xwmm_mempool_objcache *oc, struct xwmm_mempool_page_allocator *pa, const char *name, xwsz_t objsize, xwsz_t alignment, xwsq_t pg_order, ctor_f ctor, dtor_f dtor)</div><div class="ttdoc">XWMM API：初始化对象缓存</div><div class="ttdef"><b>Definition</b> <a href="objcache_8c_source.html#l00054">objcache.c:54</a></div></div>
<div class="ttc" id="agroup__xwmm__mempool_html_ga52f11e08dc37a0cc72717169b6ae4131"><div class="ttname"><a href="group__xwmm__mempool.html#ga52f11e08dc37a0cc72717169b6ae4131">xwmm_mempool_page_free</a></div><div class="ttdeci">xwer_t xwmm_mempool_page_free(struct xwmm_mempool_page_allocator *pa, struct xwmm_mempool_page *pg)</div><div class="ttdoc">XWMM API：释放一页内存</div><div class="ttdef"><b>Definition</b> <a href="page_8c_source.html#l00194">page.c:194</a></div></div>
<div class="ttc" id="agroup__xwmm__mempool_html_ga7cbe7d0a7d7052c887dc7723c5010ec1"><div class="ttname"><a href="group__xwmm__mempool.html#ga7cbe7d0a7d7052c887dc7723c5010ec1">xwmm_mempool_page_allocate</a></div><div class="ttdeci">xwer_t xwmm_mempool_page_allocate(struct xwmm_mempool_page_allocator *pa, xwsq_t order, struct xwmm_mempool_page **pgbuf)</div><div class="ttdoc">XWMM API：申请一页内存</div><div class="ttdef"><b>Definition</b> <a href="page_8c_source.html#l00159">page.c:159</a></div></div>
<div class="ttc" id="agroup__xwmm__mempool_html_ga86e445faf7ecf95130e042fa9b96a41b"><div class="ttname"><a href="group__xwmm__mempool.html#ga86e445faf7ecf95130e042fa9b96a41b">xwmm_mempool_objcache_alloc</a></div><div class="ttdeci">xwer_t xwmm_mempool_objcache_alloc(struct xwmm_mempool_objcache *oc, void **objbuf)</div><div class="ttdoc">XWMM API：从对象缓存中申请一个对象</div><div class="ttdef"><b>Definition</b> <a href="objcache_8c_source.html#l00263">objcache.c:263</a></div></div>
<div class="ttc" id="agroup__xwmm__mempool_html_gaa72ed546dbddbbb8dd035c01c6334a24"><div class="ttname"><a href="group__xwmm__mempool.html#gaa72ed546dbddbbb8dd035c01c6334a24">xwmm_mempool_objcache_reserve</a></div><div class="ttdeci">xwer_t xwmm_mempool_objcache_reserve(struct xwmm_mempool_objcache *oc, xwsz_t reserved)</div><div class="ttdoc">XWMM API：预留对象到对象缓存中</div><div class="ttdef"><b>Definition</b> <a href="objcache_8c_source.html#l00344">objcache.c:344</a></div></div>
<div class="ttc" id="agroup__xwmm__mempool_html_gab664530444050735173f9bc44c32ab14"><div class="ttname"><a href="group__xwmm__mempool.html#gab664530444050735173f9bc44c32ab14">xwmm_mempool_objcache_get_capacity</a></div><div class="ttdeci">xwer_t xwmm_mempool_objcache_get_capacity(struct xwmm_mempool_objcache *oc, xwsz_t *capacity)</div><div class="ttdoc">XWMM API：获取对象缓存的容量</div><div class="ttdef"><b>Definition</b> <a href="objcache_8c_source.html#l00383">objcache.c:383</a></div></div>
<div class="ttc" id="agroup__xwmm__mempool_html_gac5da9c9562774fdac8cda7f769d60967"><div class="ttname"><a href="group__xwmm__mempool.html#gac5da9c9562774fdac8cda7f769d60967">xwmm_mempool_page_find</a></div><div class="ttdeci">xwer_t xwmm_mempool_page_find(struct xwmm_mempool_page_allocator *pa, void *mem, struct xwmm_mempool_page **pgbuf)</div><div class="ttdoc">依据内存地址查找页</div><div class="ttdef"><b>Definition</b> <a href="page_8c_source.html#l00519">page.c:519</a></div></div>
<div class="ttc" id="agroup__xwmm__mempool_html_gae7d39e7ba00cc3926284e6ba8775121b"><div class="ttname"><a href="group__xwmm__mempool.html#gae7d39e7ba00cc3926284e6ba8775121b">xwmm_mempool_objcache_free</a></div><div class="ttdeci">xwer_t xwmm_mempool_objcache_free(struct xwmm_mempool_objcache *oc, void *obj)</div><div class="ttdoc">XWMM API：释放对象到对象缓存中</div><div class="ttdef"><b>Definition</b> <a href="objcache_8c_source.html#l00299">objcache.c:299</a></div></div>
<div class="ttc" id="agroup__xwos__lib__bclst_html_ga08f9a7aec46aaeee30262e4bbdc65c0a"><div class="ttname"><a href="group__xwos__lib__bclst.html#ga08f9a7aec46aaeee30262e4bbdc65c0a">xwlib_bclst_init_head</a></div><div class="ttdeci">static void xwlib_bclst_init_head(struct xwlib_bclst_node *h)</div><div class="ttdoc">初始化一个链表头。</div><div class="ttdef"><b>Definition</b> <a href="bclst_8h_source.html#l00229">bclst.h:229</a></div></div>
<div class="ttc" id="agroup__xwos__lib__bclst_html_ga2aa317fe5cea0989c273b3c69f69d795"><div class="ttname"><a href="group__xwos__lib__bclst.html#ga2aa317fe5cea0989c273b3c69f69d795">xwlib_bclst_add_tail</a></div><div class="ttdeci">static void xwlib_bclst_add_tail(struct xwlib_bclst_node *head, struct xwlib_bclst_node *newn)</div><div class="ttdoc">将一个节点加入链表尾部（链表头的前面）</div><div class="ttdef"><b>Definition</b> <a href="bclst_8h_source.html#l00357">bclst.h:357</a></div></div>
<div class="ttc" id="agroup__xwos__lib__bclst_html_ga3286c94ae92265dea90fd52bfdb85569"><div class="ttname"><a href="group__xwos__lib__bclst.html#ga3286c94ae92265dea90fd52bfdb85569">xwlib_bclst_init_node</a></div><div class="ttdeci">static void xwlib_bclst_init_node(struct xwlib_bclst_node *n)</div><div class="ttdoc">初始化一个链表节点。</div><div class="ttdef"><b>Definition</b> <a href="bclst_8h_source.html#l00240">bclst.h:240</a></div></div>
<div class="ttc" id="agroup__xwos__lib__bclst_html_ga54d0d6c4a04b8f3c80891f7d0f5a1e62"><div class="ttname"><a href="group__xwos__lib__bclst.html#ga54d0d6c4a04b8f3c80891f7d0f5a1e62">xwlib_bclst_tst_empty</a></div><div class="ttdeci">static bool xwlib_bclst_tst_empty(const struct xwlib_bclst_node *h)</div><div class="ttdoc">测试链表是否为空。</div><div class="ttdef"><b>Definition</b> <a href="bclst_8h_source.html#l00253">bclst.h:253</a></div></div>
<div class="ttc" id="agroup__xwos__lib__bclst_html_ga942be8d64e19cb8efb4dd1cf10e6e706"><div class="ttname"><a href="group__xwos__lib__bclst.html#ga942be8d64e19cb8efb4dd1cf10e6e706">xwlib_bclst_add_head</a></div><div class="ttdeci">static void xwlib_bclst_add_head(struct xwlib_bclst_node *head, struct xwlib_bclst_node *newn)</div><div class="ttdoc">将一个节点加入链表头部（链表头的后面）</div><div class="ttdef"><b>Definition</b> <a href="bclst_8h_source.html#l00345">bclst.h:345</a></div></div>
<div class="ttc" id="agroup__xwos__lib__bclst_html_gab12f3ce1a4e53de3112b10c9ffb06cae"><div class="ttname"><a href="group__xwos__lib__bclst.html#gab12f3ce1a4e53de3112b10c9ffb06cae">xwlib_bclst_del_init</a></div><div class="ttdeci">static void xwlib_bclst_del_init(struct xwlib_bclst_node *node)</div><div class="ttdoc">删除一个节点，并重新初始化它</div><div class="ttdef"><b>Definition</b> <a href="bclst_8h_source.html#l00391">bclst.h:391</a></div></div>
<div class="ttc" id="agroup__xwos__lib__bclst_html_gac19bef358525ab7d2c8c57685db99387"><div class="ttname"><a href="group__xwos__lib__bclst.html#gac19bef358525ab7d2c8c57685db99387">xwlib_bclst_last_entry</a></div><div class="ttdeci">#define xwlib_bclst_last_entry(head, type, member)</div><div class="ttdoc">获得包含链表最后一个节点的外层结构体的指针。</div><div class="ttdef"><b>Definition</b> <a href="bclst_8h_source.html#l00073">bclst.h:73</a></div></div>
<div class="ttc" id="agroup__xwos__lib__bclst_html_gaf6605d963c470c23c3031a450144d119"><div class="ttname"><a href="group__xwos__lib__bclst.html#gaf6605d963c470c23c3031a450144d119">xwlib_bclst_first_entry</a></div><div class="ttdeci">#define xwlib_bclst_first_entry(head, type, member)</div><div class="ttdoc">获得包含链表第一个节点的外层结构体的指针。</div><div class="ttdef"><b>Definition</b> <a href="bclst_8h_source.html#l00063">bclst.h:63</a></div></div>
<div class="ttc" id="agroup__xwos__lib__compiler_html_gac32a8f440521a89c27b9d7674c431128"><div class="ttname"><a href="group__xwos__lib__compiler.html#gac32a8f440521a89c27b9d7674c431128">__xwos_code</a></div><div class="ttdeci">#define __xwos_code</div><div class="ttdef"><b>Definition</b> <a href="compiler_8h_source.html#l00171">compiler.h:171</a></div></div>
<div class="ttc" id="agroup__xwos__lib__compiler_html_gaee1a35ed0d87e827ff253fe4db95e9bc"><div class="ttname"><a href="group__xwos__lib__compiler.html#gaee1a35ed0d87e827ff253fe4db95e9bc">__xwos_api</a></div><div class="ttdeci">#define __xwos_api</div><div class="ttdef"><b>Definition</b> <a href="compiler_8h_source.html#l00175">compiler.h:175</a></div></div>
<div class="ttc" id="agroup__xwos__lib__errno_html_ga6a72d49d869215a02342eb465166537b"><div class="ttname"><a href="group__xwos__lib__errno.html#ga6a72d49d869215a02342eb465166537b">XWOK</a></div><div class="ttdeci">#define XWOK</div><div class="ttdoc">No error</div><div class="ttdef"><b>Definition</b> <a href="errno_8h_source.html#l00182">errno.h:182</a></div></div>
<div class="ttc" id="agroup__xwos__lib__errno_html_gacb09eefda9ef228712245d1104fe9c89"><div class="ttname"><a href="group__xwos__lib__errno.html#gacb09eefda9ef228712245d1104fe9c89">ESIZE</a></div><div class="ttdeci">#define ESIZE</div><div class="ttdoc">Size error</div><div class="ttdef"><b>Definition</b> <a href="errno_8h_source.html#l00202">errno.h:202</a></div></div>
<div class="ttc" id="agroup__xwos__lib__lfq_html_ga1cac1b49ec185ccb135f19401e286166"><div class="ttname"><a href="group__xwos__lib__lfq.html#ga1cac1b49ec185ccb135f19401e286166">xwlib_lfq_push</a></div><div class="ttdeci">static void xwlib_lfq_push(atomic_xwlfq_t *h, atomic_xwlfq_t *n)</div><div class="ttdoc">将一个节点推入无锁队列（栈式队列）</div><div class="ttdef"><b>Definition</b> <a href="lfq_8h_source.html#l00042">lfq.h:42</a></div></div>
<div class="ttc" id="agroup__xwos__lib__lfq_html_gac87b1137608605a80577abed410ddc1a"><div class="ttname"><a href="group__xwos__lib__lfq.html#gac87b1137608605a80577abed410ddc1a">xwlib_lfq_init</a></div><div class="ttdeci">static void xwlib_lfq_init(atomic_xwlfq_t *n)</div><div class="ttdoc">初始化无锁队列节点</div><div class="ttdef"><b>Definition</b> <a href="lfq_8h_source.html#l00031">lfq.h:31</a></div></div>
<div class="ttc" id="agroup__xwos__lib__lfq_html_gacbe43c237a9c7c6f21baa98daaf49e68"><div class="ttname"><a href="group__xwos__lib__lfq.html#gacbe43c237a9c7c6f21baa98daaf49e68">xwlib_lfq_pop</a></div><div class="ttdeci">static xwlfq_t * xwlib_lfq_pop(atomic_xwlfq_t *h)</div><div class="ttdoc">弹出无锁队列中的第一个节点（栈式队列）</div><div class="ttdef"><b>Definition</b> <a href="lfq_8h_source.html#l00053">lfq.h:53</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga06847ea8c7edb2b1f166288b230f251f"><div class="ttname"><a href="group__xwos__lib__type.html#ga06847ea8c7edb2b1f166288b230f251f">xwer_t</a></div><div class="ttdeci">signed long xwer_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00554">type.h:554</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="group__xwos__lib__type.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00028">type.h:28</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga2225ca1f29b430d7c231a07487f1cc06"><div class="ttname"><a href="group__xwos__lib__type.html#ga2225ca1f29b430d7c231a07487f1cc06">atomic_xwlfq_t</a></div><div class="ttdeci">__xwcc_atomic xwlfq_t atomic_xwlfq_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00594">type.h:594</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga2d00153ecb0cdcc8ea0823c13ee59649"><div class="ttname"><a href="group__xwos__lib__type.html#ga2d00153ecb0cdcc8ea0823c13ee59649">xwsz_t</a></div><div class="ttdeci">unsigned long xwsz_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00339">type.h:339</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga4433c8b2d64a72382ab333d11bfd0093"><div class="ttname"><a href="group__xwos__lib__type.html#ga4433c8b2d64a72382ab333d11bfd0093">xwu8_t</a></div><div class="ttdeci">uint8_t xwu8_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00194">type.h:194</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga59fe68c80516b22de8dccb84275d23f2"><div class="ttname"><a href="group__xwos__lib__type.html#ga59fe68c80516b22de8dccb84275d23f2">xwsq_t</a></div><div class="ttdeci">unsigned long xwsq_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00445">type.h:445</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_ga862eb6a46e40b94681ec41a99f4fcb7e"><div class="ttname"><a href="group__xwos__lib__type.html#ga862eb6a46e40b94681ec41a99f4fcb7e">xwlfq_t</a></div><div class="ttdeci">xwptr_t xwlfq_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00591">type.h:591</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_gacef49946313c8d1985a8279bb40e31c4"><div class="ttname"><a href="group__xwos__lib__type.html#gacef49946313c8d1985a8279bb40e31c4">xwptr_t</a></div><div class="ttdeci">unsigned long xwptr_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00375">type.h:375</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_gad21f70aa6f1364b63b1165784448bc16"><div class="ttname"><a href="group__xwos__lib__type.html#gad21f70aa6f1364b63b1165784448bc16">xwreg_t</a></div><div class="ttdeci">xwptr_t xwreg_t</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00409">type.h:409</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_gaf7d6db44108764f9cbaea53c923d2736"><div class="ttname"><a href="group__xwos__lib__type.html#gaf7d6db44108764f9cbaea53c923d2736">ctor_f</a></div><div class="ttdeci">void(* ctor_f)(void *)</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00604">type.h:604</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_gafe80dfa42b558589ad7ebce2bea43946"><div class="ttname"><a href="group__xwos__lib__type.html#gafe80dfa42b558589ad7ebce2bea43946">dtor_f</a></div><div class="ttdeci">void(* dtor_f)(void *)</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00605">type.h:605</a></div></div>
<div class="ttc" id="agroup__xwos__lib__type_html_gga33d957600264a16ede92db2e6e42f830acdb5a6e088c69ee770c24d3612d12adc"><div class="ttname"><a href="group__xwos__lib__type.html#gga33d957600264a16ede92db2e6e42f830acdb5a6e088c69ee770c24d3612d12adc">xwaop_mo_relaxed</a></div><div class="ttdeci">@ xwaop_mo_relaxed</div><div class="ttdef"><b>Definition</b> <a href="type_8h_source.html#l00628">type.h:628</a></div></div>
<div class="ttc" id="agroup__xwos__lib__xwaop_html_ga9a53ba42b71093821567101c3ebcbe77"><div class="ttname"><a href="group__xwos__lib__xwaop.html#ga9a53ba42b71093821567101c3ebcbe77">xwaop_load</a></div><div class="ttdeci">#define xwaop_load(type, a, memorder)</div><div class="ttdoc">对原子变量进行原子操作：加载</div><div class="ttdef"><b>Definition</b> <a href="xwaop_8h_source.html#l00045">xwaop.h:45</a></div></div>
<div class="ttc" id="agroup__xwos__lib__xwaop_html_gab07c56319425fcf967780c8bd151bb91"><div class="ttname"><a href="group__xwos__lib__xwaop.html#gab07c56319425fcf967780c8bd151bb91">xwaop_write</a></div><div class="ttdeci">#define xwaop_write(type, a, v, ov)</div><div class="ttdoc">对原子变量进行原子操作：读取—写</div><div class="ttdef"><b>Definition</b> <a href="xwaop_8h_source.html#l00091">xwaop.h:91</a></div></div>
<div class="ttc" id="agroup__xwos__lib__xwaop_html_gadd1ff1c64048de270aac44c35a8519e7"><div class="ttname"><a href="group__xwos__lib__xwaop.html#gadd1ff1c64048de270aac44c35a8519e7">xwaop_add</a></div><div class="ttdeci">#define xwaop_add(type, a, v, nv, ov)</div><div class="ttdoc">对原子变量进行原子操作：读取－相加－回写</div><div class="ttdef"><b>Definition</b> <a href="xwaop_8h_source.html#l00330">xwaop.h:330</a></div></div>
<div class="ttc" id="agroup__xwos__lib__xwaop_html_gae0b3f8bf7b0d30d78c73f24dbfde6273"><div class="ttname"><a href="group__xwos__lib__xwaop.html#gae0b3f8bf7b0d30d78c73f24dbfde6273">xwaop_sub</a></div><div class="ttdeci">#define xwaop_sub(type, a, v, nv, ov)</div><div class="ttdoc">对原子变量进行原子操作：读取－相减－回写</div><div class="ttdef"><b>Definition</b> <a href="xwaop_8h_source.html#l00598">xwaop.h:598</a></div></div>
<div class="ttc" id="agroup__xwos__lib__xwbop_html_ga1cc40fbe6c12b077b678ba7d7a13fe72"><div class="ttname"><a href="group__xwos__lib__xwbop.html#ga1cc40fbe6c12b077b678ba7d7a13fe72">XWBOP_DIV_ROUND_UP</a></div><div class="ttdeci">#define XWBOP_DIV_ROUND_UP(n, d)</div><div class="ttdef"><b>Definition</b> <a href="xwbop_8h_source.html#l00031">xwbop.h:31</a></div></div>
<div class="ttc" id="agroup__xwos__lib__xwbop_html_ga9f63c663f101e3b76de2eba319247598"><div class="ttname"><a href="group__xwos__lib__xwbop.html#ga9f63c663f101e3b76de2eba319247598">XWBOP_ALIGN</a></div><div class="ttdeci">#define XWBOP_ALIGN(x, n)</div><div class="ttdef"><b>Definition</b> <a href="xwbop_8h_source.html#l00037">xwbop.h:37</a></div></div>
<div class="ttc" id="agroup__xwos__lock__seqlock_html_ga230119b86fd51047f83cbe1e74982892"><div class="ttname"><a href="group__xwos__lock__seqlock.html#ga230119b86fd51047f83cbe1e74982892">xwos_sqlk_init</a></div><div class="ttdeci">static void xwos_sqlk_init(struct xwos_sqlk *sql)</div><div class="ttdoc">XWOS API：初始化顺序锁</div><div class="ttdef"><b>Definition</b> <a href="lock_2seqlock_8h_source.html#l00128">seqlock.h:128</a></div></div>
<div class="ttc" id="agroup__xwos__lock__seqlock_html_gabc138d69277ba1017ade0f27c6c282cb"><div class="ttname"><a href="group__xwos__lock__seqlock.html#gabc138d69277ba1017ade0f27c6c282cb">xwos_sqlk_wr_lock_cpuirqsv</a></div><div class="ttdeci">static void xwos_sqlk_wr_lock_cpuirqsv(struct xwos_sqlk *sql, xwreg_t *cpuirq)</div><div class="ttdoc">XWOS API：开启写临界区，保存本地CPU的中断标志并关闭</div><div class="ttdef"><b>Definition</b> <a href="lock_2seqlock_8h_source.html#l00575">seqlock.h:575</a></div></div>
<div class="ttc" id="agroup__xwos__lock__seqlock_html_gadcb38d5d6dad7969e1231c47c131f3c8"><div class="ttname"><a href="group__xwos__lock__seqlock.html#gadcb38d5d6dad7969e1231c47c131f3c8">xwos_sqlk_wr_unlock_cpuirqrs</a></div><div class="ttdeci">static void xwos_sqlk_wr_unlock_cpuirqrs(struct xwos_sqlk *sql, xwreg_t cpuirq)</div><div class="ttdoc">XWOS API：关闭写临界区，恢复本地CPU的中断标志</div><div class="ttdef"><b>Definition</b> <a href="lock_2seqlock_8h_source.html#l00608">seqlock.h:608</a></div></div>
<div class="ttc" id="agroup__xwos__standard_html_ga1bab891fe9a97ea85286bc6e44a88c17"><div class="ttname"><a href="group__xwos__standard.html#ga1bab891fe9a97ea85286bc6e44a88c17">XWOS_BUG_ON</a></div><div class="ttdeci">#define XWOS_BUG_ON(x)</div><div class="ttdef"><b>Definition</b> <a href="xwos_2standard_8h_source.html#l00057">standard.h:57</a></div></div>
<div class="ttc" id="alfq_8h_html"><div class="ttname"><a href="lfq_8h.html">lfq.h</a></div><div class="ttdoc">XWOS通用库：无锁队列</div></div>
<div class="ttc" id="alock_2seqlock_8h_html"><div class="ttname"><a href="lock_2seqlock_8h.html">seqlock.h</a></div><div class="ttdoc">操作系统抽象层：顺序锁</div></div>
<div class="ttc" id="aobjcache_8c_html_a21221e21cca4abbdfc36138c1cecb3f5"><div class="ttname"><a href="objcache_8c.html#a21221e21cca4abbdfc36138c1cecb3f5">xwmm_mempool_objcache_free_idle_page</a></div><div class="ttdeci">static xwsz_t xwmm_mempool_objcache_free_idle_page(struct xwmm_mempool_objcache *oc, xwsz_t nr)</div><div class="ttdoc">释放空闲页</div><div class="ttdef"><b>Definition</b> <a href="objcache_8c_source.html#l00160">objcache.c:160</a></div></div>
<div class="ttc" id="aobjcache_8c_html_a23e4915feeaf7a05d46ec2affe504642"><div class="ttname"><a href="objcache_8c.html#a23e4915feeaf7a05d46ec2affe504642">xwmm_mempool_objcache_page_get</a></div><div class="ttdeci">static xwer_t xwmm_mempool_objcache_page_get(struct xwmm_mempool_objcache *oc, struct xwmm_mempool_page **pgbuf)</div><div class="ttdoc">获取一页，准备从页内存中分配对象</div><div class="ttdef"><b>Definition</b> <a href="objcache_8c_source.html#l00225">objcache.c:225</a></div></div>
<div class="ttc" id="aobjcache_8c_html_a27d6631115c7033bfb49d22d5d3d992d"><div class="ttname"><a href="objcache_8c.html#a27d6631115c7033bfb49d22d5d3d992d">xwmm_mempool_objcache_i_a_malloc</a></div><div class="ttdeci">static xwer_t xwmm_mempool_objcache_i_a_malloc(void *this, xwsz_t size, void **membuf)</div><div class="ttdoc">i_allocator接口函数：申请内存</div><div class="ttdef"><b>Definition</b> <a href="objcache_8c_source.html#l00400">objcache.c:400</a></div></div>
<div class="ttc" id="aobjcache_8c_html_a6523b89f414d275f4c4548a684b21092"><div class="ttname"><a href="objcache_8c.html#a6523b89f414d275f4c4548a684b21092">xwmm_mempool_objcache_page_put</a></div><div class="ttdeci">static void xwmm_mempool_objcache_page_put(struct xwmm_mempool_objcache *oc, struct xwmm_mempool_page *pg)</div><div class="ttdoc">减少页的引用计数</div><div class="ttdef"><b>Definition</b> <a href="objcache_8c_source.html#l00197">objcache.c:197</a></div></div>
<div class="ttc" id="aobjcache_8c_html_a7214f0b448c3680b68f84d3bb6d7155a"><div class="ttname"><a href="objcache_8c.html#a7214f0b448c3680b68f84d3bb6d7155a">xwmm_mempool_objcache_i_a_free</a></div><div class="ttdeci">static xwer_t xwmm_mempool_objcache_i_a_free(void *this, void *mem)</div><div class="ttdoc">i_allocator接口函数：释放内存</div><div class="ttdef"><b>Definition</b> <a href="objcache_8c_source.html#l00430">objcache.c:430</a></div></div>
<div class="ttc" id="aobjcache_8c_html_a75c1bbc6602c82f1cc906c65303ee59d"><div class="ttname"><a href="objcache_8c.html#a75c1bbc6602c82f1cc906c65303ee59d">xwmm_mempool_objcache_page_init</a></div><div class="ttdeci">static void xwmm_mempool_objcache_page_init(struct xwmm_mempool_objcache *oc, struct xwmm_mempool_page *pg)</div><div class="ttdoc">初始化新页</div><div class="ttdef"><b>Definition</b> <a href="objcache_8c_source.html#l00115">objcache.c:115</a></div></div>
<div class="ttc" id="aobjcache_8h_html"><div class="ttname"><a href="objcache_8h.html">objcache.h</a></div><div class="ttdoc">XWOS内存管理：内存池：对象缓存</div></div>
<div class="ttc" id="apage_8h_html"><div class="ttname"><a href="page_8h.html">page.h</a></div><div class="ttdoc">XWOS内存管理：内存池：页分配器</div></div>
<div class="ttc" id="astructxwmm__mempool__i__allocator_html_a4f2e653d62ac1e58420fb623ee28ab23"><div class="ttname"><a href="structxwmm__mempool__i__allocator.html#a4f2e653d62ac1e58420fb623ee28ab23">xwmm_mempool_i_allocator::free</a></div><div class="ttdeci">xwer_t(* free)(void *, void *)</div><div class="ttdef"><b>Definition</b> <a href="i__allocator_8h_source.html#l00031">i_allocator.h:31</a></div></div>
<div class="ttc" id="astructxwmm__mempool__i__allocator_html_a8338a06dc3dafd768e21d832868be524"><div class="ttname"><a href="structxwmm__mempool__i__allocator.html#a8338a06dc3dafd768e21d832868be524">xwmm_mempool_i_allocator::malloc</a></div><div class="ttdeci">xwer_t(* malloc)(void *, xwsz_t, void **)</div><div class="ttdef"><b>Definition</b> <a href="i__allocator_8h_source.html#l00029">i_allocator.h:29</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html"><div class="ttname"><a href="structxwmm__mempool__objcache.html">xwmm_mempool_objcache</a></div><div class="ttdoc">对象缓存</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00034">objcache.h:34</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_a05389bc2c128416b3fa0b43671168b40"><div class="ttname"><a href="structxwmm__mempool__objcache.html#a05389bc2c128416b3fa0b43671168b40">xwmm_mempool_objcache::objsize</a></div><div class="ttdeci">xwsz_t objsize</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00038">objcache.h:38</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_a053bc33ff6399770874b14c65bdb5390"><div class="ttname"><a href="structxwmm__mempool__objcache.html#a053bc33ff6399770874b14c65bdb5390">xwmm_mempool_objcache::pa</a></div><div class="ttdeci">struct xwmm_mempool_page_allocator * pa</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00036">objcache.h:36</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_a05d16698a1572d3ad039e4f3d8e4a5ee"><div class="ttname"><a href="structxwmm__mempool__objcache.html#a05d16698a1572d3ad039e4f3d8e4a5ee">xwmm_mempool_objcache::full</a></div><div class="ttdeci">struct xwlib_bclst_node full</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00055">objcache.h:55</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_a15ae123a3f28aeb8f2786e235f17beff"><div class="ttname"><a href="structxwmm__mempool__objcache.html#a15ae123a3f28aeb8f2786e235f17beff">xwmm_mempool_objcache::dtor</a></div><div class="ttdeci">dtor_f dtor</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00049">objcache.h:49</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_a26d781cc1112808f876f0d2551da2d30"><div class="ttname"><a href="structxwmm__mempool__objcache.html#a26d781cc1112808f876f0d2551da2d30">xwmm_mempool_objcache::idle</a></div><div class="ttdeci">struct xwlib_bclst_node idle</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00057">objcache.h:57</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_a2a35a6f0e7edd3a011291ae539af6206"><div class="ttname"><a href="structxwmm__mempool__objcache.html#a2a35a6f0e7edd3a011291ae539af6206">xwmm_mempool_objcache::backup</a></div><div class="ttdeci">xwptr_t backup</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00042">objcache.h:42</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_a6d27d017089b61643a2248a048b26ef8"><div class="ttname"><a href="structxwmm__mempool__objcache.html#a6d27d017089b61643a2248a048b26ef8">xwmm_mempool_objcache::lock</a></div><div class="ttdeci">struct xwos_sqlk lock</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00058">objcache.h:58</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_a9f390ff2475ae7356d31d863a8de1352"><div class="ttname"><a href="structxwmm__mempool__objcache.html#a9f390ff2475ae7356d31d863a8de1352">xwmm_mempool_objcache::alignment</a></div><div class="ttdeci">xwsz_t alignment</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00039">objcache.h:39</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_aa90dcd466fd2d2df7008925e664d277d"><div class="ttname"><a href="structxwmm__mempool__objcache.html#aa90dcd466fd2d2df7008925e664d277d">xwmm_mempool_objcache::available</a></div><div class="ttdeci">struct xwlib_bclst_node available</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00056">objcache.h:56</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_ab876b978a4238f33b78443659e0fc38c"><div class="ttname"><a href="structxwmm__mempool__objcache.html#ab876b978a4238f33b78443659e0fc38c">xwmm_mempool_objcache::i_a</a></div><div class="ttdeci">struct xwmm_mempool_i_allocator i_a</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00035">objcache.h:35</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_abd4c454f4dd3f8389fd1ada1a2504d02"><div class="ttname"><a href="structxwmm__mempool__objcache.html#abd4c454f4dd3f8389fd1ada1a2504d02">xwmm_mempool_objcache::pg_objnr</a></div><div class="ttdeci">xwsz_t pg_objnr</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00041">objcache.h:41</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_ac54752393665135700c995010d23a6be"><div class="ttname"><a href="structxwmm__mempool__objcache.html#ac54752393665135700c995010d23a6be">xwmm_mempool_objcache::reserved</a></div><div class="ttdeci">atomic_xwsz_t reserved</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00052">objcache.h:52</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_aca5c7fbe77e4fc6836679fc6f4189c3d"><div class="ttname"><a href="structxwmm__mempool__objcache.html#aca5c7fbe77e4fc6836679fc6f4189c3d">xwmm_mempool_objcache::idleness</a></div><div class="ttdeci">atomic_xwsz_t idleness</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00051">objcache.h:51</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_adba198ae35ae05763c41a9370a6dcf58"><div class="ttname"><a href="structxwmm__mempool__objcache.html#adba198ae35ae05763c41a9370a6dcf58">xwmm_mempool_objcache::ctor</a></div><div class="ttdeci">ctor_f ctor</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00048">objcache.h:48</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_ae1ad35716f2e10b301250dcc03373f45"><div class="ttname"><a href="structxwmm__mempool__objcache.html#ae1ad35716f2e10b301250dcc03373f45">xwmm_mempool_objcache::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00037">objcache.h:37</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_ae62b80a7807877435a82a08b2e62cfbd"><div class="ttname"><a href="structxwmm__mempool__objcache.html#ae62b80a7807877435a82a08b2e62cfbd">xwmm_mempool_objcache::pg_order</a></div><div class="ttdeci">xwsq_t pg_order</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00040">objcache.h:40</a></div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_af5710f3b100420dbdd54cfcb952877fc"><div class="ttname"><a href="structxwmm__mempool__objcache.html#af5710f3b100420dbdd54cfcb952877fc">xwmm_mempool_objcache::page_list</a></div><div class="ttdeci">struct xwmm_mempool_objcache::@0 page_list</div></div>
<div class="ttc" id="astructxwmm__mempool__objcache_html_afc8c3ae5d542f2a700f5b2ac17aed6d2"><div class="ttname"><a href="structxwmm__mempool__objcache.html#afc8c3ae5d542f2a700f5b2ac17aed6d2">xwmm_mempool_objcache::capacity</a></div><div class="ttdeci">atomic_xwsz_t capacity</div><div class="ttdef"><b>Definition</b> <a href="objcache_8h_source.html#l00050">objcache.h:50</a></div></div>
<div class="ttc" id="astructxwmm__mempool__page__allocator_html"><div class="ttname"><a href="structxwmm__mempool__page__allocator.html">xwmm_mempool_page_allocator</a></div><div class="ttdoc">页分配器</div><div class="ttdef"><b>Definition</b> <a href="page_8h_source.html#l00083">page.h:83</a></div></div>
<div class="ttc" id="astructxwmm__mempool__page__allocator_html_a2216cfe5628f8cb83492d737e0495898"><div class="ttname"><a href="structxwmm__mempool__page__allocator.html#a2216cfe5628f8cb83492d737e0495898">xwmm_mempool_page_allocator::pgsize</a></div><div class="ttdeci">xwsz_t pgsize</div><div class="ttdef"><b>Definition</b> <a href="page_8h_source.html#l00087">page.h:87</a></div></div>
<div class="ttc" id="astructxwmm__mempool__page_html"><div class="ttname"><a href="structxwmm__mempool__page.html">xwmm_mempool_page</a></div><div class="ttdoc">内存页</div><div class="ttdef"><b>Definition</b> <a href="page_8h_source.html#l00037">page.h:37</a></div></div>
<div class="ttc" id="astructxwmm__mempool__page_html_a12866c4340feabc2fade6a9d5a7dbb16"><div class="ttname"><a href="structxwmm__mempool__page.html#a12866c4340feabc2fade6a9d5a7dbb16">xwmm_mempool_page::node</a></div><div class="ttdeci">struct xwlib_bclst_node node</div><div class="ttdef"><b>Definition</b> <a href="page_8h_source.html#l00051">page.h:51</a></div></div>
<div class="ttc" id="astructxwmm__mempool__page_html_a4e0eea86b489b7969ef1d4a309f17056"><div class="ttname"><a href="structxwmm__mempool__page.html#a4e0eea86b489b7969ef1d4a309f17056">xwmm_mempool_page::value</a></div><div class="ttdeci">xwsq_t value</div><div class="ttdef"><b>Definition</b> <a href="page_8h_source.html#l00061">page.h:61</a></div></div>
<div class="ttc" id="astructxwmm__mempool__page_html_a678e3535823e3eab676917331f622473"><div class="ttname"><a href="structxwmm__mempool__page.html#a678e3535823e3eab676917331f622473">xwmm_mempool_page::attr</a></div><div class="ttdeci">union xwmm_mempool_page::@1 attr</div></div>
<div class="ttc" id="astructxwmm__mempool__page_html_a86aa875179e54032edc2152789309c19"><div class="ttname"><a href="structxwmm__mempool__page.html#a86aa875179e54032edc2152789309c19">xwmm_mempool_page::mapping</a></div><div class="ttdeci">xwptr_t mapping</div><div class="ttdef"><b>Definition</b> <a href="page_8h_source.html#l00040">page.h:40</a></div></div>
<div class="ttc" id="astructxwmm__mempool__page_html_a92a86e9c7241aa8d80d586a6168062c4"><div class="ttname"><a href="structxwmm__mempool__page.html#a92a86e9c7241aa8d80d586a6168062c4">xwmm_mempool_page::data</a></div><div class="ttdeci">union xwmm_mempool_page::@2 data</div></div>
<div class="ttc" id="astructxwmm__mempool__page_html_aa87dbecfaa4f9c859311f560c5bfdf28"><div class="ttname"><a href="structxwmm__mempool__page.html#aa87dbecfaa4f9c859311f560c5bfdf28">xwmm_mempool_page::refcnt</a></div><div class="ttdeci">xwsq_t refcnt</div><div class="ttdef"><b>Definition</b> <a href="page_8h_source.html#l00053">page.h:53</a></div></div>
<div class="ttc" id="astructxwmm__mempool__page_html_ac3d78b8833f1da346fff3ead6ccc88ac"><div class="ttname"><a href="structxwmm__mempool__page.html#ac3d78b8833f1da346fff3ead6ccc88ac">xwmm_mempool_page::objhead</a></div><div class="ttdeci">atomic_xwlfq_t objhead</div><div class="ttdef"><b>Definition</b> <a href="page_8h_source.html#l00052">page.h:52</a></div></div>
<div class="ttc" id="astructxwmm__mempool__page_html_adc80ae7e64a16dfabb3c173ba80fcd5a"><div class="ttname"><a href="structxwmm__mempool__page.html#adc80ae7e64a16dfabb3c173ba80fcd5a">xwmm_mempool_page::objcache</a></div><div class="ttdeci">struct xwmm_mempool_page::@1::@4 objcache</div></div>
<div class="ttc" id="axwaop_8h_html"><div class="ttname"><a href="xwaop_8h.html">xwaop.h</a></div><div class="ttdoc">XWOS通用库：原子操作</div></div>
<div class="ttc" id="axwbop_8h_html"><div class="ttname"><a href="xwbop_8h.html">xwbop.h</a></div><div class="ttdoc">XWOS通用库：位操作</div></div>
<div class="ttc" id="axwos_2mm_2common_8h_html"><div class="ttname"><a href="xwos_2mm_2common_8h.html">common.h</a></div><div class="ttdoc">XWOS内存管理：通用定义</div></div>
<div class="ttc" id="axwos_2standard_8h_html"><div class="ttname"><a href="xwos_2standard_8h.html">standard.h</a></div><div class="ttdoc">XWOS的标准头文件</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_43a52829888b753087a6774748486ed5.html">xwos</a></li><li class="navelem"><a class="el" href="dir_9dc98d2d57b5a37b2d02400b59474658.html">mm</a></li><li class="navelem"><a class="el" href="dir_be5874c8726cf154b99a7d6ef7f00d55.html">mempool</a></li><li class="navelem"><a class="el" href="objcache_8c.html">objcache.c</a></li>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
